// @ts-nocheck
var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,a=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=e=>{throw TypeError(e)},i=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),c=(e,t)=>function(){return t||(0,e[n(e)[0]])((t={exports:{}}).exports,t),t.exports},l=(o,i,c)=>(c=null!=o?e(a(o)):{},((e,a,o,i)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let c of n(a))s.call(e,c)||c===o||t(e,c,{get:()=>a[c],enumerable:!(i=r(a,c))||i.enumerable});return e})(!i&&o&&o.__esModule?c:t(c,"default",{value:o,enumerable:!0}),o)),d=(e,r,n)=>((e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n)(e,"symbol"!=typeof r?r+"":r,n),u=(e,t,r)=>t.has(e)||o("Cannot "+r),p=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),h=(e,t,r)=>t.has(e)?o("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),f=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),w=c({"(disabled):crypto"(){}}),A=c({"node_modules/tweetnacl/nacl-fast.js"(e,t){!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),a=new Uint8Array(32);a[0]=9;var s=t(),o=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function A(e,t,r,n,a){var s,o=0;for(s=0;s<a;s++)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function m(e,t,r,n){return A(e,t,r,n,16)}function y(e,t,r,n){return A(e,t,r,n,32)}function g(e,t,r,n){!function(e,t,r,n){for(var a,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,i=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,w=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,g=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,E=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,b=s,v=o,B=i,x=c,H=l,T=d,R=u,k=p,M=h,S=f,_=w,C=A,P=m,L=y,I=g,D=E,O=0;O<20;O+=2)b^=(a=(P^=(a=(M^=(a=(H^=(a=b+P|0)<<7|a>>>25)+b|0)<<9|a>>>23)+H|0)<<13|a>>>19)+M|0)<<18|a>>>14,T^=(a=(v^=(a=(L^=(a=(S^=(a=T+v|0)<<7|a>>>25)+T|0)<<9|a>>>23)+S|0)<<13|a>>>19)+L|0)<<18|a>>>14,_^=(a=(R^=(a=(B^=(a=(I^=(a=_+R|0)<<7|a>>>25)+_|0)<<9|a>>>23)+I|0)<<13|a>>>19)+B|0)<<18|a>>>14,D^=(a=(C^=(a=(k^=(a=(x^=(a=D+C|0)<<7|a>>>25)+D|0)<<9|a>>>23)+x|0)<<13|a>>>19)+k|0)<<18|a>>>14,b^=(a=(x^=(a=(B^=(a=(v^=(a=b+x|0)<<7|a>>>25)+b|0)<<9|a>>>23)+v|0)<<13|a>>>19)+B|0)<<18|a>>>14,T^=(a=(H^=(a=(k^=(a=(R^=(a=T+H|0)<<7|a>>>25)+T|0)<<9|a>>>23)+R|0)<<13|a>>>19)+k|0)<<18|a>>>14,_^=(a=(S^=(a=(M^=(a=(C^=(a=_+S|0)<<7|a>>>25)+_|0)<<9|a>>>23)+C|0)<<13|a>>>19)+M|0)<<18|a>>>14,D^=(a=(I^=(a=(L^=(a=(P^=(a=D+I|0)<<7|a>>>25)+D|0)<<9|a>>>23)+P|0)<<13|a>>>19)+L|0)<<18|a>>>14;b=b+s|0,v=v+o|0,B=B+i|0,x=x+c|0,H=H+l|0,T=T+d|0,R=R+u|0,k=k+p|0,M=M+h|0,S=S+f|0,_=_+w|0,C=C+A|0,P=P+m|0,L=L+y|0,I=I+g|0,D=D+E|0,e[0]=b>>>0&255,e[1]=b>>>8&255,e[2]=b>>>16&255,e[3]=b>>>24&255,e[4]=v>>>0&255,e[5]=v>>>8&255,e[6]=v>>>16&255,e[7]=v>>>24&255,e[8]=B>>>0&255,e[9]=B>>>8&255,e[10]=B>>>16&255,e[11]=B>>>24&255,e[12]=x>>>0&255,e[13]=x>>>8&255,e[14]=x>>>16&255,e[15]=x>>>24&255,e[16]=H>>>0&255,e[17]=H>>>8&255,e[18]=H>>>16&255,e[19]=H>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=R>>>0&255,e[25]=R>>>8&255,e[26]=R>>>16&255,e[27]=R>>>24&255,e[28]=k>>>0&255,e[29]=k>>>8&255,e[30]=k>>>16&255,e[31]=k>>>24&255,e[32]=M>>>0&255,e[33]=M>>>8&255,e[34]=M>>>16&255,e[35]=M>>>24&255,e[36]=S>>>0&255,e[37]=S>>>8&255,e[38]=S>>>16&255,e[39]=S>>>24&255,e[40]=_>>>0&255,e[41]=_>>>8&255,e[42]=_>>>16&255,e[43]=_>>>24&255,e[44]=C>>>0&255,e[45]=C>>>8&255,e[46]=C>>>16&255,e[47]=C>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=L>>>0&255,e[53]=L>>>8&255,e[54]=L>>>16&255,e[55]=L>>>24&255,e[56]=I>>>0&255,e[57]=I>>>8&255,e[58]=I>>>16&255,e[59]=I>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function E(e,t,r,n){!function(e,t,r,n){for(var a,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,i=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,w=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,A=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,g=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,E=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,b=0;b<20;b+=2)s^=(a=(m^=(a=(h^=(a=(l^=(a=s+m|0)<<7|a>>>25)+s|0)<<9|a>>>23)+l|0)<<13|a>>>19)+h|0)<<18|a>>>14,d^=(a=(o^=(a=(y^=(a=(f^=(a=d+o|0)<<7|a>>>25)+d|0)<<9|a>>>23)+f|0)<<13|a>>>19)+y|0)<<18|a>>>14,w^=(a=(u^=(a=(i^=(a=(g^=(a=w+u|0)<<7|a>>>25)+w|0)<<9|a>>>23)+g|0)<<13|a>>>19)+i|0)<<18|a>>>14,E^=(a=(A^=(a=(p^=(a=(c^=(a=E+A|0)<<7|a>>>25)+E|0)<<9|a>>>23)+c|0)<<13|a>>>19)+p|0)<<18|a>>>14,s^=(a=(c^=(a=(i^=(a=(o^=(a=s+c|0)<<7|a>>>25)+s|0)<<9|a>>>23)+o|0)<<13|a>>>19)+i|0)<<18|a>>>14,d^=(a=(l^=(a=(p^=(a=(u^=(a=d+l|0)<<7|a>>>25)+d|0)<<9|a>>>23)+u|0)<<13|a>>>19)+p|0)<<18|a>>>14,w^=(a=(f^=(a=(h^=(a=(A^=(a=w+f|0)<<7|a>>>25)+w|0)<<9|a>>>23)+A|0)<<13|a>>>19)+h|0)<<18|a>>>14,E^=(a=(g^=(a=(y^=(a=(m^=(a=E+g|0)<<7|a>>>25)+E|0)<<9|a>>>23)+m|0)<<13|a>>>19)+y|0)<<18|a>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=d>>>0&255,e[5]=d>>>8&255,e[6]=d>>>16&255,e[7]=d>>>24&255,e[8]=w>>>0&255,e[9]=w>>>8&255,e[10]=w>>>16&255,e[11]=w>>>24&255,e[12]=E>>>0&255,e[13]=E>>>8&255,e[14]=E>>>16&255,e[15]=E>>>24&255,e[16]=u>>>0&255,e[17]=u>>>8&255,e[18]=u>>>16&255,e[19]=u>>>24&255,e[20]=p>>>0&255,e[21]=p>>>8&255,e[22]=p>>>16&255,e[23]=p>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,n,a,s,o){var i,c,l=new Uint8Array(16),d=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=s[c];for(;a>=64;){for(g(d,l,o,b),c=0;c<64;c++)e[t+c]=r[n+c]^d[c];for(i=1,c=8;c<16;c++)i=i+(255&l[c])|0,l[c]=255&i,i>>>=8;a-=64,t+=64,n+=64}if(a>0)for(g(d,l,o,b),c=0;c<a;c++)e[t+c]=r[n+c]^d[c];return 0}function B(e,t,r,n,a){var s,o,i=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)i[o]=0;for(o=0;o<8;o++)i[o]=n[o];for(;r>=64;){for(g(c,i,a,b),o=0;o<64;o++)e[t+o]=c[o];for(s=1,o=8;o<16;o++)s=s+(255&i[o])|0,i[o]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(g(c,i,a,b),o=0;o<r;o++)e[t+o]=c[o];return 0}function x(e,t,r,n,a){var s=new Uint8Array(32);E(s,n,a,b);for(var o=new Uint8Array(8),i=0;i<8;i++)o[i]=n[i+16];return B(e,t,r,o,s)}function H(e,t,r,n,a,s,o){var i=new Uint8Array(32);E(i,s,o,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=s[l+16];return v(e,t,r,n,a,c,i)}var T=function(e){var t,r,n,a,s,o,i,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),a=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|a<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(a>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|o<<2),i=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|i<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(i>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function R(e,t,r,n,a,s){var o=new T(s);return o.update(r,n,a),o.finish(e,t),0}function k(e,t,r,n,a,s){var o=new Uint8Array(16);return R(o,0,r,n,a,s),m(e,t,o,0)}function M(e,t,r,n,a){var s;if(r<32)return-1;for(H(e,0,t,0,r,n,a),R(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function S(e,t,r,n,a){var s,o=new Uint8Array(32);if(r<32)return-1;if(x(o,0,32,n,a),0!==k(t,16,t,32,r-32,o))return-1;for(H(e,0,t,0,r,n,a),s=0;s<32;s++)e[s]=0;return 0}function _(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function C(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function P(e,t,r){for(var n,a=~(r-1),s=0;s<16;s++)n=a&(e[s]^t[s]),e[s]^=n,t[s]^=n}function L(e,r){var n,a,s,o=t(),i=t();for(n=0;n<16;n++)i[n]=r[n];for(C(i),C(i),C(i),a=0;a<2;a++){for(o[0]=i[0]-65517,n=1;n<15;n++)o[n]=i[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=i[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,P(i,o,1-s)}for(n=0;n<16;n++)e[2*n]=255&i[n],e[2*n+1]=i[n]>>8}function I(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return L(r,e),L(n,t),y(r,0,n,0)}function D(e){var t=new Uint8Array(32);return L(t,e),1&t[0]}function O(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function N(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function z(e,t,r){var n,a,s=0,o=0,i=0,c=0,l=0,d=0,u=0,p=0,h=0,f=0,w=0,A=0,m=0,y=0,g=0,E=0,b=0,v=0,B=0,x=0,H=0,T=0,R=0,k=0,M=0,S=0,_=0,C=0,P=0,L=0,I=0,D=r[0],O=r[1],U=r[2],N=r[3],z=r[4],F=r[5],W=r[6],$=r[7],j=r[8],X=r[9],K=r[10],J=r[11],V=r[12],Y=r[13],q=r[14],G=r[15];s+=(n=t[0])*D,o+=n*O,i+=n*U,c+=n*N,l+=n*z,d+=n*F,u+=n*W,p+=n*$,h+=n*j,f+=n*X,w+=n*K,A+=n*J,m+=n*V,y+=n*Y,g+=n*q,E+=n*G,o+=(n=t[1])*D,i+=n*O,c+=n*U,l+=n*N,d+=n*z,u+=n*F,p+=n*W,h+=n*$,f+=n*j,w+=n*X,A+=n*K,m+=n*J,y+=n*V,g+=n*Y,E+=n*q,b+=n*G,i+=(n=t[2])*D,c+=n*O,l+=n*U,d+=n*N,u+=n*z,p+=n*F,h+=n*W,f+=n*$,w+=n*j,A+=n*X,m+=n*K,y+=n*J,g+=n*V,E+=n*Y,b+=n*q,v+=n*G,c+=(n=t[3])*D,l+=n*O,d+=n*U,u+=n*N,p+=n*z,h+=n*F,f+=n*W,w+=n*$,A+=n*j,m+=n*X,y+=n*K,g+=n*J,E+=n*V,b+=n*Y,v+=n*q,B+=n*G,l+=(n=t[4])*D,d+=n*O,u+=n*U,p+=n*N,h+=n*z,f+=n*F,w+=n*W,A+=n*$,m+=n*j,y+=n*X,g+=n*K,E+=n*J,b+=n*V,v+=n*Y,B+=n*q,x+=n*G,d+=(n=t[5])*D,u+=n*O,p+=n*U,h+=n*N,f+=n*z,w+=n*F,A+=n*W,m+=n*$,y+=n*j,g+=n*X,E+=n*K,b+=n*J,v+=n*V,B+=n*Y,x+=n*q,H+=n*G,u+=(n=t[6])*D,p+=n*O,h+=n*U,f+=n*N,w+=n*z,A+=n*F,m+=n*W,y+=n*$,g+=n*j,E+=n*X,b+=n*K,v+=n*J,B+=n*V,x+=n*Y,H+=n*q,T+=n*G,p+=(n=t[7])*D,h+=n*O,f+=n*U,w+=n*N,A+=n*z,m+=n*F,y+=n*W,g+=n*$,E+=n*j,b+=n*X,v+=n*K,B+=n*J,x+=n*V,H+=n*Y,T+=n*q,R+=n*G,h+=(n=t[8])*D,f+=n*O,w+=n*U,A+=n*N,m+=n*z,y+=n*F,g+=n*W,E+=n*$,b+=n*j,v+=n*X,B+=n*K,x+=n*J,H+=n*V,T+=n*Y,R+=n*q,k+=n*G,f+=(n=t[9])*D,w+=n*O,A+=n*U,m+=n*N,y+=n*z,g+=n*F,E+=n*W,b+=n*$,v+=n*j,B+=n*X,x+=n*K,H+=n*J,T+=n*V,R+=n*Y,k+=n*q,M+=n*G,w+=(n=t[10])*D,A+=n*O,m+=n*U,y+=n*N,g+=n*z,E+=n*F,b+=n*W,v+=n*$,B+=n*j,x+=n*X,H+=n*K,T+=n*J,R+=n*V,k+=n*Y,M+=n*q,S+=n*G,A+=(n=t[11])*D,m+=n*O,y+=n*U,g+=n*N,E+=n*z,b+=n*F,v+=n*W,B+=n*$,x+=n*j,H+=n*X,T+=n*K,R+=n*J,k+=n*V,M+=n*Y,S+=n*q,_+=n*G,m+=(n=t[12])*D,y+=n*O,g+=n*U,E+=n*N,b+=n*z,v+=n*F,B+=n*W,x+=n*$,H+=n*j,T+=n*X,R+=n*K,k+=n*J,M+=n*V,S+=n*Y,_+=n*q,C+=n*G,y+=(n=t[13])*D,g+=n*O,E+=n*U,b+=n*N,v+=n*z,B+=n*F,x+=n*W,H+=n*$,T+=n*j,R+=n*X,k+=n*K,M+=n*J,S+=n*V,_+=n*Y,C+=n*q,P+=n*G,g+=(n=t[14])*D,E+=n*O,b+=n*U,v+=n*N,B+=n*z,x+=n*F,H+=n*W,T+=n*$,R+=n*j,k+=n*X,M+=n*K,S+=n*J,_+=n*V,C+=n*Y,P+=n*q,L+=n*G,E+=(n=t[15])*D,o+=38*(v+=n*U),i+=38*(B+=n*N),c+=38*(x+=n*z),l+=38*(H+=n*F),d+=38*(T+=n*W),u+=38*(R+=n*$),p+=38*(k+=n*j),h+=38*(M+=n*X),f+=38*(S+=n*K),w+=38*(_+=n*J),A+=38*(C+=n*V),m+=38*(P+=n*Y),y+=38*(L+=n*q),g+=38*(I+=n*G),s=(n=(s+=38*(b+=n*O))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),i=(n=i+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),A=(n=A+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),E=(n=E+a+65535)-65536*(a=Math.floor(n/65536)),s=(n=(s+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(n/65536)),o=(n=o+a+65535)-65536*(a=Math.floor(n/65536)),i=(n=i+a+65535)-65536*(a=Math.floor(n/65536)),c=(n=c+a+65535)-65536*(a=Math.floor(n/65536)),l=(n=l+a+65535)-65536*(a=Math.floor(n/65536)),d=(n=d+a+65535)-65536*(a=Math.floor(n/65536)),u=(n=u+a+65535)-65536*(a=Math.floor(n/65536)),p=(n=p+a+65535)-65536*(a=Math.floor(n/65536)),h=(n=h+a+65535)-65536*(a=Math.floor(n/65536)),f=(n=f+a+65535)-65536*(a=Math.floor(n/65536)),w=(n=w+a+65535)-65536*(a=Math.floor(n/65536)),A=(n=A+a+65535)-65536*(a=Math.floor(n/65536)),m=(n=m+a+65535)-65536*(a=Math.floor(n/65536)),y=(n=y+a+65535)-65536*(a=Math.floor(n/65536)),g=(n=g+a+65535)-65536*(a=Math.floor(n/65536)),E=(n=E+a+65535)-65536*(a=Math.floor(n/65536)),s+=a-1+37*(a-1),e[0]=s,e[1]=o,e[2]=i,e[3]=c,e[4]=l,e[5]=d,e[6]=u,e[7]=p,e[8]=h,e[9]=f,e[10]=w,e[11]=A,e[12]=m,e[13]=y,e[14]=g,e[15]=E}function F(e,t){z(e,t,t)}function W(e,r){var n,a=t();for(n=0;n<16;n++)a[n]=r[n];for(n=253;n>=0;n--)F(a,a),2!==n&&4!==n&&z(a,a,r);for(n=0;n<16;n++)e[n]=a[n]}function $(e,r){var n,a=t();for(n=0;n<16;n++)a[n]=r[n];for(n=250;n>=0;n--)F(a,a),1!==n&&z(a,a,r);for(n=0;n<16;n++)e[n]=a[n]}function j(e,r,n){var a,s,o=new Uint8Array(32),i=new Float64Array(80),l=t(),d=t(),u=t(),p=t(),h=t(),f=t();for(s=0;s<31;s++)o[s]=r[s];for(o[31]=127&r[31]|64,o[0]&=248,O(i,n),s=0;s<16;s++)d[s]=i[s],p[s]=l[s]=u[s]=0;for(l[0]=p[0]=1,s=254;s>=0;--s)P(l,d,a=o[s>>>3]>>>(7&s)&1),P(u,p,a),U(h,l,u),N(l,l,u),U(u,d,p),N(d,d,p),F(p,h),F(f,l),z(l,u,l),z(u,d,h),U(h,l,u),N(l,l,u),F(d,l),N(u,p,f),z(l,u,c),U(l,l,p),z(u,u,l),z(l,p,f),z(p,d,i),F(d,h),P(l,d,a),P(u,p,a);for(s=0;s<16;s++)i[s+16]=l[s],i[s+32]=u[s],i[s+48]=d[s],i[s+64]=p[s];var w=i.subarray(32),A=i.subarray(16);return W(w,w),z(A,A,w),L(e,A),0}function X(e,t){return j(e,t,a)}function K(e,t){return r(t,32),X(e,t)}function J(e,t,r){var a=new Uint8Array(32);return j(a,r,t),E(e,n,a,b)}T.prototype.blocks=function(e,t,r){for(var n,a,s,o,i,c,l,d,u,p,h,f,w,A,m,y,g,E,b,v=this.fin?0:2048,B=this.h[0],x=this.h[1],H=this.h[2],T=this.h[3],R=this.h[4],k=this.h[5],M=this.h[6],S=this.h[7],_=this.h[8],C=this.h[9],P=this.r[0],L=this.r[1],I=this.r[2],D=this.r[3],O=this.r[4],U=this.r[5],N=this.r[6],z=this.r[7],F=this.r[8],W=this.r[9];r>=16;)p=u=0,p+=(B+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*P,p+=(x+=8191&(n>>>13|(a=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*W),p+=(H+=8191&(a>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*F),p+=(T+=8191&(s>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*z),u=(p+=(R+=8191&(o>>>4|(i=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*N))>>>13,p&=8191,p+=(k+=i>>>1&8191)*(5*U),p+=(M+=8191&(i>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*O),p+=(S+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),p+=(_+=8191&(l>>>8|(d=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*I),h=u+=(p+=(C+=d>>>5|v)*(5*L))>>>13,h+=B*L,h+=x*P,h+=H*(5*W),h+=T*(5*F),u=(h+=R*(5*z))>>>13,h&=8191,h+=k*(5*N),h+=M*(5*U),h+=S*(5*O),h+=_*(5*D),u+=(h+=C*(5*I))>>>13,h&=8191,f=u,f+=B*I,f+=x*L,f+=H*P,f+=T*(5*W),u=(f+=R*(5*F))>>>13,f&=8191,f+=k*(5*z),f+=M*(5*N),f+=S*(5*U),f+=_*(5*O),w=u+=(f+=C*(5*D))>>>13,w+=B*D,w+=x*I,w+=H*L,w+=T*P,u=(w+=R*(5*W))>>>13,w&=8191,w+=k*(5*F),w+=M*(5*z),w+=S*(5*N),w+=_*(5*U),A=u+=(w+=C*(5*O))>>>13,A+=B*O,A+=x*D,A+=H*I,A+=T*L,u=(A+=R*P)>>>13,A&=8191,A+=k*(5*W),A+=M*(5*F),A+=S*(5*z),A+=_*(5*N),m=u+=(A+=C*(5*U))>>>13,m+=B*U,m+=x*O,m+=H*D,m+=T*I,u=(m+=R*L)>>>13,m&=8191,m+=k*P,m+=M*(5*W),m+=S*(5*F),m+=_*(5*z),y=u+=(m+=C*(5*N))>>>13,y+=B*N,y+=x*U,y+=H*O,y+=T*D,u=(y+=R*I)>>>13,y&=8191,y+=k*L,y+=M*P,y+=S*(5*W),y+=_*(5*F),g=u+=(y+=C*(5*z))>>>13,g+=B*z,g+=x*N,g+=H*U,g+=T*O,u=(g+=R*D)>>>13,g&=8191,g+=k*I,g+=M*L,g+=S*P,g+=_*(5*W),E=u+=(g+=C*(5*F))>>>13,E+=B*F,E+=x*z,E+=H*N,E+=T*U,u=(E+=R*O)>>>13,E&=8191,E+=k*D,E+=M*I,E+=S*L,E+=_*P,b=u+=(E+=C*(5*W))>>>13,b+=B*W,b+=x*F,b+=H*z,b+=T*N,u=(b+=R*U)>>>13,b&=8191,b+=k*O,b+=M*D,b+=S*I,b+=_*L,B=p=8191&(u=(u=((u+=(b+=C*P)>>>13)<<2)+u|0)+(p&=8191)|0),x=h+=u>>>=13,H=f&=8191,T=w&=8191,R=A&=8191,k=m&=8191,M=y&=8191,S=g&=8191,_=E&=8191,C=b&=8191,t+=16,r-=16;this.h[0]=B,this.h[1]=x,this.h[2]=H,this.h[3]=T,this.h[4]=R,this.h[5]=k,this.h[6]=M,this.h[7]=S,this.h[8]=_,this.h[9]=C},T.prototype.finish=function(e,t){var r,n,a,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),a=this.h[0]+this.pad[0],this.h[0]=65535&a,s=1;s<8;s++)a=(this.h[s]+this.pad[s]|0)+(a>>>16)|0,this.h[s]=65535&a;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},T.prototype.update=function(e,t,r){var n,a;if(this.leftover){for((a=16-this.leftover)>r&&(a=r),n=0;n<a;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=a,t+=a,this.leftover+=a,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(a=r-r%16,this.blocks(e,t,a),t+=a,r-=a),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var V=M,Y=S;var q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(e,t,r,n){for(var a,s,o,i,c,l,d,u,p,h,f,w,A,m,y,g,E,b,v,B,x,H,T,R,k,M,S=new Int32Array(16),_=new Int32Array(16),C=e[0],P=e[1],L=e[2],I=e[3],D=e[4],O=e[5],U=e[6],N=e[7],z=t[0],F=t[1],W=t[2],$=t[3],j=t[4],X=t[5],K=t[6],J=t[7],V=0;n>=128;){for(v=0;v<16;v++)B=8*v+V,S[v]=r[B+0]<<24|r[B+1]<<16|r[B+2]<<8|r[B+3],_[v]=r[B+4]<<24|r[B+5]<<16|r[B+6]<<8|r[B+7];for(v=0;v<80;v++)if(a=C,s=P,o=L,i=I,c=D,l=O,d=U,N,p=z,h=F,f=W,w=$,A=j,m=X,y=K,J,T=65535&(H=J),R=H>>>16,k=65535&(x=N),M=x>>>16,T+=65535&(H=(j>>>14|D<<18)^(j>>>18|D<<14)^(D>>>9|j<<23)),R+=H>>>16,k+=65535&(x=(D>>>14|j<<18)^(D>>>18|j<<14)^(j>>>9|D<<23)),M+=x>>>16,T+=65535&(H=j&X^~j&K),R+=H>>>16,k+=65535&(x=D&O^~D&U),M+=x>>>16,T+=65535&(H=q[2*v+1]),R+=H>>>16,k+=65535&(x=q[2*v]),M+=x>>>16,x=S[v%16],R+=(H=_[v%16])>>>16,k+=65535&x,M+=x>>>16,k+=(R+=(T+=65535&H)>>>16)>>>16,T=65535&(H=b=65535&T|R<<16),R=H>>>16,k=65535&(x=E=65535&k|(M+=k>>>16)<<16),M=x>>>16,T+=65535&(H=(z>>>28|C<<4)^(C>>>2|z<<30)^(C>>>7|z<<25)),R+=H>>>16,k+=65535&(x=(C>>>28|z<<4)^(z>>>2|C<<30)^(z>>>7|C<<25)),M+=x>>>16,R+=(H=z&F^z&W^F&W)>>>16,k+=65535&(x=C&P^C&L^P&L),M+=x>>>16,u=65535&(k+=(R+=(T+=65535&H)>>>16)>>>16)|(M+=k>>>16)<<16,g=65535&T|R<<16,T=65535&(H=w),R=H>>>16,k=65535&(x=i),M=x>>>16,R+=(H=b)>>>16,k+=65535&(x=E),M+=x>>>16,P=a,L=s,I=o,D=i=65535&(k+=(R+=(T+=65535&H)>>>16)>>>16)|(M+=k>>>16)<<16,O=c,U=l,N=d,C=u,F=p,W=h,$=f,j=w=65535&T|R<<16,X=A,K=m,J=y,z=g,v%16==15)for(B=0;B<16;B++)x=S[B],T=65535&(H=_[B]),R=H>>>16,k=65535&x,M=x>>>16,x=S[(B+9)%16],T+=65535&(H=_[(B+9)%16]),R+=H>>>16,k+=65535&x,M+=x>>>16,E=S[(B+1)%16],T+=65535&(H=((b=_[(B+1)%16])>>>1|E<<31)^(b>>>8|E<<24)^(b>>>7|E<<25)),R+=H>>>16,k+=65535&(x=(E>>>1|b<<31)^(E>>>8|b<<24)^E>>>7),M+=x>>>16,E=S[(B+14)%16],R+=(H=((b=_[(B+14)%16])>>>19|E<<13)^(E>>>29|b<<3)^(b>>>6|E<<26))>>>16,k+=65535&(x=(E>>>19|b<<13)^(b>>>29|E<<3)^E>>>6),M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,S[B]=65535&k|M<<16,_[B]=65535&T|R<<16;T=65535&(H=z),R=H>>>16,k=65535&(x=C),M=x>>>16,x=e[0],R+=(H=t[0])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[0]=C=65535&k|M<<16,t[0]=z=65535&T|R<<16,T=65535&(H=F),R=H>>>16,k=65535&(x=P),M=x>>>16,x=e[1],R+=(H=t[1])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[1]=P=65535&k|M<<16,t[1]=F=65535&T|R<<16,T=65535&(H=W),R=H>>>16,k=65535&(x=L),M=x>>>16,x=e[2],R+=(H=t[2])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[2]=L=65535&k|M<<16,t[2]=W=65535&T|R<<16,T=65535&(H=$),R=H>>>16,k=65535&(x=I),M=x>>>16,x=e[3],R+=(H=t[3])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[3]=I=65535&k|M<<16,t[3]=$=65535&T|R<<16,T=65535&(H=j),R=H>>>16,k=65535&(x=D),M=x>>>16,x=e[4],R+=(H=t[4])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[4]=D=65535&k|M<<16,t[4]=j=65535&T|R<<16,T=65535&(H=X),R=H>>>16,k=65535&(x=O),M=x>>>16,x=e[5],R+=(H=t[5])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[5]=O=65535&k|M<<16,t[5]=X=65535&T|R<<16,T=65535&(H=K),R=H>>>16,k=65535&(x=U),M=x>>>16,x=e[6],R+=(H=t[6])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[6]=U=65535&k|M<<16,t[6]=K=65535&T|R<<16,T=65535&(H=J),R=H>>>16,k=65535&(x=N),M=x>>>16,x=e[7],R+=(H=t[7])>>>16,k+=65535&x,M+=x>>>16,M+=(k+=(R+=(T+=65535&H)>>>16)>>>16)>>>16,e[7]=N=65535&k|M<<16,t[7]=J=65535&T|R<<16,V+=128,n-=128}return n}function Z(e,t,r){var n,a=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),i=r;for(a[0]=1779033703,a[1]=3144134277,a[2]=1013904242,a[3]=2773480762,a[4]=1359893119,a[5]=2600822924,a[6]=528734635,a[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,G(a,s,t,r),r%=128,n=0;n<r;n++)o[n]=t[i-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,f(o,r-8,i/536870912|0,i<<3),G(a,s,o,r),n=0;n<8;n++)f(e,8*n,a[n],s[n]);return 0}function Q(e,r){var n=t(),a=t(),s=t(),o=t(),i=t(),c=t(),l=t(),u=t(),p=t();N(n,e[1],e[0]),N(p,r[1],r[0]),z(n,n,p),U(a,e[0],e[1]),U(p,r[0],r[1]),z(a,a,p),z(s,e[3],r[3]),z(s,s,d),z(o,e[2],r[2]),U(o,o,o),N(i,a,n),N(c,o,s),U(l,o,s),U(u,a,n),z(e[0],i,c),z(e[1],u,l),z(e[2],l,c),z(e[3],i,u)}function ee(e,t,r){var n;for(n=0;n<4;n++)P(e[n],t[n],r)}function te(e,r){var n=t(),a=t(),s=t();W(s,r[2]),z(n,r[0],s),z(a,r[1],s),L(e,a),e[31]^=D(n)<<7}function re(e,t,r){var n,a;for(_(e[0],s),_(e[1],o),_(e[2],o),_(e[3],s),a=255;a>=0;--a)ee(e,t,n=r[a/8|0]>>(7&a)&1),Q(t,e),Q(e,e),ee(e,t,n)}function ne(e,r){var n=[t(),t(),t(),t()];_(n[0],u),_(n[1],p),_(n[2],o),z(n[3],u,p),re(e,n,r)}function ae(e,n,a){var s,o=new Uint8Array(64),i=[t(),t(),t(),t()];for(a||r(n,32),Z(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64,ne(i,o),te(e,i),s=0;s<32;s++)n[s+32]=e[s];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,a,s;for(n=63;n>=32;--n){for(r=0,a=n-32,s=n-12;a<s;++a)t[a]+=r-16*t[n]*se[a-(n-32)],r=Math.floor((t[a]+128)/256),t[a]-=256*r;t[a]+=r,t[n]=0}for(r=0,a=0;a<32;a++)t[a]+=r-(t[31]>>4)*se[a],r=t[a]>>8,t[a]&=255;for(a=0;a<32;a++)t[a]-=r*se[a];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ie(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ce(e,r,n,a){var s,o,i=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),d=new Float64Array(64),u=[t(),t(),t(),t()];Z(i,a,32),i[0]&=248,i[31]&=127,i[31]|=64;var p=n+64;for(s=0;s<n;s++)e[64+s]=r[s];for(s=0;s<32;s++)e[32+s]=i[32+s];for(Z(l,e.subarray(32),n+32),ie(l),ne(u,l),te(e,u),s=32;s<64;s++)e[s]=a[s];for(Z(c,e,n+64),ie(c),s=0;s<64;s++)d[s]=0;for(s=0;s<32;s++)d[s]=l[s];for(s=0;s<32;s++)for(o=0;o<32;o++)d[s+o]+=c[s]*i[o];return oe(e.subarray(32),d),p}function le(e,r,n,a){var i,c=new Uint8Array(32),d=new Uint8Array(64),u=[t(),t(),t(),t()],p=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),a=t(),i=t(),c=t(),d=t(),u=t(),p=t();return _(e[2],o),O(e[1],r),F(i,e[1]),z(c,i,l),N(i,i,e[2]),U(c,e[2],c),F(d,c),F(u,d),z(p,u,d),z(n,p,i),z(n,n,c),$(n,n),z(n,n,i),z(n,n,c),z(n,n,c),z(e[0],n,c),F(a,e[0]),z(a,a,c),I(a,i)&&z(e[0],e[0],h),F(a,e[0]),z(a,a,c),I(a,i)?-1:(D(e[0])===r[31]>>7&&N(e[0],s,e[0]),z(e[3],e[0],e[1]),0)}(p,a))return-1;for(i=0;i<n;i++)e[i]=r[i];for(i=0;i<32;i++)e[i+32]=a[i];if(Z(d,e,n),ie(d),re(u,p,d),ne(p,r.subarray(32)),Q(u,p),te(c,u),n-=64,y(r,0,c,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=r[i+64];return n}var de=16,ue=64,pe=32,he=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function we(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ae(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:E,crypto_stream_xor:H,crypto_stream:x,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:B,crypto_onetimeauth:R,crypto_onetimeauth_verify:k,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:M,crypto_secretbox_open:S,crypto_scalarmult:j,crypto_scalarmult_base:X,crypto_box_beforenm:J,crypto_box_afternm:V,crypto_box:function(e,t,r,n,a,s){var o=new Uint8Array(32);return J(o,a,s),V(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,a,s){var o=new Uint8Array(32);return J(o,a,s),Y(e,t,r,n,o)},crypto_box_keypair:K,crypto_hash:Z,crypto_sign:ce,crypto_sign_keypair:ae,crypto_sign_open:le,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:de,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:pe,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:l,L:se,pack25519:L,unpack25519:O,M:z,A:U,S:F,Z:N,pow2523:$,add:Q,set25519:_,modL:oe,scalarmult:re,scalarbase:ne},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){we(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),a=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+32]=e[s];return M(a,n,n.length,t,r),a.subarray(de)},e.secretbox.open=function(e,t,r){we(e,t,r),fe(r,t);for(var n=new Uint8Array(de+e.length),a=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+de]=e[s];return n.length<32||0!==S(a,n,n.length,t,r)?null:a.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=de,e.scalarMult=function(e,t){if(we(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return j(r,e,t),r},e.scalarMult.base=function(e){if(we(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return X(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,a){var s=e.box.before(n,a);return e.secretbox(t,r,s)},e.box.before=function(e,t){we(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return J(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,a){var s=e.box.before(n,a);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(we(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return X(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(we(e,t),t.length!==he)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return ce(r,e,e.length,t),r},e.sign.open=function(e,t){if(we(e,t),t.length!==pe)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=le(r,e,e.length,t);if(n<0)return null;for(var a=new Uint8Array(n),s=0;s<a.length;s++)a[s]=r[s];return a},e.sign.detached=function(t,r){for(var n=e.sign(t,r),a=new Uint8Array(ue),s=0;s<a.length;s++)a[s]=n[s];return a},e.sign.detached.verify=function(e,t,r){if(we(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==pe)throw new Error("bad public key size");var n,a=new Uint8Array(ue+e.length),s=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)a[n]=t[n];for(n=0;n<e.length;n++)a[n+ue]=e[n];return le(s,a,a.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(pe),t=new Uint8Array(he);return ae(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(we(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(pe),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(we(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(pe),r=new Uint8Array(he),n=0;n<32;n++)r[n]=e[n];return ae(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=pe,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){we(e);var t=new Uint8Array(64);return Z(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return we(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===A(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG(function(e,r){var n,a=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(a.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=a[n];Ae(a)})}else void 0!==i&&(t=w())&&t.randomBytes&&e.setPRNG(function(e,r){var n,a=t.randomBytes(r);for(n=0;n<r;n++)e[n]=a[n];Ae(a)})}()}(void 0!==t&&t.exports?t.exports:self.nacl=self.nacl||{})}}),m=c({"node_modules/jszip/dist/jszip.min.js"(e,t){!function(r){"object"==typeof e&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=r()}(function(){return function e(t,r,n){function a(o,c){if(!r[o]){if(!t[o]){var l="function"==typeof i&&i;if(!c&&l)return l(o,!0);if(s)return s(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[o]={exports:{}};t[o][0].call(u.exports,function(e){return a(t[o][1][e]||e)},u,u.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof i&&i,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,r){var n=e("./utils"),a=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,a,o,i,c,l,d=[],u=0,p=e.length,h=p,f="string"!==n.getTypeOf(e);u<e.length;)h=p-u,a=f?(t=e[u++],r=u<p?e[u++]:0,u<p?e[u++]:0):(t=e.charCodeAt(u++),r=u<p?e.charCodeAt(u++):0,u<p?e.charCodeAt(u++):0),o=t>>2,i=(3&t)<<4|r>>4,c=1<h?(15&r)<<2|a>>6:64,l=2<h?63&a:64,d.push(s.charAt(o)+s.charAt(i)+s.charAt(c)+s.charAt(l));return d.join("")},r.decode=function(e){var t,r,n,o,i,c,l=0,d=0,u="data:";if(e.substr(0,5)===u)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&h--,e.charAt(e.length-2)===s.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=a.uint8array?new Uint8Array(0|h):new Array(0|h);l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(o=s.indexOf(e.charAt(l++)))>>4,r=(15&o)<<4|(i=s.indexOf(e.charAt(l++)))>>2,n=(3&i)<<6|(c=s.indexOf(e.charAt(l++))),p[d++]=t,64!==i&&(p[d++]=r),64!==c&&(p[d++]=n);return p}},{"./support":30,"./utils":32}],2:[function(e,t,r){var n=e("./external"),a=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function i(e,t,r,n,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=a}i.prototype={getContentWorker:function(){var e=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},i.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=i},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){var n=e("./utils"),a=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r){var n=a,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,r){var n=a,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^n[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),i=n?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(i,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function a(e,t,r,a,o,d){var u,p,h=e.file,f=e.compression,w=d!==i.utf8encode,A=s.transformTo("string",d(h.name)),m=s.transformTo("string",i.utf8encode(h.name)),y=h.comment,g=s.transformTo("string",d(y)),E=s.transformTo("string",i.utf8encode(y)),b=m.length!==h.name.length,v=E.length!==y.length,B="",x="",H="",T=h.dir,R=h.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize);var M=0;t&&(M|=8),w||!b&&!v||(M|=2048);var S,_,C,P=0,L=0;T&&(P|=16),"UNIX"===o?(L=798,P|=(S=h.unixPermissions,_=T,C=S,S||(C=_?16893:33204),(65535&C)<<16)):(L=20,P|=function(e){return 63&(e||0)}(h.dosPermissions)),u=R.getUTCHours(),u<<=6,u|=R.getUTCMinutes(),u<<=5,u|=R.getUTCSeconds()/2,p=R.getUTCFullYear()-1980,p<<=4,p|=R.getUTCMonth()+1,p<<=5,p|=R.getUTCDate(),b&&(x=n(1,1)+n(c(A),4)+m,B+="up"+n(x.length,2)+x),v&&(H=n(1,1)+n(c(g),4)+E,B+="uc"+n(H.length,2)+H);var I="";return I+="\n\0",I+=n(M,2),I+=f.magic,I+=n(u,2),I+=n(p,2),I+=n(k.crc32,4),I+=n(k.compressedSize,4),I+=n(k.uncompressedSize,4),I+=n(A.length,2),I+=n(B.length,2),{fileRecord:l.LOCAL_FILE_HEADER+I+A+B,dirRecord:l.CENTRAL_FILE_HEADER+n(L,2)+I+n(g.length,2)+"\0\0\0\0"+n(P,4)+n(a,4)+A+B+g}}var s=e("../utils"),o=e("../stream/GenericWorker"),i=e("../utf8"),c=e("../crc32"),l=e("../signature");function d(e,t,r,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(d,o),d.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=a(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t,r=this.streamFiles&&!e.file.dir,s=a(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),r)this.push({data:(t=e,l.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r,a,o,i,c,d,u=this.bytesWritten-e,p=(r=this.dirRecords.length,a=u,o=e,i=this.zipComment,c=this.encodeFileName,d=s.transformTo("string",c(i)),l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(r,2)+n(r,2)+n(a,4)+n(o,4)+n(d.length,2)+d);this.push({data:p,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},d.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},d.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){var n=e("../compressions"),a=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var s=new a(t.streamFiles,r,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,r){o++;var a=function(e,t){var r=e||t,a=n[r];if(!a)throw new Error(r+" is not a valid compression method !");return a}(r.options.compression,t.compression),i=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,l=r.date;r._compressWorker(a,i).withStreamInfo("file",{name:e,dir:c,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)}),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){var n=e("./utils"),a=e("./external"),s=e("./utf8"),o=e("./zipEntries"),i=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new a.Promise(function(t,r){var n=e.decompressed.getContentWorker().pipe(new i);n.on("error",function(e){r(e)}).on("end",function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new o(t);return r.load(e),r}).then(function(e){var r=[a.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var s=0;s<n.length;s++)r.push(l(n[s]));return a.Promise.all(r)}).then(function(e){for(var a=e.shift(),s=a.files,o=0;o<s.length;o++){var i=s[o],c=i.fileNameStr,l=n.resolve(i.fileNameStr);r.file(l,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:t.createFolders}),i.dir||(r.file(l).unsafeOriginalName=c)}return a.zipComment.length&&(r.comment=a.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){var n=e("../utils"),a=e("../stream/GenericWorker");function s(e,t){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,a),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){var n=e("readable-stream").Readable;function a(e,t,r){n.call(this,t),this._helper=e;var a=this;e.on("data",function(e,t){a.push(e)||a._helper.pause(),r&&r(t)}).on("error",function(e){a.emit("error",e)}).on("end",function(){a.push(null)})}e("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},t.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){function n(e,t,r){var n,a=s.getTypeOf(t),i=s.extend(r||{},c);i.date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=w(e)),i.createFolders&&(n=f(e))&&A.call(this,n,!0);var u="string"===a&&!1===i.binary&&!1===i.base64;r&&void 0!==r.binary||(i.binary=!u),(t instanceof l&&0===t.uncompressedSize||i.dir||!t||0===t.length)&&(i.base64=!1,i.binary=!0,t="",i.compression="STORE",a="string");var m;m=t instanceof l||t instanceof o?t:p.isNode&&p.isStream(t)?new h(e,t):s.prepareContent(e,t,i.binary,i.optimizedBinaryString,i.base64);var y=new d(e,m,i);this.files[e]=y}var a=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),i=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),d=e("./zipObject"),u=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},w=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},A=function(e,t){return t=void 0!==t?t:c.createFolders,e=w(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach(function(r,n){e(r,n)&&t.push(n)}),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(m(e)){var a=e;return this.filter(function(e,t){return!t.dir&&a.test(e)})}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(m(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=A.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");s.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=u.generateWorker(this,r,n)}catch(e){(t=new o("error")).error(e)}return new i(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){var n=e("./DataReader");function a(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===a)return s-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&a===s[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){var n=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=a},{"../utils":32}],19:[function(e,t,r){var n=e("./Uint8ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){var n=e("./DataReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){var n=e("./ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){var n=e("../utils"),a=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),i=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||a.uint8array?"nodebuffer"===t?new i(e):a.uint8array?new c(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){var n=e("./GenericWorker"),a=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){var n=e("./GenericWorker"),a=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){var n=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,a),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}a.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){var n=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}n.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){var n=e("../utils"),a=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),i=e("../support"),c=e("../external"),l=null;if(i.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,r){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=r,n.checkSupport(o),this._worker=e.pipe(new a(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new c.Promise(function(r,a){var s=[],i=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",function(e,r){s.push(e),t&&t(r)}).on("error",function(e){s=[],a(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(c,function(e,t){var r,n=0,a=null,s=0;for(r=0;r<t.length;r++)s+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(s),r=0;r<t.length;r++)a.set(t[r],n),n+=t[r].length;return a;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,s),l);r(e)}catch(e){a(e)}s=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){n.delay(t,arguments,r)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),r.blob=0===a.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){for(var n=e("./utils"),a=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),i=new Array(256),c=0;c<256;c++)i[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function d(){o.call(this,"utf-8 encode")}i[254]=i[254]=1,r.utf8encode=function(e){return a.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,r,n,s,o,i=e.length,c=0;for(s=0;s<i;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=a.uint8array?new Uint8Array(c):new Array(c),s=o=0;o<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t}(e)},r.utf8decode=function(e){return a.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,a,s,o=e.length,c=new Array(2*o);for(t=r=0;t<o;)if((a=e[t++])<128)c[r++]=a;else if(4<(s=i[a]))c[r++]=65533,t+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&t<o;)a=a<<6|63&e[t++],s--;1<s?c[r++]=65533:a<65536?c[r++]=a:(a-=65536,c[r++]=55296|a>>10&1023,c[r++]=56320|1023&a)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(a.uint8array?"uint8array":"array",e))},n.inherits(l,o),l.prototype.processChunk=function(e){var t=n.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+i[e[r]]>t?r:t}(t),c=t;o!==t.length&&(a.uint8array?(c=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(c=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(d,o),d.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){var n=e("./support"),a=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function i(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,r){var n=[],a=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;a<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+r,s)))),a+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,n=r.getTypeOf(e),a=!0;if("uint8array"===n?a=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(a=l.applyCanBeUsed.nodebuffer),a)for(;1<t;)try{return l.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function u(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=d;var p={};p.string={string:i,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},p.array={string:d,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},p.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return s.newBufferFrom(e)}},p.nodebuffer={string:d,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:i},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return p[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var a=t[n];"."===a||""===a&&0!==n&&n!==t.length-1||(".."===a?r.pop():r.push(a))}return r.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,s,i,l){return o.Promise.resolve(t).then(function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise(function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)}):e}).then(function(t){var d,u=r.getTypeOf(t);return u?("arraybuffer"===u?t=r.transformTo("uint8array",t):"string"===u&&(l?t=a.decode(t):s&&!0!==i&&(t=c(d=t,n.uint8array?new Uint8Array(d.length):new Array(d.length)))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){var n=e("./reader/readerFor"),a=e("./utils"),s=e("./signature"),o=e("./zipEntry"),i=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=i.uint8array?"uint8array":"array",r=a.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){var n=e("./reader/readerFor"),a=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),i=e("./utf8"),c=e("./compressions"),l=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(a)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:i.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:i.utf8decode(t.readData(e.length-5))}return null}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var a=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),i=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&n&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new a(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof i&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),i.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof i?this._data.getContentWorker():this._data instanceof c?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<l.length;u++)n.prototype[l[u]]=d;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){var r,n,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var s=0,o=new a(d),i=e.document.createTextNode("");o.observe(i,{characterData:!0}),r=function(){i.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var c=new e.MessageChannel;c.port1.onmessage=d,r=function(){c.port2.postMessage(0)}}var l=[];function d(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){var n=e("immediate");function a(){}var s={},o=["REJECTED"],i=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==a&&h(this,e)}function d(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function u(e,t,r){n(function(){var n;try{n=t(r)}catch(t){return s.reject(e,t)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)})}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function a(t){r||(r=!0,s.resolve(e,t))}var o=f(function(){t(a,n)});"error"===o.status&&n(o.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===i||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(a);return this.state!==c?u(r,this.state===i?e:t,this.outcome):this.queue.push(new d(r,e,t)),r},d.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){s.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(p,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=i,e.outcome=t;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(a),e)},l.reject=function(e){var t=new this(a);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),i=0,c=-1,l=new this(a);++c<r;)d(e[c],c);return l;function d(e,a){t.resolve(e).then(function(e){o[a]=e,++i!==r||n||(n=!0,s.resolve(l,o))},function(e){n||(n=!0,s.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,o=-1,i=new this(a);++o<t;)n=e[o],this.resolve(n).then(function(e){r||(r=!0,s.resolve(i,e))},function(e){r||(r=!0,s.reject(i,e))});return i}},{immediate:36}],38:[function(e,t,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){var n=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),i=e("./zlib/zstream"),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(o[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=n.deflateSetDictionary(this.strm,d)))throw new Error(o[r]);this._dict_set=!0}}function d(e,t){var r=new l(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}l.prototype.push=function(e,t){var r,o,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(l),i.next_out=0,i.avail_out=l),1!==(r=n.deflate(i,o))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==r);return 4===o?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==o||(this.onEnd(0),!(i.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=l,r.deflate=d,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){var n=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),i=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),d=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==o.Z_OK)throw new Error(i[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function p(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}u.prototype.push=function(e,t){var r,i,c,l,u,p,h=this.strm,f=this.options.chunkSize,w=this.options.dictionary,A=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?h.input=s.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(f),h.next_out=0,h.avail_out=f),(r=n.inflate(h,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&w&&(p="string"==typeof w?s.string2buf(w):"[object ArrayBuffer]"===d.call(w)?new Uint8Array(w):w,r=n.inflateSetDictionary(this.strm,p)),r===o.Z_BUF_ERROR&&!0===A&&(r=o.Z_OK,A=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==o.Z_STREAM_END&&(0!==h.avail_in||i!==o.Z_FINISH&&i!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(h.output,h.next_out),l=h.next_out-c,u=s.buf2string(h.output,c),h.next_out=l,h.avail_out=f-l,l&&a.arraySet(h.output,h.output,c,l,0),this.onData(u)):this.onData(a.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(A=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(i=o.Z_FINISH),i===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):i!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(h.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=u,r.inflate=p,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},r.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),a);else for(var s=0;s<n;s++)e[a+s]=t[r+s]},flattenChunks:function(e){var t,r,n,a,s,o;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),t=a=0,r=e.length;t<r;t++)s=e[t],o.set(s,a),a+=s.length;return o}},s={arraySet:function(e,t,r,n,a){for(var s=0;s<n;s++)e[a+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){var n=e("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new n.Buf8(256),i=0;i<256;i++)o[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r}o[254]=o[254]=1,r.string2buf=function(e){var t,r,a,s,o,i=e.length,c=0;for(s=0;s<i;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(a=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(a-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),s=o=0;o<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(a=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(a-56320),s++),r<128?t[o++]=r:(r<2048?t[o++]=192|r>>>6:(r<65536?t[o++]=224|r>>>12:(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63),t[o++]=128|r>>>6&63),t[o++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,a=t.length;r<a;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,a,s,i=t||e.length,l=new Array(2*i);for(r=n=0;r<i;)if((a=e[r++])<128)l[n++]=a;else if(4<(s=o[a]))l[n++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&r<i;)a=a<<6|63&e[r++],s--;1<s?l[n++]=65533:a<65536?l[n++]=a:(a-=65536,l[n++]=55296|a>>10&1023,l[n++]=56320|1023&a)}return c(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){t.exports=function(e,t,r,n){for(var a=65535&e,s=e>>>16&65535,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;s=s+(a=a+t[n++]|0)|0,--o;);a%=65521,s%=65521}return a|s<<16}},{}],44:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,a){var s=n,o=a+r;e^=-1;for(var i=a;i<o;i++)e=e>>>8^s[255&(e^t[i])];return-1^e}},{}],46:[function(e,t,r){var n,a=e("../utils/common"),s=e("./trees"),o=e("./adler32"),i=e("./crc32"),c=e("./messages"),l=-2,d=258,u=262,p=113;function h(e,t){return e.msg=c[t],t}function f(e){return(e<<1)-(4<e?9:0)}function w(e){for(var t=e.length;0<=--t;)e[t]=0}function A(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(a.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function m(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,A(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function g(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function E(e,t){var r,n,a=e.max_chain_length,s=e.strstart,o=e.prev_length,i=e.nice_match,c=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,l=e.window,p=e.w_mask,h=e.prev,f=e.strstart+d,w=l[s+o-1],A=l[s+o];e.prev_length>=e.good_match&&(a>>=2),i>e.lookahead&&(i=e.lookahead);do{if(l[(r=t)+o]===A&&l[r+o-1]===w&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<f);if(n=d-(f-s),s=f-d,o<n){if(e.match_start=t,i<=(o=n))break;w=l[s+o-1],A=l[s+o]}}}while((t=h[t&p])>c&&0!=--a);return o<=e.lookahead?o:e.lookahead}function b(e){var t,r,n,s,c,l,d,p,h,f,w=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=w+(w-u)){for(a.arraySet(e.window,e.window,w,w,0),e.match_start-=w,e.strstart-=w,e.block_start-=w,t=r=e.hash_size;n=e.head[--t],e.head[t]=w<=n?n-w:0,--r;);for(t=r=w;n=e.prev[--t],e.prev[t]=w<=n?n-w:0,--r;);s+=w}if(0===e.strm.avail_in)break;if(l=e.strm,d=e.window,p=e.strstart+e.lookahead,f=void 0,(h=s)<(f=l.avail_in)&&(f=h),r=0===f?0:(l.avail_in-=f,a.arraySet(d,l.input,l.next_in,f,p),1===l.state.wrap?l.adler=o(l.adler,d,f,p):2===l.state.wrap&&(l.adler=i(l.adler,d,f,p)),l.next_in+=f,l.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function v(e,t){for(var r,n;;){if(e.lookahead<u){if(b(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-u&&(e.match_length=E(e,r)),e.match_length>=3)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function B(e,t){for(var r,n,a;;){if(e.lookahead<u){if(b(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-u&&(e.match_length=E(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-3,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(m(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&m(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function x(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),w(this.dyn_ltree),w(this.dyn_dtree),w(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),w(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),w(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,s._tr_init(t),0):h(e,l)}function R(e){var t,r=T(e);return 0===r&&((t=e.state).window_size=2*t.w_size,w(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function k(e,t,r,n,s,o){if(!e)return l;var i=1;if(-1===t&&(t=6),n<0?(i=0,n=-n):15<n&&(i=2,n-=16),s<1||9<s||8!==r||n<8||15<n||t<0||9<t||o<0||4<o)return h(e,l);8===n&&(n=9);var c=new H;return(e.state=c).strm=e,c.wrap=i,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new a.Buf8(2*c.w_size),c.head=new a.Buf16(c.hash_size),c.prev=new a.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new a.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=r,R(e)}n=[new x(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(b(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,m(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(m(e,!1),e.strm.avail_out),1)}),new x(4,4,8,4,v),new x(4,5,16,8,v),new x(4,6,32,32,v),new x(4,4,16,16,B),new x(8,16,32,32,B),new x(8,16,128,128,B),new x(8,32,128,256,B),new x(32,128,258,1024,B),new x(32,258,258,4096,B)],r.deflateInit=function(e,t){return k(e,t,8,15,8,0)},r.deflateInit2=k,r.deflateReset=R,r.deflateResetKeep=T,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},r.deflate=function(e,t){var r,a,o,c;if(!e||!e.state||5<t||t<0)return e?h(e,l):l;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&4!==t)return h(e,0===e.avail_out?-5:l);if(a.strm=e,r=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,y(a,31),y(a,139),y(a,8),a.gzhead?(y(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),y(a,255&a.gzhead.time),y(a,a.gzhead.time>>8&255),y(a,a.gzhead.time>>16&255),y(a,a.gzhead.time>>24&255),y(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),y(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(y(a,255&a.gzhead.extra.length),y(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=i(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(y(a,0),y(a,0),y(a,0),y(a,0),y(a,0),y(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),y(a,3),a.status=p);else{var u=8+(a.w_bits-8<<4)<<8;u|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(u|=32),u+=31-u%31,a.status=p,g(a,u),0!==a.strstart&&(g(a,e.adler>>>16),g(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),A(e),o=a.pending,a.pending!==a.pending_buf_size));)y(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),A(e),o=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,y(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),0===c&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),A(e),o=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,y(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),0===c&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&A(e),a.pending+2<=a.pending_buf_size&&(y(a,255&e.adler),y(a,e.adler>>8&255),e.adler=0,a.status=p)):a.status=p),0!==a.pending){if(A(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&f(t)<=f(r)&&4!==t)return h(e,-5);if(666===a.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&666!==a.status){var E=2===a.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(b(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var r,n,a,o,i=e.window;;){if(e.lookahead<=d){if(b(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=i[a=e.strstart-1])===i[++a]&&n===i[++a]&&n===i[++a]){o=e.strstart+d;do{}while(n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&a<o);e.match_length=d-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(a,t):n[a.level].func(a,t);if(3!==E&&4!==E||(a.status=666),1===E||3===E)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===E&&(1===t?s._tr_align(a):5!==t&&(s._tr_stored_block(a,0,0,!1),3===t&&(w(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),A(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(y(a,255&e.adler),y(a,e.adler>>8&255),y(a,e.adler>>16&255),y(a,e.adler>>24&255),y(a,255&e.total_in),y(a,e.total_in>>8&255),y(a,e.total_in>>16&255),y(a,e.total_in>>24&255)):(g(a,e.adler>>>16),g(a,65535&e.adler)),A(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==p&&666!==t?h(e,l):(e.state=null,t===p?h(e,-3):0):l},r.deflateSetDictionary=function(e,t){var r,n,s,i,c,d,u,p,h=t.length;if(!e||!e.state)return l;if(2===(i=(r=e.state).wrap)||1===i&&42!==r.status||r.lookahead)return l;for(1===i&&(e.adler=o(e.adler,t,h,0)),r.wrap=0,h>=r.w_size&&(0===i&&(w(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new a.Buf8(r.w_size),a.arraySet(p,t,h-r.w_size,r.w_size,0),t=p,h=r.w_size),c=e.avail_in,d=e.next_in,u=e.input,e.avail_in=h,e.next_in=0,e.input=t,b(r);r.lookahead>=3;){for(n=r.strstart,s=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--s;);r.strstart=n,r.lookahead=2,b(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=d,e.input=u,e.avail_in=c,r.wrap=i,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){t.exports=function(e,t){var r,n,a,s,o,i,c,l,d,u,p,h,f,w,A,m,y,g,E,b,v,B,x,H,T;r=e.state,n=e.next_in,H=e.input,a=n+(e.avail_in-5),s=e.next_out,T=e.output,o=s-(t-e.avail_out),i=s+(e.avail_out-257),c=r.dmax,l=r.wsize,d=r.whave,u=r.wnext,p=r.window,h=r.hold,f=r.bits,w=r.lencode,A=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{f<15&&(h+=H[n++]<<f,f+=8,h+=H[n++]<<f,f+=8),g=w[h&m];t:for(;;){if(h>>>=E=g>>>24,f-=E,0==(E=g>>>16&255))T[s++]=65535&g;else{if(!(16&E)){if(!(64&E)){g=w[(65535&g)+(h&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}b=65535&g,(E&=15)&&(f<E&&(h+=H[n++]<<f,f+=8),b+=h&(1<<E)-1,h>>>=E,f-=E),f<15&&(h+=H[n++]<<f,f+=8,h+=H[n++]<<f,f+=8),g=A[h&y];r:for(;;){if(h>>>=E=g>>>24,f-=E,!(16&(E=g>>>16&255))){if(!(64&E)){g=A[(65535&g)+(h&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(v=65535&g,f<(E&=15)&&(h+=H[n++]<<f,(f+=8)<E&&(h+=H[n++]<<f,f+=8)),c<(v+=h&(1<<E)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=E,f-=E,(E=s-o)<v){if(d<(E=v-E)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(x=p,(B=0)===u){if(B+=l-E,E<b){for(b-=E;T[s++]=p[B++],--E;);B=s-v,x=T}}else if(u<E){if(B+=l+u-E,(E-=u)<b){for(b-=E;T[s++]=p[B++],--E;);if(B=0,u<b){for(b-=E=u;T[s++]=p[B++],--E;);B=s-v,x=T}}}else if(B+=u-E,E<b){for(b-=E;T[s++]=p[B++],--E;);B=s-v,x=T}for(;2<b;)T[s++]=x[B++],T[s++]=x[B++],T[s++]=x[B++],b-=3;b&&(T[s++]=x[B++],1<b&&(T[s++]=x[B++]))}else{for(B=s-v;T[s++]=T[B++],T[s++]=T[B++],T[s++]=T[B++],2<(b-=3););b&&(T[s++]=T[B++],1<b&&(T[s++]=T[B++]))}break}}break}}while(n<a&&s<i);n-=b=f>>3,h&=(1<<(f-=b<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=s<i?i-s+257:257-(s-i),r.hold=h,r.bits=f}},{}],49:[function(e,t,r){var n=e("../utils/common"),a=e("./adler32"),s=e("./crc32"),o=e("./inffast"),i=e("./inftrees"),c=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):c}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,p(e))):c}function f(e,t){var r,n;return e?(n=new d,(e.state=n).window=null,0!==(r=h(e,t))&&(e.state=null),r):c}var w,A,m=!0;function y(e){if(m){var t;for(w=new n.Buf32(512),A=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(i(1,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;i(2,e.lens,0,32,A,0,e.work,{bits:5}),m=!1}e.lencode=w,e.lenbits=9,e.distcode=A,e.distbits=5}function g(e,t,r,a){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),a>=o.wsize?(n.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a<(s=o.wsize-o.wnext)&&(s=a),n.arraySet(o.window,t,r-a,s,o.wnext),(a-=s)?(n.arraySet(o.window,t,r-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}r.inflateReset=p,r.inflateReset2=h,r.inflateResetKeep=u,r.inflateInit=function(e){return f(e,15)},r.inflateInit2=f,r.inflate=function(e,t){var r,d,u,p,h,f,w,A,m,E,b,v,B,x,H,T,R,k,M,S,_,C,P,L,I=0,D=new n.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(r=e.state).mode&&(r.mode=13),h=e.next_out,u=e.output,w=e.avail_out,p=e.next_in,d=e.input,f=e.avail_in,A=r.hold,m=r.bits,E=f,b=w,C=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;m<16;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(2&r.wrap&&35615===A){D[r.check=0]=255&A,D[1]=A>>>8&255,r.check=s(r.check,D,2,0),m=A=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&A)<<8)+(A>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&A)){e.msg="unknown compression method",r.mode=30;break}if(m-=4,_=8+(15&(A>>>=4)),0===r.wbits)r.wbits=_;else if(_>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<_,e.adler=r.check=1,r.mode=512&A?10:12,m=A=0;break;case 2:for(;m<16;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(r.flags=A,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=A>>8&1),512&r.flags&&(D[0]=255&A,D[1]=A>>>8&255,r.check=s(r.check,D,2,0)),m=A=0,r.mode=3;case 3:for(;m<32;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.head&&(r.head.time=A),512&r.flags&&(D[0]=255&A,D[1]=A>>>8&255,D[2]=A>>>16&255,D[3]=A>>>24&255,r.check=s(r.check,D,4,0)),m=A=0,r.mode=4;case 4:for(;m<16;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.head&&(r.head.xflags=255&A,r.head.os=A>>8),512&r.flags&&(D[0]=255&A,D[1]=A>>>8&255,r.check=s(r.check,D,2,0)),m=A=0,r.mode=5;case 5:if(1024&r.flags){for(;m<16;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.length=A,r.head&&(r.head.extra_len=A),512&r.flags&&(D[0]=255&A,D[1]=A>>>8&255,r.check=s(r.check,D,2,0)),m=A=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(f<(v=r.length)&&(v=f),v&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,d,p,v,_)),512&r.flags&&(r.check=s(r.check,d,v,p)),f-=v,p+=v,r.length-=v),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break e;for(v=0;_=d[p+v++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_)),_&&v<f;);if(512&r.flags&&(r.check=s(r.check,d,v,p)),f-=v,p+=v,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break e;for(v=0;_=d[p+v++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_)),_&&v<f;);if(512&r.flags&&(r.check=s(r.check,d,v,p)),f-=v,p+=v,_)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;m<16;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(A!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}m=A=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;m<32;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}e.adler=r.check=l(A),m=A=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=h,e.avail_out=w,e.next_in=p,e.avail_in=f,r.hold=A,r.bits=m,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){A>>>=7&m,m-=7&m,r.mode=27;break}for(;m<3;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}switch(r.last=1&A,m-=1,3&(A>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6!==t)break;A>>>=2,m-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}A>>>=2,m-=2;break;case 14:for(A>>>=7&m,m-=7&m;m<32;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if((65535&A)!=(A>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&A,m=A=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(v=r.length){if(f<v&&(v=f),w<v&&(v=w),0===v)break e;n.arraySet(u,d,p,v,h),f-=v,p+=v,w-=v,h+=v,r.length-=v;break}r.mode=12;break;case 17:for(;m<14;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(r.nlen=257+(31&A),A>>>=5,m-=5,r.ndist=1+(31&A),A>>>=5,m-=5,r.ncode=4+(15&A),A>>>=4,m-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;m<3;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.lens[O[r.have++]]=7&A,A>>>=3,m-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},C=i(0,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,C){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;T=(I=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,R=65535&I,!((H=I>>>24)<=m);){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(R<16)A>>>=H,m-=H,r.lens[r.have++]=R;else{if(16===R){for(L=H+2;m<L;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(A>>>=H,m-=H,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}_=r.lens[r.have-1],v=3+(3&A),A>>>=2,m-=2}else if(17===R){for(L=H+3;m<L;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}m-=H,_=0,v=3+(7&(A>>>=H)),A>>>=3,m-=3}else{for(L=H+7;m<L;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}m-=H,_=0,v=11+(127&(A>>>=H)),A>>>=7,m-=7}if(r.have+v>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;v--;)r.lens[r.have++]=_}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,P={bits:r.lenbits},C=i(1,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,C){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},C=i(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,C){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=f&&258<=w){e.next_out=h,e.avail_out=w,e.next_in=p,e.avail_in=f,r.hold=A,r.bits=m,o(e,b),h=e.next_out,u=e.output,w=e.avail_out,p=e.next_in,d=e.input,f=e.avail_in,A=r.hold,m=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;T=(I=r.lencode[A&(1<<r.lenbits)-1])>>>16&255,R=65535&I,!((H=I>>>24)<=m);){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(T&&!(240&T)){for(k=H,M=T,S=R;T=(I=r.lencode[S+((A&(1<<k+M)-1)>>k)])>>>16&255,R=65535&I,!(k+(H=I>>>24)<=m);){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}A>>>=k,m-=k,r.back+=k}if(A>>>=H,m-=H,r.back+=H,r.length=R,0===T){r.mode=26;break}if(32&T){r.back=-1,r.mode=12;break}if(64&T){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&T,r.mode=22;case 22:if(r.extra){for(L=r.extra;m<L;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;T=(I=r.distcode[A&(1<<r.distbits)-1])>>>16&255,R=65535&I,!((H=I>>>24)<=m);){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(!(240&T)){for(k=H,M=T,S=R;T=(I=r.distcode[S+((A&(1<<k+M)-1)>>k)])>>>16&255,R=65535&I,!(k+(H=I>>>24)<=m);){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}A>>>=k,m-=k,r.back+=k}if(A>>>=H,m-=H,r.back+=H,64&T){e.msg="invalid distance code",r.mode=30;break}r.offset=R,r.extra=15&T,r.mode=24;case 24:if(r.extra){for(L=r.extra;m<L;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===w)break e;if(v=b-w,r.offset>v){if((v=r.offset-v)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}B=v>r.wnext?(v-=r.wnext,r.wsize-v):r.wnext-v,v>r.length&&(v=r.length),x=r.window}else x=u,B=h-r.offset,v=r.length;for(w<v&&(v=w),w-=v,r.length-=v;u[h++]=x[B++],--v;);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;u[h++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;m<32;){if(0===f)break e;f--,A|=d[p++]<<m,m+=8}if(b-=w,e.total_out+=b,r.total+=b,b&&(e.adler=r.check=r.flags?s(r.check,u,b,h-b):a(r.check,u,b,h-b)),b=w,(r.flags?A:l(A))!==r.check){e.msg="incorrect data check",r.mode=30;break}m=A=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;m<32;){if(0===f)break e;f--,A+=d[p++]<<m,m+=8}if(A!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}m=A=0}r.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return-4;default:return c}return e.next_out=h,e.avail_out=w,e.next_in=p,e.avail_in=f,r.hold=A,r.bits=m,(r.wsize||b!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&g(e,e.output,e.next_out,b-e.avail_out)?(r.mode=31,-4):(E-=e.avail_in,b-=e.avail_out,e.total_in+=E,e.total_out+=b,r.total+=b,r.wrap&&b&&(e.adler=r.check=r.flags?s(r.check,u,b,e.next_out-b):a(r.check,u,b,e.next_out-b)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==E&&0===b||4===t)&&0===C&&(C=-5),C)},r.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?((r.head=t).done=!1,0):c},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&a(1,t,n,0)!==r.check?-3:g(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):c},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){var n=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,l,d,u,p){var h,f,w,A,m,y,g,E,b,v=p.bits,B=0,x=0,H=0,T=0,R=0,k=0,M=0,S=0,_=0,C=0,P=null,L=0,I=new n.Buf16(16),D=new n.Buf16(16),O=null,U=0;for(B=0;B<=15;B++)I[B]=0;for(x=0;x<c;x++)I[t[r+x]]++;for(R=v,T=15;1<=T&&0===I[T];T--);if(T<R&&(R=T),0===T)return l[d++]=20971520,l[d++]=20971520,p.bits=1,0;for(H=1;H<T&&0===I[H];H++);for(R<H&&(R=H),B=S=1;B<=15;B++)if(S<<=1,(S-=I[B])<0)return-1;if(0<S&&(0===e||1!==T))return-1;for(D[1]=0,B=1;B<15;B++)D[B+1]=D[B]+I[B];for(x=0;x<c;x++)0!==t[r+x]&&(u[D[t[r+x]]++]=x);if(y=0===e?(P=O=u,19):1===e?(P=a,L-=257,O=s,U-=257,256):(P=o,O=i,-1),B=H,m=d,M=x=C=0,w=-1,A=(_=1<<(k=R))-1,1===e&&852<_||2===e&&592<_)return 1;for(;;){for(g=B-M,b=u[x]<y?(E=0,u[x]):u[x]>y?(E=O[U+u[x]],P[L+u[x]]):(E=96,0),h=1<<B-M,H=f=1<<k;l[m+(C>>M)+(f-=h)]=g<<24|E<<16|b,0!==f;);for(h=1<<B-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,x++,0==--I[B]){if(B===T)break;B=t[r+u[x]]}if(R<B&&(C&A)!==w){for(0===M&&(M=R),m+=H,S=1<<(k=B-M);k+M<T&&!((S-=I[k+M])<=0);)k++,S<<=1;if(_+=1<<k,1===e&&852<_||2===e&&592<_)return 1;l[w=C&A]=R<<24|k<<16|m-d}}return 0!==C&&(l[m+C]=B-M<<24|64<<16),p.bits=R,0}},{"../utils/common":41}],51:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){var n=e("../utils/common");function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=256,o=286,i=30,c=15,l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);a(h);var f=new Array(60);a(f);var w=new Array(512);a(w);var A=new Array(256);a(A);var m=new Array(29);a(m);var y,g,E,b=new Array(i);function v(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function B(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?w[e]:w[256+(e>>>7)]}function H(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function T(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,H(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function R(e,t,r){T(e,r[2*t],r[2*t+1])}function k(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function M(e,t,r){var n,a,s=new Array(16),o=0;for(n=1;n<=c;n++)s[n]=o=o+r[n-1]<<1;for(a=0;a<=t;a++){var i=e[2*a+1];0!==i&&(e[2*a]=k(s[i]++,i))}}function S(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<i;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _(e){8<e.bi_valid?H(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function C(e,t,r,n){var a=2*t,s=2*r;return e[a]<e[s]||e[a]===e[s]&&n[t]<=n[r]}function P(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&C(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!C(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n}function L(e,t,r){var n,a,o,i,c=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],a=e.pending_buf[e.l_buf+c],c++,0===n?R(e,a,t):(R(e,(o=A[a])+s+1,t),0!==(i=l[o])&&T(e,a-=m[o],i),R(e,o=x(--n),r),0!==(i=d[o])&&T(e,n-=b[o],i)),c<e.last_lit;);R(e,256,t)}function I(e,t){var r,n,a,s=t.dyn_tree,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<l;r++)0!==s[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[a]=0,e.opt_len--,i&&(e.static_len-=o[2*a+1]);for(t.max_code=d,r=e.heap_len>>1;1<=r;r--)P(e,s,r);for(a=l;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*a]=s[2*r]+s[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=a,e.heap[1]=a++,P(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,s,o,i,l=t.dyn_tree,d=t.max_code,u=t.stat_desc.static_tree,p=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,w=t.stat_desc.max_length,A=0;for(s=0;s<=c;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)w<(s=l[2*l[2*(n=e.heap[r])+1]+1]+1)&&(s=w,A++),l[2*n+1]=s,d<n||(e.bl_count[s]++,o=0,f<=n&&(o=h[n-f]),i=l[2*n],e.opt_len+=i*(s+o),p&&(e.static_len+=i*(u[2*n+1]+o)));if(0!==A){do{for(s=w-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[w]--,A-=2}while(0<A);for(s=w;0!==s;s--)for(n=e.bl_count[s];0!==n;)d<(a=e.heap[--r])||(l[2*a+1]!==s&&(e.opt_len+=(s-l[2*a+1])*l[2*a],l[2*a+1]=s),n--)}}(e,t),M(s,d,e.bl_count)}function D(e,t,r){var n,a,s=-1,o=t[1],i=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=o,o=t[2*(n+1)+1],++i<c&&a===o||(i<l?e.bl_tree[2*a]+=i:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):i<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=a,l=(i=0)===o?(c=138,3):a===o?(c=6,3):(c=7,4))}function O(e,t,r){var n,a,s=-1,o=t[1],i=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(a=o,o=t[2*(n+1)+1],!(++i<c&&a===o)){if(i<l)for(;R(e,a,e.bl_tree),0!=--i;);else 0!==a?(a!==s&&(R(e,a,e.bl_tree),i--),R(e,16,e.bl_tree),T(e,i-3,2)):i<=10?(R(e,17,e.bl_tree),T(e,i-3,3)):(R(e,18,e.bl_tree),T(e,i-11,7));s=a,l=(i=0)===o?(c=138,3):a===o?(c=6,3):(c=7,4)}}a(b);var U=!1;function N(e,t,r,a){var s,o,i;T(e,0+(a?1:0),3),o=t,i=r,_(s=e),H(s,i),H(s,~i),n.arraySet(s.pending_buf,s.window,o,i,s.pending),s.pending+=i}r._tr_init=function(e){U||(function(){var e,t,r,n,a,s=new Array(16);for(n=r=0;n<28;n++)for(m[n]=r,e=0;e<1<<l[n];e++)A[r++]=n;for(A[r-1]=n,n=a=0;n<16;n++)for(b[n]=a,e=0;e<1<<d[n];e++)w[a++]=n;for(a>>=7;n<i;n++)for(b[n]=a<<7,e=0;e<1<<d[n]-7;e++)w[256+a++]=n;for(t=0;t<=c;t++)s[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,s[8]++;for(;e<=255;)h[2*e+1]=9,e++,s[9]++;for(;e<=279;)h[2*e+1]=7,e++,s[7]++;for(;e<=287;)h[2*e+1]=8,e++,s[8]++;for(M(h,287,s),e=0;e<i;e++)f[2*e+1]=5,f[2*e]=k(e,5);y=new v(h,l,257,o,c),g=new v(f,d,0,i,c),E=new v(new Array(0),u,0,19,7)}(),U=!0),e.l_desc=new B(e.dyn_ltree,y),e.d_desc=new B(e.dyn_dtree,g),e.bl_desc=new B(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,S(e)},r._tr_stored_block=N,r._tr_flush_block=function(e,t,r,n){var a,o,i=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),i=function(e){var t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=a&&(a=o)):a=o=r+5,r+4<=a&&-1!==t?N(e,t,r,n):4===e.strategy||o===a?(T(e,2+(n?1:0),3),L(e,h,f)):(T(e,4+(n?1:0),3),function(e,t,r,n){var a;for(T(e,t-257,5),T(e,r-1,5),T(e,n-4,4),a=0;a<n;a++)T(e,e.bl_tree[2*p[a]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),L(e,e.dyn_ltree,e.dyn_dtree)),S(e),n&&_(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+s+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){var t;T(e,2,3),R(e,256,h),16===(t=e).bi_valid?(H(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e){if(!e.setImmediate){var t,r,n,a,s=1,o={},i=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){u(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){n.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(u,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var a={callback:e,args:r};return o[s]=a,t(s),s++},l.clearImmediate=d}function d(e){delete o[e]}function u(e){if(i)setTimeout(u,0,e);else{var t=o[e];if(t){i=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(undefined,r)}}(t)}finally{d(e),i=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&u(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})}}),y=c({"(disabled):buffer"(){}}),g=c({"node_modules/js-sha256/src/sha256.js"(e,t){!function(){var e="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA256_NO_WINDOW&&(r=!1);var a=!r&&"object"==typeof self,s=!n.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&"renderer"!=process.type;s?n=global:a&&(n=self);var o=!n.JS_SHA256_NO_COMMON_JS&&"object"==typeof t&&t.exports,i="function"==typeof define&&define.amd,c=!n.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,l="0123456789abcdef".split(""),d=[-2147483648,8388608,32768,128],u=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],f=[];!n.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!c||!n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var A=function(e,t){return function(r){return new v(t,!0).update(r)[e]()}},m=function(e){var t=A("hex",e);s&&(t=g(t,e)),t.create=function(){return new v(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=A(n,e)}return t},g=function(t,r){var a,s=w(),o=y().Buffer,i=r?"sha224":"sha256";a=o.from&&!n.JS_SHA256_NO_BUFFER_FROM?o.from:function(e){return new o(e)};return function(r){if("string"==typeof r)return s.createHash(i).update(r,"utf8").digest("hex");if(null==r)throw new Error(e);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===o?s.createHash(i).update(a(r)).digest("hex"):t(r)}},E=function(e,t){return function(r,n){return new B(r,t,!0).update(n)[e]()}},b=function(e){var t=E("hex",e);t.create=function(t){return new B(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=E(n,e)}return t};function v(e,t){t?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function B(t,r,n){var a,s=typeof t;if("string"===s){var o,i=[],l=t.length,d=0;for(a=0;a<l;++a)(o=t.charCodeAt(a))<128?i[d++]=o:o<2048?(i[d++]=192|o>>>6,i[d++]=128|63&o):o<55296||o>=57344?(i[d++]=224|o>>>12,i[d++]=128|o>>>6&63,i[d++]=128|63&o):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++a)),i[d++]=240|o>>>18,i[d++]=128|o>>>12&63,i[d++]=128|o>>>6&63,i[d++]=128|63&o);t=i}else{if("object"!==s)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new v(r,!0).update(t).array());var u=[],p=[];for(a=0;a<64;++a){var h=t[a]||0;u[a]=92^h,p[a]=54^h}v.call(this,r,n),this.update(p),this.oKeyPad=u,this.inner=!0,this.sharedMemory=n}v.prototype.update=function(t){if(!this.finalized){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(c&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||c&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var a,s,o=0,i=t.length,l=this.blocks;o<i;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),r)for(s=this.start;o<i&&s<64;++o)l[s>>>2]|=t[o]<<u[3&s++];else for(s=this.start;o<i&&s<64;++o)(a=t.charCodeAt(o))<128?l[s>>>2]|=a<<u[3&s++]:a<2048?(l[s>>>2]|=(192|a>>>6)<<u[3&s++],l[s>>>2]|=(128|63&a)<<u[3&s++]):a<55296||a>=57344?(l[s>>>2]|=(224|a>>>12)<<u[3&s++],l[s>>>2]|=(128|a>>>6&63)<<u[3&s++],l[s>>>2]|=(128|63&a)<<u[3&s++]):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),l[s>>>2]|=(240|a>>>18)<<u[3&s++],l[s>>>2]|=(128|a>>>12&63)<<u[3&s++],l[s>>>2]|=(128|a>>>6&63)<<u[3&s++],l[s>>>2]|=(128|63&a)<<u[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=l[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},v.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=d[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},v.prototype.hash=function(){var e,t,r,n,a,s,o,i,c,l=this.h0,d=this.h1,u=this.h2,h=this.h3,f=this.h4,w=this.h5,A=this.h6,m=this.h7,y=this.blocks;for(e=16;e<64;++e)t=((a=y[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,r=((a=y[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,y[e]=y[e-16]+t+y[e-7]+r|0;for(c=d&u,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,m=(a=y[0]-1413257819)-150054599|0,h=a+24177077|0):(s=704751109,m=(a=y[0]-210244248)-1521486534|0,h=a+143694565|0),this.first=!1):(t=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),n=(s=l&d)^l&u^c,m=h+(a=m+(r=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&w^~f&A)+p[e]+y[e])|0,h=a+(t+n)|0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),n=(o=h&l)^h&d^s,A=u+(a=A+(r=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&f^~m&w)+p[e+1]+y[e+1])|0,t=((u=a+(t+n)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(i=u&h)^u&l^o,w=d+(a=w+(r=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&m^~A&f)+p[e+2]+y[e+2])|0,t=((d=a+(t+n)|0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),n=(c=d&u)^d&h^i,f=l+(a=f+(r=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7))+(w&A^~w&m)+p[e+3]+y[e+3])|0,l=a+(t+n)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+l|0,this.h1=this.h1+d|0,this.h2=this.h2+u|0,this.h3=this.h3+h|0,this.h4=this.h4+f|0,this.h5=this.h5+w|0,this.h6=this.h6+A|0,this.h7=this.h7+m|0},v.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,s=this.h5,o=this.h6,i=this.h7,c=l[e>>>28&15]+l[e>>>24&15]+l[e>>>20&15]+l[e>>>16&15]+l[e>>>12&15]+l[e>>>8&15]+l[e>>>4&15]+l[15&e]+l[t>>>28&15]+l[t>>>24&15]+l[t>>>20&15]+l[t>>>16&15]+l[t>>>12&15]+l[t>>>8&15]+l[t>>>4&15]+l[15&t]+l[r>>>28&15]+l[r>>>24&15]+l[r>>>20&15]+l[r>>>16&15]+l[r>>>12&15]+l[r>>>8&15]+l[r>>>4&15]+l[15&r]+l[n>>>28&15]+l[n>>>24&15]+l[n>>>20&15]+l[n>>>16&15]+l[n>>>12&15]+l[n>>>8&15]+l[n>>>4&15]+l[15&n]+l[a>>>28&15]+l[a>>>24&15]+l[a>>>20&15]+l[a>>>16&15]+l[a>>>12&15]+l[a>>>8&15]+l[a>>>4&15]+l[15&a]+l[s>>>28&15]+l[s>>>24&15]+l[s>>>20&15]+l[s>>>16&15]+l[s>>>12&15]+l[s>>>8&15]+l[s>>>4&15]+l[15&s]+l[o>>>28&15]+l[o>>>24&15]+l[o>>>20&15]+l[o>>>16&15]+l[o>>>12&15]+l[o>>>8&15]+l[o>>>4&15]+l[15&o];return this.is224||(c+=l[i>>>28&15]+l[i>>>24&15]+l[i>>>20&15]+l[i>>>16&15]+l[i>>>12&15]+l[i>>>8&15]+l[i>>>4&15]+l[15&i]),c},v.prototype.toString=v.prototype.hex,v.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,s=this.h5,o=this.h6,i=this.h7,c=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o];return this.is224||c.push(i>>>24&255,i>>>16&255,i>>>8&255,255&i),c},v.prototype.array=v.prototype.digest,v.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},B.prototype=new v,B.prototype.finalize=function(){if(v.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();v.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),v.prototype.finalize.call(this)}};var x=m();x.sha256=x,x.sha224=m(!0),x.sha256.hmac=b(),x.sha224.hmac=b(!0),o?t.exports=x:(n.sha256=x.sha256,n.sha224=x.sha224,i&&define(function(){return x}))}()}}),E=new TextEncoder,b=new TextDecoder;function v(...e){const t=e.reduce((e,{length:t})=>e+t,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function B(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:b.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=b.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function x(e){let t=e;return"string"==typeof t&&(t=E.encode(t)),Uint8Array.prototype.toBase64?t.toBase64({alphabet:"base64url",omitPadding:!0}):function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();const t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var H=class extends Error{constructor(e,t){super(e,t),d(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};d(H,"code","ERR_JOSE_GENERIC");var T=class extends H{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),d(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),d(this,"claim"),d(this,"reason"),d(this,"payload"),this.claim=r,this.reason=n,this.payload=t}};d(T,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");var R=class extends H{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),d(this,"code","ERR_JWT_EXPIRED"),d(this,"claim"),d(this,"reason"),d(this,"payload"),this.claim=r,this.reason=n,this.payload=t}};d(R,"code","ERR_JWT_EXPIRED");var k=class extends H{constructor(){super(...arguments),d(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}};d(k,"code","ERR_JOSE_ALG_NOT_ALLOWED");var M=class extends H{constructor(){super(...arguments),d(this,"code","ERR_JOSE_NOT_SUPPORTED")}};d(M,"code","ERR_JOSE_NOT_SUPPORTED");var S=class extends H{constructor(){super(...arguments),d(this,"code","ERR_JWS_INVALID")}};d(S,"code","ERR_JWS_INVALID");var _,C,P=class extends H{constructor(){super(...arguments),d(this,"code","ERR_JWT_INVALID")}};d(P,"code","ERR_JWT_INVALID");var L=class extends(C=H,_=Symbol.asyncIterator,C){constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),d(this,_),d(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}};d(L,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");var I=class extends H{constructor(e="signature verification failed",t){super(e,t),d(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}};function D(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function O(e,t){return e.name===t}function U(e){return parseInt(e.name.slice(4),10)}function N(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if(!O(e.algorithm,"HMAC"))throw D("HMAC");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw D(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!O(e.algorithm,"RSASSA-PKCS1-v1_5"))throw D("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw D(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!O(e.algorithm,"RSA-PSS"))throw D("RSA-PSS");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw D(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!O(e.algorithm,"Ed25519"))throw D("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!O(e.algorithm,"ECDSA"))throw D("ECDSA");const r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw D(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function(e,t){if(t&&!e.usages.includes(t))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}(e,r)}function z(e,t,...r){if((r=r.filter(Boolean)).length>2){const t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}d(I,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function F(e,t,...r){return z(`Key for the ${e} algorithm must be `,t,...r)}function W(e){return"CryptoKey"===e?.[Symbol.toStringTag]}function $(e){return"KeyObject"===e?.[Symbol.toStringTag]}var j=e=>W(e)||$(e),X=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let r;for(const e of t){const t=Object.keys(e);if(r&&0!==r.size)for(const e of t){if(r.has(e))return!1;r.add(e)}else r=new Set(t)}return!0};var K=e=>{if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r},J=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};var V,Y=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new M('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new M('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??!e.d,e.key_ops??r)},q=(e,t,r,n,a)=>{if(void 0!==a.crit&&void 0===n?.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;s=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t;for(const t of n.crit){if(!s.has(t))throw new M(`Extension Header Parameter "${t}" is not recognized`);if(void 0===a[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(s.get(t)&&void 0===n[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(n.crit)};function G(e){return K(e)&&"string"==typeof e.kty}var Z=async(e,t,r,n=!1)=>{V||(V=new WeakMap);let a=V.get(e);if(a?.[r])return a[r];const s=await Y({...t,alg:r});return n&&Object.freeze(e),a?a[r]=s:V.set(e,{[r]:s}),s},Q=async(e,t)=>{if(e instanceof Uint8Array)return e;if(W(e))return e;if($(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,t)=>{V||(V=new WeakMap);let r=V.get(e);if(r?.[t])return r[t];const n="public"===e.type,a=!!n;let s;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}s=e.toCryptoKey(e.asymmetricKeyType,a,n?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw new TypeError("given KeyObject instance cannot be used for this algorithm");s=e.toCryptoKey(e.asymmetricKeyType,a,[n?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let r;switch(t){case"RSA-OAEP":r="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":r="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":r="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":r="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:r},a,n?["encrypt"]:["decrypt"]);s=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:r},a,[n?"verify":"sign"])}if("ec"===e.asymmetricKeyType){const r=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!r)throw new TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===r&&(s=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[n?"verify":"sign"])),"ES384"===t&&"P-384"===r&&(s=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[n?"verify":"sign"])),"ES512"===t&&"P-521"===r&&(s=e.toCryptoKey({name:"ECDSA",namedCurve:r},a,[n?"verify":"sign"])),t.startsWith("ECDH-ES")&&(s=e.toCryptoKey({name:"ECDH",namedCurve:r},a,n?[]:["deriveBits"]))}if(!s)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[t]=s:V.set(e,{[t]:s}),s})(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return Z(e,r,t)}if(G(e))return e.k?B(e.k):Z(e,e,t,!0);throw new Error("unreachable")},ee=e=>e?.[Symbol.toStringTag],te=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw new TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw new TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&!1===t.key_ops?.includes?.(n))throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},re=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?((e,t,r)=>{if(!(t instanceof Uint8Array)){if(G(t)){if(function(e){return"oct"===e.kty&&"string"==typeof e.k}(t)&&te(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!j(t))throw new TypeError(F(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw new TypeError(`${ee(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r):((e,t,r)=>{if(G(t))switch(r){case"decrypt":case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&te(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&te(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!j(t))throw new TypeError(F(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw new TypeError(`${ee(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw new TypeError(`${ee(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${ee(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw new TypeError(`${ee(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${ee(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)},ne=(e,t)=>{const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new M(`alg ${e} is not supported either by JOSE or your javascript runtime`)}},ae=async(e,t,r)=>{if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(((e,...t)=>z("Key must be ",e,...t))(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return N(t,e,r),t};async function se(e,t,r){if(!K(e))throw new S("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new S('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new S("JWS Protected Header incorrect type");if(void 0===e.payload)throw new S("JWS Payload missing");if("string"!=typeof e.signature)throw new S("JWS Signature missing or incorrect type");if(void 0!==e.header&&!K(e.header))throw new S("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const t=B(e.protected);n=JSON.parse(b.decode(t))}catch{throw new S("JWS Protected Header is invalid")}if(!X(n,e.header))throw new S("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...n,...e.header};let s=!0;if(q(S,new Map([["b64",!0]]),r?.crit,n,a).has("b64")&&(s=n.b64,"boolean"!=typeof s))throw new S('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=a;if("string"!=typeof o||!o)throw new S('JWS "alg" (Algorithm) Header Parameter missing or invalid');const i=r&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)})("algorithms",r.algorithms);if(i&&!i.has(o))throw new k('"alg" (Algorithm) Header Parameter value not allowed');if(s){if("string"!=typeof e.payload)throw new S("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new S("JWS Payload must be a string or an Uint8Array instance");let c=!1;"function"==typeof t&&(t=await t(n,e),c=!0),re(o,t,"verify");const l=v(E.encode(e.protected??""),E.encode("."),"string"==typeof e.payload?E.encode(e.payload):e.payload);let d;try{d=B(e.signature)}catch{throw new S("Failed to base64url decode the signature")}const u=await Q(t,o),p=await(async(e,t,r,n)=>{const a=await ae(e,t,"verify");J(e,a);const s=ne(e,a.algorithm);try{return await crypto.subtle.verify(s,a,r,n)}catch{return!1}})(o,u,d,l);if(!p)throw new I;let h;if(s)try{h=B(e.payload)}catch{throw new S("Failed to base64url decode the payload")}else h="string"==typeof e.payload?E.encode(e.payload):e.payload;const f={payload:h};return void 0!==e.protected&&(f.protectedHeader=n),void 0!==e.header&&(f.unprotectedHeader=e.header),c?{...f,key:u}:f}var oe=e=>Math.floor(e.getTime()/1e3),ie=86400,ce=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,le=e=>{const t=ce.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]);let n;switch(t[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(60*r);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(3600*r);break;case"day":case"days":case"d":n=Math.round(r*ie);break;case"week":case"weeks":case"w":n=Math.round(604800*r);break;default:n=Math.round(31557600*r)}return"-"===t[1]||"ago"===t[4]?-n:n};function de(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}var ue,pe=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;function he(e,t,r={}){let n;try{n=JSON.parse(b.decode(t))}catch{}if(!K(n))throw new P("JWT Claims Set must be a top-level JSON object");const{typ:a}=r;if(a&&("string"!=typeof e.typ||pe(e.typ)!==pe(a)))throw new T('unexpected "typ" JWT header value',n,"typ","check_failed");const{requiredClaims:s=[],issuer:o,subject:i,audience:c,maxTokenAge:l}=r,d=[...s];void 0!==l&&d.push("iat"),void 0!==c&&d.push("aud"),void 0!==i&&d.push("sub"),void 0!==o&&d.push("iss");for(const e of new Set(d.reverse()))if(!(e in n))throw new T(`missing required "${e}" claim`,n,e,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(n.iss))throw new T('unexpected "iss" claim value',n,"iss","check_failed");if(i&&n.sub!==i)throw new T('unexpected "sub" claim value',n,"sub","check_failed");if(c&&(u=n.aud,p="string"==typeof c?[c]:c,!("string"==typeof u?p.includes(u):Array.isArray(u)&&p.some(Set.prototype.has.bind(new Set(u))))))throw new T('unexpected "aud" claim value',n,"aud","check_failed");var u,p;let h;switch(typeof r.clockTolerance){case"string":h=le(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,w=oe(f||new Date);if((void 0!==n.iat||l)&&"number"!=typeof n.iat)throw new T('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new T('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>w+h)throw new T('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new T('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=w-h)throw new R('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){const e=w-n.iat;if(e-h>("number"==typeof l?l:le(l)))throw new R('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-h)throw new T('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}var fe=class{constructor(e){if(h(this,ue),!K(e))throw new TypeError("JWT Claims Set MUST be an object");f(this,ue,structuredClone(e))}data(){return E.encode(JSON.stringify(p(this,ue)))}get iss(){return p(this,ue).iss}set iss(e){p(this,ue).iss=e}get sub(){return p(this,ue).sub}set sub(e){p(this,ue).sub=e}get aud(){return p(this,ue).aud}set aud(e){p(this,ue).aud=e}set jti(e){p(this,ue).jti=e}set nbf(e){"number"==typeof e?p(this,ue).nbf=de("setNotBefore",e):e instanceof Date?p(this,ue).nbf=de("setNotBefore",oe(e)):p(this,ue).nbf=oe(new Date)+le(e)}set exp(e){"number"==typeof e?p(this,ue).exp=de("setExpirationTime",e):e instanceof Date?p(this,ue).exp=de("setExpirationTime",oe(e)):p(this,ue).exp=oe(new Date)+le(e)}set iat(e){void 0===e?p(this,ue).iat=oe(new Date):e instanceof Date?p(this,ue).iat=de("setIssuedAt",oe(e)):p(this,ue).iat=de("setIssuedAt","string"==typeof e?oe(new Date)+le(e):e)}};async function we(e,t,r){const n=await async function(e,t,r){if(e instanceof Uint8Array&&(e=b.decode(e)),"string"!=typeof e)throw new S("Compact JWS must be a string or Uint8Array");const{0:n,1:a,2:s,length:o}=e.split(".");if(3!==o)throw new S("Invalid Compact JWS");const i=await se({payload:a,protected:n,signature:s},t,r),c={payload:i.payload,protectedHeader:i.protectedHeader};return"function"==typeof t?{...c,key:i.key}:c}(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new P("JWTs MUST NOT use unencoded payload");const a={payload:he(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...a,key:n.key}:a}ue=new WeakMap;var Ae,me,ye,ge,Ee=class{constructor(e){if(h(this,Ae),h(this,me),h(this,ye),!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");f(this,Ae,e)}setProtectedHeader(e){if(p(this,me))throw new TypeError("setProtectedHeader can only be called once");return f(this,me,e),this}setUnprotectedHeader(e){if(p(this,ye))throw new TypeError("setUnprotectedHeader can only be called once");return f(this,ye,e),this}async sign(e,t){if(!p(this,me)&&!p(this,ye))throw new S("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!X(p(this,me),p(this,ye)))throw new S("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...p(this,me),...p(this,ye)};let n=!0;if(q(S,new Map([["b64",!0]]),t?.crit,p(this,me),r).has("b64")&&(n=p(this,me).b64,"boolean"!=typeof n))throw new S('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=r;if("string"!=typeof a||!a)throw new S('JWS "alg" (Algorithm) Header Parameter missing or invalid');re(a,e,"sign");let s,o=p(this,Ae);n&&(o=E.encode(x(o))),s=p(this,me)?E.encode(x(JSON.stringify(p(this,me)))):E.encode("");const i=v(s,E.encode("."),o),c=await Q(e,a),l=await(async(e,t,r)=>{const n=await ae(e,t,"sign");J(e,n);const a=await crypto.subtle.sign(ne(e,n.algorithm),n,r);return new Uint8Array(a)})(a,c,i),d={signature:x(l),payload:""};return n&&(d.payload=b.decode(o)),p(this,ye)&&(d.header=p(this,ye)),p(this,me)&&(d.protected=b.decode(s)),d}};Ae=new WeakMap,me=new WeakMap,ye=new WeakMap;var be,ve,Be=class{constructor(e){h(this,ge),f(this,ge,new Ee(e))}setProtectedHeader(e){return p(this,ge).setProtectedHeader(e),this}async sign(e,t){const r=await p(this,ge).sign(e,t);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}};ge=new WeakMap;var xe=class{constructor(e={}){h(this,be),h(this,ve),f(this,ve,new fe(e))}setIssuer(e){return p(this,ve).iss=e,this}setSubject(e){return p(this,ve).sub=e,this}setAudience(e){return p(this,ve).aud=e,this}setJti(e){return p(this,ve).jti=e,this}setNotBefore(e){return p(this,ve).nbf=e,this}setExpirationTime(e){return p(this,ve).exp=e,this}setIssuedAt(e){return p(this,ve).iat=e,this}setProtectedHeader(e){return f(this,be,e),this}async sign(e,t){const r=new Be(p(this,ve).data());if(r.setProtectedHeader(p(this,be)),Array.isArray(p(this,be)?.crit)&&p(this,be).crit.includes("b64")&&!1===p(this,be).b64)throw new P("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}};be=new WeakMap,ve=new WeakMap;var He=l(A(),1);async function Te(e,t){if("POST"!==e.method)return await bt(!1,405,"Method not allowed.");if(await e.text()!==await t.kv.get("pwd"))return await bt(!1,401,"Wrong password.");let r=await t.kv.get("secretKey");r||(r=function(){const e=(0,He.randomBytes)(32);return Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}(),await t.kv.put("secretKey",r));const n=(new TextEncoder).encode(r),a=await new xe({userID:globalThis.userID}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("24h").sign(n);return await bt(!0,200,"Successfully generated Auth token",null,{"Set-Cookie":`jwtToken=${a}; HttpOnly; Secure; Max-Age=604800; Path=/; SameSite=Strict`,"Content-Type":"text/plain"})}async function Re(e,t){try{const r=await t.kv.get("secretKey"),n=(new TextEncoder).encode(r),a=e.headers.get("Cookie")?.match(/(^|;\s*)jwtToken=([^;]*)/),s=a?a[2]:null;if(!s)return console.log("Unauthorized: Token not available!"),!1;const{payload:o}=await we(s,n);return console.log(`Successfully authenticated, User ID: ${o.userID}`),!0}catch(e){return console.log(e),!1}}function ke(e){if(!e)return!1;return/^(?!-)(?:[A-Za-z0-9-]{1,63}.)+[A-Za-z]{2,}$/.test(e)}async function Me(e){const t=`${globalThis.dohURL}?name=${encodeURIComponent(e)}&type=A`,r=`${globalThis.dohURL}?name=${encodeURIComponent(e)}&type=AAAA`;try{const[e,n]=await Promise.all([fetch(t,{headers:{accept:"application/dns-json"}}),fetch(r,{headers:{accept:"application/dns-json"}})]),a=await e.json(),s=await n.json(),o=a.Answer?a.Answer.map(e=>e.data):[];return{ipv4:o,ipv6:s.Answer?s.Answer.map(e=>e.data):[]}}catch(e){throw new Error(`Error resolving DNS: ${e}`)}}async function Se(e){const{settings:t,hostName:r}=globalThis,n=await Me(r),a=t.VLTRenableIPv6?n.ipv6.map(e=>`[${e}]`):[],s=[r,"www.speedtest.net",...n.ipv4,...a,...t.cleanIPs];return e?s:[...s,...t.customCdnAddrs]}function _e(e,t){const r=t?1:0,n=e[r].account.config;return{warpIPv6:`${n.interface.addresses.v6}/128`,reserved:n.client_id,publicKey:n.peers[0].public_key,privateKey:e[r].privateKey}}function Ce(e,t,r,n,a,s){let o;const i=s?` ${s}`:"";return o=n.includes(r)?"Clean IP":ke(r)?"Domain":De(r)?"IPv4":Oe(r)?"IPv6":"",` ${e} - ${a}${i} - ${o} : ${t}`}function Pe(e){let t="";for(let r=0;r<e.length;r++)t+=Math.random()<.5?e[r].toUpperCase():e[r];return t}function Le(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(62*Math.random()));return t}function Ie(e){const t=atob(e);return Array.from(t).map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("").match(/.{2}/g).map(e=>parseInt(e,16))}function De(e){return/^(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\/([0-9]|[1-2][0-9]|3[0-2]))?$/.test(e)}function Oe(e){return/^\[(?:(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?:[a-fA-F0-9]{1,4}:){1,7}:|::(?:[a-fA-F0-9]{1,4}:){0,7}|(?:[a-fA-F0-9]{1,4}:){1,6}:[a-fA-F0-9]{1,4}|(?:[a-fA-F0-9]{1,4}:){1,5}(?::[a-fA-F0-9]{1,4}){1,2}|(?:[a-fA-F0-9]{1,4}:){1,4}(?::[a-fA-F0-9]{1,4}){1,3}|(?:[a-fA-F0-9]{1,4}:){1,3}(?::[a-fA-F0-9]{1,4}){1,4}|(?:[a-fA-F0-9]{1,4}:){1,2}(?::[a-fA-F0-9]{1,4}){1,5}|[a-fA-F0-9]{1,4}:(?::[a-fA-F0-9]{1,4}){1,6})\](?:\/(1[0-1][0-9]|12[0-8]|[0-9]?[0-9]))?$/.test(e)}function Ue(e){try{const t=new URL(e).hostname;return{host:t,isHostDomain:ke(t)}}catch{return{host:null,isHostDomain:!1}}}function Ne(e){return btoa(String.fromCharCode(...(new TextEncoder).encode(e)))}var ze=l(A(),1);async function Fe(e){let t=[];const r=[We(),We()],n={install_id:"",fcm_token:"",tos:(new Date).toISOString(),type:"Android",model:"PC",locale:"en_US",warp_enabled:!0},a=async e=>{try{const t=await fetch("https://api.cloudflareclient.com/v0a4005/reg",{method:"POST",headers:{"User-Agent":"insomnia/8.6.1","Content-Type":"application/json"},body:JSON.stringify({...n,key:e.publicKey})});return await t.json()}catch(e){throw new Error("Failed to get warp configs.",e)}};for(const e of r){const r=await a(e);t.push({privateKey:e.privateKey,account:r})}const s=JSON.stringify(t);return await e.kv.put("warpConfigs",s),s}var We=()=>{const e=e=>btoa(String.fromCharCode.apply(null,e));let t=(0,ze.randomBytes)(32);t[0]&=248,t[31]&=127,t[31]|=64;return{publicKey:e(ze.scalarMult.base(t)),privateKey:e(t)}};async function $e(e,t){let r,n;try{r=await t.kv.get("proxySettings",{type:"json"}),n=await t.kv.get("warpConfigs",{type:"json"})}catch(e){throw console.log(e),new Error(`An error occurred while getting KV - ${e}`)}if(!r){r=await je(e,t);n=await Fe(t)}return globalThis.panelVersion!==r.panelVersion&&(r=await je(e,t)),{proxySettings:r,warpConfigs:n}}async function je(e,t){let r="POST"===e.method?await e.json():null;const n=r?.resetSettings;let a;if(!n)try{a=await t.kv.get("proxySettings",{type:"json"})}catch(e){throw console.log(e),new Error(`An error occurred while getting current KV settings - ${e}`)}const s=(e,t,s)=>{if(n)return t;if(!r)return a?.[e]??t;const o=r[e];return"function"==typeof s?s(o):o},o=s("remoteDNS","https://8.8.8.8/dns-query"),i={remoteDNS:o,dohHost:await(async()=>{const{host:e,isHostDomain:t}=Ue(o),r={host:e,isDomain:t};if(t){const{ipv4:t,ipv6:n}=await Me(e);r.ipv4=t,r.ipv6=n}return r})(),localDNS:s("localDNS","8.8.8.8"),antiSanctionDNS:s("antiSanctionDNS","78.157.42.100"),VLTRFakeDNS:s("VLTRFakeDNS",!1),proxyIPs:s("proxyIPs",[]),outProxy:s("outProxy",""),outProxyParams:s("outProxy",{},e=>function(e){let t={};if(!e)return{};const r=new URL(e),n=r.protocol.slice(0,-1);if("vless"===n){const e=new URLSearchParams(r.search);t={protocol:n,uuid:r.username,server:r.hostname,port:r.port},e.forEach((e,r)=>{t[r]=e})}else t={protocol:n,user:r.username,pass:r.password,server:r.host,port:r.port};return t}(e)),cleanIPs:s("cleanIPs",[]),VLTRenableIPv6:s("VLTRenableIPv6",!0),customCdnAddrs:s("customCdnAddrs",[]),customCdnHost:s("customCdnHost",""),customCdnSni:s("customCdnSni",""),bestVLTRInterval:s("bestVLTRInterval",30),VLConfigs:s("VLConfigs",!0),TRConfigs:s("TRConfigs",!0),ports:s("ports",[443]),fragmentLengthMin:s("fragmentLengthMin",100),fragmentLengthMax:s("fragmentLengthMax",200),fragmentIntervalMin:s("fragmentIntervalMin",1),fragmentIntervalMax:s("fragmentIntervalMax",1),fragmentPackets:s("fragmentPackets","tlshello"),bypassLAN:s("bypassLAN",!1),bypassIran:s("bypassIran",!1),bypassChina:s("bypassChina",!1),bypassRussia:s("bypassRussia",!1),bypassOpenAi:s("bypassOpenAi",!1),bypassMicrosoft:s("bypassMicrosoft",!1),bypassOracle:s("bypassOracle",!1),bypassDocker:s("bypassDocker",!1),bypassAdobe:s("bypassAdobe",!1),bypassEpicGames:s("bypassEpicGames",!1),bypassIntel:s("bypassIntel",!1),bypassAmd:s("bypassAmd",!1),bypassNvidia:s("bypassNvidia",!1),bypassAsus:s("bypassAsus",!1),bypassHp:s("bypassHp",!1),bypassLenovo:s("bypassLenovo",!1),blockAds:s("blockAds",!1),blockPorn:s("blockPorn",!1),blockUDP443:s("blockUDP443",!1),customBypassRules:s("customBypassRules",[]),customBlockRules:s("customBlockRules",[]),customBypassSanctionRules:s("customBypassSanctionRules",[]),warpEndpoints:s("warpEndpoints",["engage.cloudflareclient.com:2408"]),warpFakeDNS:s("warpFakeDNS",!1),warpEnableIPv6:s("warpEnableIPv6",!0),bestWarpInterval:s("bestWarpInterval",30),xrayUdpNoises:s("xrayUdpNoises",[{type:"rand",packet:"50-100",delay:"1-1",count:5}]),hiddifyNoiseMode:s("hiddifyNoiseMode","m4"),knockerNoiseMode:s("knockerNoiseMode","quic"),noiseCountMin:s("noiseCountMin",10),noiseCountMax:s("noiseCountMax",15),noiseSizeMin:s("noiseSizeMin",5),noiseSizeMax:s("noiseSizeMax",10),noiseDelayMin:s("noiseDelayMin",1),noiseDelayMax:s("noiseDelayMax",1),amneziaNoiseCount:s("amneziaNoiseCount",5),amneziaNoiseSizeMin:s("amneziaNoiseSizeMin",50),amneziaNoiseSizeMax:s("amneziaNoiseSizeMax",100),panelVersion:globalThis.panelVersion};try{await t.kv.put("proxySettings",JSON.stringify(i))}catch(e){throw console.log(e),new Error(`An error occurred while updating KV - ${e}`)}return i}function Xe(e){const t=globalThis.settings,r=Ge();t.customBlockRules.forEach(e=>{const t=ke(e);r.push({rule:!0,type:"REJECT",domain:t?e:null,ip:t?null:e})});[...t.customBypassRules,...t.customBypassSanctionRules].forEach(e=>{const t=ke(e);r.push({rule:!0,type:"DIRECT",domain:t?e:null,ip:t?null:e})});const n={};const a=new Map;r.filter(({rule:e})=>e).forEach(e=>{const{type:t,domain:r,ip:s,ruleProvider:o}=e,{geosite:i,geoip:c}=o||{};a.has(t)||a.set(t,{domain:[],ip:[],geosite:[],geoip:[]}),r&&a.get(t).domain.push(r),s&&a.get(t).ip.push(s),i&&a.get(t).geosite.push(i),c&&a.get(t).geoip.push(c),(i||c)&&function(e){const{geosite:t,geoip:r,geositeURL:a,geoipURL:s,format:o}=e,i="text"===o?"txt":o,c=(e,t,r)=>{e&&(n[e]={type:"http",format:o,behavior:t,url:r,path:`./ruleset/${e}.${i}`,interval:86400})};c(t,"domain",a),c(r,"ipcidr",s)}(o)});let s=[];function o(e,t,r,n,a){r&&r.forEach(e=>s.push(`DOMAIN-SUFFIX,${e},${a}`)),e&&e.forEach(e=>s.push(`RULE-SET,${e},${a}`)),n&&n.forEach(e=>{const t=De(e)?"IP-CIDR":"IP-CIDR6",r=Oe(e)?e.replace(/\[|\]/g,""):e,n=e.includes("/")?"":De(e)?"/32":"/128";s.push(`${t},${r}${n},${a},no-resolve`)}),t&&t.forEach(e=>s.push(`RULE-SET,${e},${a}`))}t.bypassLAN&&s.push("GEOIP,lan,DIRECT,no-resolve"),e&&t.blockUDP443&&s.push("AND,((NETWORK,udp),(DST-PORT,443)),REJECT"),e||s.push("NETWORK,udp,REJECT");for(const[e,t]of a){const{domain:r,ip:n,geosite:a,geoip:s}=t;r.length&&o(null,null,r,null,e),a.length&&o(a,null,null,null,e),n.length&&o(null,null,null,n,e),s.length&&o(null,s,null,null,e)}return s.push("MATCH, Selector"),{rules:s,ruleProviders:n}}function Ke(e,t,r,n,a){const s=globalThis.settings,o=r.includes("[")?r.match(/\[(.*?)\]/)[1]:r.split(":")[0],i=r.includes("[")?+r.match(/[^:]*$/)[0]:+r.split(":")[1],c=s.warpEnableIPv6?"dual":"ipv4",{warpIPv6:l,reserved:d,publicKey:u,privateKey:p}=_e(e,n);let h={name:t,type:"wireguard",ip:"172.16.0.2/32",ipv6:l,"ip-version":c,"private-key":p,server:n?"162.159.192.1":o,port:n?2408:i,"public-key":u,"allowed-ips":["0.0.0.0/0","::/0"],reserved:d,udp:!0,mtu:1280};return n&&(h["dialer-proxy"]=n),a&&(h["amnezia-wg-option"]={jc:String(s.amneziaNoiseCount),jmin:String(s.amneziaNoiseSizeMin),jmax:String(s.amneziaNoiseSizeMax)}),h}async function Je(e,t,r,n,a,s){const o=globalThis.settings,i=structuredClone(qe);i.dns=await async function(e,t){const r=globalThis.settings,n="localhost"===r.localDNS?"system":`${r.localDNS}#DIRECT`,a={enable:!0,listen:"0.0.0.0:1053",ipv6:r.VLTRenableIPv6&&!t||r.warpEnableIPv6&&t,"respect-rules":!0,"use-system-hosts":!1,nameserver:[`${t?"1.1.1.1":r.remoteDNS}# Selector`],"proxy-server-nameserver":[n],"nameserver-policy":{"raw.githubusercontent.com":n,"time.apple.com":n}};if(r.dohHost.isDomain&&!t){const{ipv4:e,ipv6:t,host:n}=r.dohHost;a.hosts={[n]:r.VLTRenableIPv6?[...e,...t]:e}}const s=Ue(r.antiSanctionDNS);if(s.isHostDomain&&(a["nameserver-policy"][s.host]=n),e&&!t){const e=r.outProxyParams.server;ke(e)&&(a["nameserver-policy"][e]=`${r.remoteDNS}#proxy-1`)}const o=Ge();return r.customBlockRules.filter(ke).forEach(e=>{a.hosts||(a.hosts={}),a.hosts[`+.${e}`]="127.0.0.1"}),r.customBypassRules.filter(ke).forEach(e=>{a["nameserver-policy"][`+.${e}`]=`${r.localDNS}#DIRECT`}),r.customBypassSanctionRules.filter(ke).forEach(e=>{a["nameserver-policy"][`+.${e}`]=`${r.antiSanctionDNS}#DIRECT`}),o.filter(({rule:e,ruleProvider:t})=>e&&t?.geosite).forEach(({type:e,dns:t,ruleProvider:r})=>{"DIRECT"===e?a["nameserver-policy"][`rule-set:${r.geosite}`]=t:(a.hosts||(a.hosts={}),a.hosts[`rule-set:${r.geosite}`]="127.0.0.1")}),(r.VLTRFakeDNS&&!t||r.warpFakeDNS&&t)&&Object.assign(a,{"enhanced-mode":"fake-ip","fake-ip-range":"198.18.0.1/16","fake-ip-filter":["*","+.lan","+.local"]}),a}(n,a);const{rules:c,ruleProviders:l}=Xe(a);i.rules=c,i["rule-providers"]=l;const d={name:" Selector",type:"select",proxies:e},u={name:a?` Warp ${s?"Pro ":""}- Best Ping `:" Best Ping ",type:"url-test",url:"https://www.gstatic.com/generate_204",interval:a?o.bestWarpInterval:o.bestVLTRInterval,tolerance:50,proxies:t};if(i["proxy-groups"].push(d,u),a){const e=structuredClone(u);e.name=` WoW ${s?"Pro ":""}- Best Ping `,e.proxies=r,i["proxy-groups"].push(e)}return i}async function Ve(e,t,r){const{warpConfigs:n}=await $e(e,t),a=globalThis.settings,s=[],o=[],i={proxies:[],chains:[]};a.warpEndpoints.forEach((e,t)=>{const a=` ${t+1} - Warp ${r?"Pro ":""}`;s.push(a);const c=` ${t+1} - WoW ${r?"Pro ":""}`;o.push(c);const l=Ke(n,a,e,"",r);i.proxies.push(l);const d=Ke(n,c,e,a);i.chains.push(d)});const c=[` Warp ${r?"Pro ":""}- Best Ping `,` WoW ${r?"Pro ":""}- Best Ping `,...s,...o],l=await Je(c,s,o,!0,!0,r);return l.proxies.push(...i.proxies,...i.chains),new Response(JSON.stringify(l,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}async function Ye(e){const{settings:t,hostName:r}=globalThis;let n;if(t.outProxy)try{n=function(e){if(["socks","http"].includes(e.protocol)){const{protocol:t,server:r,port:n,user:a,pass:s}=e;return{name:"",type:"socks"===t?"socks5":t,server:r,port:+n,"dialer-proxy":"",username:a,password:s}}const{server:t,port:r,uuid:n,flow:a,security:s,type:o,sni:i,fp:c,alpn:l,pbk:d,sid:u,headerType:p,host:h,path:f,serviceName:w}=e,A={name:" Chain Best Ping ",type:"vless",server:t,port:+r,udp:!0,uuid:n,flow:a,network:o,"dialer-proxy":" Best Ping "};if("tls"===s){const e=l?l?.split(","):[];Object.assign(A,{tls:!0,servername:i,alpn:e,"client-fingerprint":c})}if("reality"===s&&Object.assign(A,{tls:!0,servername:i,"client-fingerprint":c,"reality-opts":{"public-key":d,"short-id":u}}),"http"===p){const e=f?.split(",");A["http-opts"]={method:"GET",path:e,headers:{Connection:["keep-alive"],"Content-Type":["application/octet-stream"]}}}if("ws"===o){const e=f?.split("?ed=")[0],t=+f?.split("?ed=")[1];A["ws-opts"]={path:e,headers:{Host:h},"max-early-data":t,"early-data-header-name":"Sec-WebSocket-Protocol"}}return"grpc"===o&&(A["grpc-opts"]={"grpc-service-name":w}),A}(t.outProxyParams)}catch(t){console.log("An error occured while parsing chain proxy: ",t),n=void 0;const r=await e.kv.get("proxySettings",{type:"json"});await e.kv.put("proxySettings",JSON.stringify({...r,outProxy:"",outProxyParams:{}}))}let a=1;const s=[];t.VLConfigs&&s.push("VLESS"),t.TRConfigs&&s.push("Trojan");const o=await Se(!1),i=[],c={proxies:[],chains:[]};s.forEach(e=>{let s=1;t.ports.forEach(l=>{o.forEach(o=>{let d,u;const p=t.customCdnAddrs.includes(o),h=p?"C":"",f=p?t.customCdnSni:Pe(r),w=p?t.customCdnHost:r,A=Ce(s,l,o,t.cleanIPs,e,h).replace(" : "," - ");if("VLESS"===e&&(d=function(e,t,r,n,a,s,o){const i=globalThis.settings,c=!!globalThis.defaultHttpsPorts.includes(r),l=Oe(t)?t.replace(/\[|\]/g,""):t,d=`/${Le(16)}${s.length?`/${btoa(s.join(","))}`:""}`,u=i.VLTRenableIPv6?"dual":"ipv4",p={name:e,type:"vless",server:l,port:r,uuid:globalThis.userID,"packet-encoding":"packetaddr","ip-version":u,tls:c,network:"ws",tfo:!0,mptcp:!0,"ws-opts":{path:d,headers:{Host:n},"max-early-data":2560,"early-data-header-name":"Sec-WebSocket-Protocol"}};return c&&Object.assign(p,{servername:a,alpn:["http/1.1"],"client-fingerprint":"random","skip-cert-verify":o}),p}(n?`proxy-${a}`:A,o,l,w,f,t.proxyIPs,p),c.proxies.push(d),i.push(A)),"Trojan"===e&&globalThis.defaultHttpsPorts.includes(l)&&(u=function(e,t,r,n,a,s,o){const i=globalThis.settings,c=Oe(t)?t.replace(/\[|\]/g,""):t,l=`/tr${Le(16)}${s.length?`/${btoa(s.join(","))}`:""}`,d=i.VLTRenableIPv6?"dual":"ipv4";return{name:e,type:"trojan",server:c,port:r,password:globalThis.TRPassword,"ip-version":d,tls:!0,network:"ws",tfo:!0,mptcp:!0,"ws-opts":{path:l,headers:{Host:n},"max-early-data":2560,"early-data-header-name":"Sec-WebSocket-Protocol"},sni:a,alpn:["http/1.1"],"client-fingerprint":"random","skip-cert-verify":o}}(n?`proxy-${a}`:A,o,l,w,f,t.proxyIPs,p),c.proxies.push(u),i.push(A)),n){let e=structuredClone(n);e.name=A,e["dialer-proxy"]=`proxy-${a}`,c.chains.push(e)}a++,s++})})});const l=[" Best Ping ",...i],d=await Je(l,i,null,n,!1,!1);return d.proxies.push(...c.chains,...c.proxies),new Response(JSON.stringify(d,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}var qe={"mixed-port":7890,ipv6:!0,"allow-lan":!0,mode:"rule","log-level":"warning","disable-keep-alive":!1,"keep-alive-idle":10,"keep-alive-interval":15,"unified-delay":!1,"geo-auto-update":!0,"geo-update-interval":168,"external-controller":"127.0.0.1:9090","external-ui-url":"https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip","external-ui":"ui","external-controller-cors":{"allow-origins":["*"],"allow-private-network":!0},profile:{"store-selected":!0,"store-fake-ip":!0},dns:{},tun:{enable:!0,stack:"mixed","auto-route":!0,"strict-route":!0,"auto-detect-interface":!0,"dns-hijack":["any:53","tcp://any:53"],mtu:9e3},sniffer:{enable:!0,"force-dns-mapping":!0,"parse-pure-ip":!0,"override-destination":!1,sniff:{HTTP:{ports:[80,8080,8880,2052,2082,2086,2095]},TLS:{ports:[443,8443,2053,2083,2087,2096]}}},proxies:[],"proxy-groups":[],"rule-providers":{},rules:[],ntp:{enable:!0,server:"time.cloudflare.com",port:123,interval:30}};function Ge(){const e=globalThis.settings,t="localhost"===e.localDNS?"system":`${e.localDNS}#DIRECT`;return[{rule:!0,type:"REJECT",ruleProvider:{format:"text",geosite:"malware",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/malware.txt",geoip:"malware-cidr",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/malware-ip.txt"}},{rule:!0,type:"REJECT",ruleProvider:{format:"text",geosite:"phishing",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/phishing.txt",geoip:"phishing-cidr",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/phishing-ip.txt"}},{rule:!0,type:"REJECT",ruleProvider:{format:"text",geosite:"cryptominers",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/cryptominers.txt"}},{rule:e.blockAds,type:"REJECT",ruleProvider:{format:"text",geosite:"category-ads-all",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/category-ads-all.txt"}},{rule:e.blockPorn,type:"REJECT",ruleProvider:{format:"text",geosite:"nsfw",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/nsfw.txt"}},{rule:e.bypassIran,type:"DIRECT",dns:t,ruleProvider:{format:"text",geosite:"ir",geoip:"ir-cidr",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ir.txt",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ircidr.txt"}},{rule:e.bypassChina,type:"DIRECT",dns:t,ruleProvider:{format:"yaml",geosite:"cn",geoip:"cn-cidr",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml",geoipURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml"}},{rule:e.bypassRussia,type:"DIRECT",dns:t,ruleProvider:{format:"yaml",geosite:"ru",geoip:"ru-cidr",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ru.yaml",geoipURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ru.yaml"}},{rule:e.bypassOpenAi,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"openai",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.yaml"}},{rule:e.bypassMicrosoft,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"microsoft",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.yaml"}},{rule:e.bypassOracle,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"oracle",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/oracle.yaml"}},{rule:e.bypassDocker,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"docker",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/docker.yaml"}},{rule:e.bypassAdobe,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"adobe",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/adobe.yaml"}},{rule:e.bypassEpicGames,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"epicgames",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/epicgames.yaml"}},{rule:e.bypassIntel,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"intel",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/intel.yaml"}},{rule:e.bypassAmd,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"amd",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/amd.yaml"}},{rule:e.bypassNvidia,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"nvidia",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/nvidia.yaml"}},{rule:e.bypassAsus,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"asus",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/asus.yaml"}},{rule:e.bypassHp,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"hp",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/hp.yaml"}},{rule:e.bypassLenovo,type:"DIRECT",dns:`${e.antiSanctionDNS}#DIRECT`,ruleProvider:{format:"yaml",geosite:"lenovo",geositeURL:"https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/lenovo.yaml"}}]}async function Ze(e){const t=globalThis.settings;let r="",n="",a="",s=1;const o=await Se(e),i=(e,r,n,a,s,o)=>{const i=globalThis.defaultHttpsPorts.includes(n),c=i?"tls":"none",l=`${Le(16)}${t.proxyIPs.length?`/${btoa(t.proxyIPs.join(","))}`:""}`,d=new URL(`${e}://config`);let u="";return"vless"===e?(d.username=globalThis.userID,d.searchParams.append("encryption","none")):(d.username=globalThis.TRPassword,u="tr"),d.hostname=r,d.port=n,d.searchParams.append("host",a),d.searchParams.append("type","ws"),d.searchParams.append("security",c),d.hash=o,"singbox"===globalThis.client?(d.searchParams.append("eh","Sec-WebSocket-Protocol"),d.searchParams.append("ed","2560"),d.searchParams.append("path",`/${u}${l}`)):d.searchParams.append("path",`/${u}${l}?ed=2560`),i&&(d.searchParams.append("sni",s),d.searchParams.append("fp","randomized"),d.searchParams.append("alpn","http/1.1"),"hiddify-frag"===globalThis.client&&d.searchParams.append("fragment",`${t.fragmentLengthMin}-${t.fragmentLengthMax},${t.fragmentIntervalMin}-${t.fragmentIntervalMax},hellotls`)),d.href};if(t.ports.forEach(a=>{o.forEach(o=>{const c=t.customCdnAddrs.includes(o)&&!e,l=c?"C":e?"F":"",d=c?t.customCdnSni:Pe(globalThis.hostName),u=c?t.customCdnHost:globalThis.hostName,p=Ce(s,a,o,t.cleanIPs,"VLESS",l),h=Ce(s,a,o,t.cleanIPs,"Trojan",l);if(t.VLConfigs){const e=i("vless",o,a,u,d,p);r+=`${e}\n`}if(t.TRConfigs){const e=i("trojan",o,a,u,d,h);n+=`${e}\n`}s++})}),t.outProxy){let e=`#${encodeURIComponent(" Chain proxy ")}`;if(t.outProxy.startsWith("socks")||t.outProxy.startsWith("http")){const r=/^(?:socks|http):\/\/([^@]+)@/,n=t.outProxy.match(r),s=!!n&&n[1];a=s?t.outProxy.replace(s,btoa(s))+e:t.outProxy+e}else a=t.outProxy.split("#")[0]+e}const c=btoa(r+n+a),l=Ne(e?" BPB Fragment":" BPB Normal");return new Response(c,{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store","Profile-Title":`base64:${l}`,DNS:t.remoteDNS}})}async function Qe(e){const t=globalThis.settings;let r="";t.warpEndpoints.forEach((n,a)=>{const s=new URL("warp://config");s.host=n,s.hash=` ${a+1} - Warp `,e&&(s.searchParams.append("ifpm",t.hiddifyNoiseMode),s.searchParams.append("ifp",`${t.noiseCountMin}-${t.noiseCountMax}`),s.searchParams.append("ifps",`${t.noiseSizeMin}-${t.noiseSizeMax}`),s.searchParams.append("ifpd",`${t.noiseDelayMin}-${t.noiseDelayMax}`));const o=new URL("warp://config");o.host="162.159.192.1:2408",o.hash=` ${a+1} - WoW `,r+=`${s.href}&&detour=${o.href}\n`});const n=Ne(" BPB Warp"+(e?" Pro":""));return new Response(btoa(r),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store","Profile-Title":`base64:${n}`,DNS:"1.1.1.1"}})}function et(e){const t=globalThis.settings,r=[{action:"sniff"},{action:"hijack-dns",mode:"or",rules:[{port:53},{protocol:"dns"}],type:"logical"},{clash_mode:"Direct",outbound:"direct"},{clash_mode:"Global",outbound:" Selector"}];function n(e,t,n,a,s,o,i,c){const l="reject"===c?"reject":"route",d="direct"===c?"direct":null;r.push({...n&&{rule_set:n},...a&&{rule_set:a},...e&&{domain_suffix:e},...t&&{ip_cidr:t},...s&&{network:s},...o&&{protocol:o},...i&&{port:i},action:l,...d&&{outbound:d}})}t.bypassLAN&&r.push({ip_is_private:!0,outbound:"direct"}),e&&t.blockUDP443&&n(null,null,null,null,"udp","quic",443,"reject"),e||n(null,null,null,null,"udp",null,null,"reject");const a=st();t.customBlockRules.forEach(e=>{const t=ke(e);a.push({rule:!0,type:"reject",domain:t?e:null,ip:t?null:Oe(e)?e.replace(/\[|\]/g,""):e})});[...t.customBypassRules,...t.customBypassSanctionRules].forEach(e=>{const t=ke(e);a.push({rule:!0,type:"direct",domain:t?e:null,ip:t?null:Oe(e)?e.replace(/\[|\]/g,""):e})});const s=[],o=new Map;a.filter(({rule:e})=>e).forEach(e=>{const{type:t,domain:r,ip:n,geosite:a,geoip:i}=e;o.has(t)||o.set(t,{domain:[],ip:[],geosite:[],geoip:[]}),r&&o.get(t).domain.push(r),n&&o.get(t).ip.push(n),a&&o.get(t).geosite.push(a),i&&o.get(t).geoip.push(i),(a||i)&&(e=>{const{geosite:t,geositeURL:r,geoip:n,geoipURL:a}=e;t&&s.push({type:"remote",tag:t,format:"binary",url:r,download_detour:"direct"}),n&&s.push({type:"remote",tag:n,format:"binary",url:a,download_detour:"direct"})})(e)});for(const[e,t]of o){const{domain:r,ip:a,geosite:s,geoip:o}=t;r.length&&n(r,null,null,null,null,null,null,e),s.length&&n(null,null,s,null,null,null,null,e),a.length&&n(null,a,null,null,null,null,null,e),o.length&&n(null,null,null,o,null,null,null,e)}return{rules:r,rule_set:s,auto_detect_interface:!0,final:" Selector"}}function tt(e,t,r,n){const a=globalThis.settings,s=r.includes("[")?r.match(/\[(.*?)\]/)[1]:r.split(":")[0],o=r.includes("[")?+r.match(/[^:]*$/)[0]:+r.split(":")[1],i=n?"162.159.192.1":s,c=n?2408:o,{warpIPv6:l,reserved:d,publicKey:u,privateKey:p}=_e(e,n),h={tag:t,type:"wireguard",address:["172.16.0.2/32",l],mtu:1280,peers:[{address:i,port:c,public_key:u,reserved:Ie(d),allowed_ips:["0.0.0.0/0","::/0"],persistent_keepalive_interval:5}],private_key:p,domain_resolver:{server:n?"dns-remote":"dns-direct",strategy:a.warpEnableIPv6?"prefer_ipv4":"ipv4_only",rewrite_ttl:60}};return n&&(h.detour=n),h}async function rt(e,t,r,n,a){const s=globalThis.settings,o=structuredClone(at);o.dns=await async function(e){const t=globalThis.settings,r=new URL(t.remoteDNS).protocol.replace(":",""),n=[{type:e?"udp":r,server:e?"1.1.1.1":t.dohHost.host,detour:" Selector",tag:"dns-remote"}];function a(e,t,r,a,s,o){n.push({type:e,...t&&{server:t},...r&&{server_port:r},...a&&{detour:a},...o&&{domain_resolver:{server:o,strategy:"ipv4_only"}},tag:s})}"localhost"===t.localDNS?a("local",null,null,null,"dns-direct"):a("udp",t.localDNS,53,null,"dns-direct");const s=[{domain:["raw.githubusercontent.com"],server:"dns-direct"},{clash_mode:"Direct",server:"dns-direct"},{clash_mode:"Global",server:"dns-remote"}];if(t.dohHost.isDomain&&!e){const{ipv4:e,ipv6:r,host:n}=t.dohHost,a=[...e.map(e=>`${n}. IN A ${e}`),...t.VLTRenableIPv6?r.map(e=>`${n}. IN AAAA ${e}`):[]];s.unshift({domain:n,action:"predefined",answer:a})}function o(e,t,r,n){let a,o;const i=[];t&&(o="and",a="logical",i.push({rule_set:e},{rule_set:t}));const c="reject"===n?"reject":"route",l="reject"===n?null:n;s.push({...a&&{type:a},...o&&{mode:o},...i.length&&{rules:i},...e&&!t&&{rule_set:e},...r&&{domain_suffix:r},action:c,...l&&{server:l}})}const i=st();t.customBlockRules.filter(ke).forEach(e=>{i.unshift({rule:!0,domain:e,type:"reject"})}),t.customBypassRules.filter(ke).forEach(e=>{i.push({rule:!0,domain:e,type:"direct",dns:"dns-direct"})}),t.customBypassSanctionRules.filter(ke).forEach(e=>{i.push({rule:!0,domain:e,type:"direct",dns:"dns-anti-sanction"})});const c=new Map;i.filter(({rule:e})=>e).forEach(({geosite:e,geoip:t,domain:r,type:n,dns:a})=>{if(e&&t&&"direct"===n)o(e,t,null,a);else{const t=a||n;c.has(t)||c.set(t,{geosite:[],domain:[]}),e&&c.get(t).geosite.push(e),r&&c.get(t).domain.push(r)}});for(const[e,t]of c){const{geosite:r,domain:n}=t;n.length&&o(null,null,n,e),r.length&&o(r,null,null,e)}if(c.has("dns-anti-sanction")){const e=Ue(t.antiSanctionDNS);e.isHostDomain?a("https",e.host,443,null,"dns-anti-sanction","dns-direct"):a("udp",t.antiSanctionDNS,53,null,"dns-anti-sanction",null)}if(t.VLTRFakeDNS&&!e||t.warpFakeDNS&&e){const r={type:"fakeip",tag:"dns-fake",inet4_range:"198.18.0.0/15"};(t.VLTRenableIPv6&&!e||t.warpEnableIPv6&&e)&&(r.inet6_range="fc00::/18"),n.push(r),s.push({disable_cache:!0,inbound:"tun-in",query_type:["A","AAAA"],server:"dns-fake"})}return{servers:n,rules:s,strategy:"ipv4_only",independent_cache:!0}}(n),o.route=et(n),a&&o.inbounds.find(({type:e})=>"tun"===e).address.push("fdfe:dcba:9876::1/126"),o.outbounds.find(({type:e})=>"selector"===e).outbounds=e;const i={type:"urltest",tag:n?" Warp - Best Ping ":" Best Ping ",outbounds:t,url:"https://www.gstatic.com/generate_204",interval:n?`${s.bestWarpInterval}s`:`${s.bestVLTRInterval}s`};if(o.outbounds.push(i),n){const e=structuredClone(i);e.tag=" WoW - Best Ping ",e.outbounds=r,o.outbounds.push(e)}return o}async function nt(e,t){const r=globalThis.settings;let n;if(r.outProxy)try{n=function(e){const t=globalThis.settings;if(["socks","http"].includes(e.protocol)){const{protocol:r,server:n,port:a,user:s,pass:o}=e,i={type:r,tag:"",server:n,server_port:+a,username:s,password:o,domain_resolver:{server:"dns-remote",strategy:t.VLTRenableIPv6?"prefer_ipv4":"ipv4_only",rewrite_ttl:60},detour:""};return"socks"===r&&(i.version="5"),i}const{server:r,port:n,uuid:a,flow:s,security:o,type:i,sni:c,fp:l,alpn:d,pbk:u,sid:p,headerType:h,host:f,path:w,serviceName:A}=e,m={type:"vless",tag:"",server:r,server_port:+n,uuid:a,flow:s,domain_resolver:{server:"dns-remote",strategy:t.VLTRenableIPv6?"prefer_ipv4":"ipv4_only",rewrite_ttl:60},detour:""};if("tls"===o||"reality"===o){const e=d?d?.split(",").filter(e=>"h2"!==e):[];m.tls={enabled:!0,server_name:c,insecure:!1,alpn:e,utls:{enabled:!0,fingerprint:l}},"reality"===o&&(m.tls.reality={enabled:!0,public_key:u,short_id:p},delete m.tls.alpn)}if("http"===h){const e=f?.split(",");m.transport={type:"http",host:e,path:w,method:"GET",headers:{Connection:["keep-alive"],"Content-Type":["application/octet-stream"]}}}if("ws"===i){const e=w?.split("?ed=")[0],t=+w?.split("?ed=")[1]||0;m.transport={type:"ws",path:e,headers:{Host:f},max_early_data:t,early_data_header_name:"Sec-WebSocket-Protocol"}}return"grpc"===i&&(m.transport={type:"grpc",service_name:A}),m}(r.outProxyParams,r.VLTRenableIPv6)}catch(t){console.log("An error occured while parsing chain proxy: ",t),n=void 0;const r=await e.kv.get("proxySettings",{type:"json"});await e.kv.put("proxySettings",JSON.stringify({...r,outProxy:"",outProxyParams:{}}))}let a=1;const s=[];r.VLConfigs&&s.push("VLESS"),r.TRConfigs&&s.push("Trojan");const o=[],i=await Se(!1),c={proxies:[],chains:[]},l=t?r.ports.filter(e=>globalThis.defaultHttpsPorts.includes(e)):r.ports;s.forEach(e=>{let s=1;l.forEach(l=>{i.forEach(i=>{let d,u;const p=r.customCdnAddrs.includes(i),h=p?"C":"",f=p?r.customCdnSni:Pe(globalThis.hostName),w=p?r.customCdnHost:globalThis.hostName,A=Ce(s,l,i,r.cleanIPs,e,h);if("VLESS"===e&&(d=function(e,t,r,n,a,s,o){const i=globalThis.settings,c=`/${Le(16)}${i.proxyIPs.length?`/${btoa(i.proxyIPs.join(","))}`:""}`,l=!!globalThis.defaultHttpsPorts.includes(r),d={tag:e,type:"vless",server:t,server_port:r,uuid:globalThis.userID,network:"tcp",packet_encoding:"",transport:{early_data_header_name:"Sec-WebSocket-Protocol",max_early_data:2560,headers:{Host:n},path:c,type:"ws"},domain_resolver:{server:"dns-direct",strategy:i.VLTRenableIPv6?"prefer_ipv4":"ipv4_only",rewrite_ttl:60},tcp_fast_open:!0,tcp_multi_path:!0};return l&&(d.tls={alpn:"http/1.1",enabled:!0,insecure:s,server_name:a,record_fragment:o,utls:{enabled:!0,fingerprint:"randomized"}}),d}(n?`proxy-${a}`:A,i,l,w,f,p,t),c.proxies.push(d)),"Trojan"===e&&(u=function(e,t,r,n,a,s,o){const i=globalThis.settings,c=`/tr${Le(16)}${i.proxyIPs.length?`/${btoa(i.proxyIPs.join(","))}`:""}`,l=!!globalThis.defaultHttpsPorts.includes(r),d={tag:e,type:"trojan",password:globalThis.TRPassword,server:t,server_port:r,network:"tcp",transport:{early_data_header_name:"Sec-WebSocket-Protocol",max_early_data:2560,headers:{Host:n},path:c,type:"ws"},domain_resolver:{server:"dns-direct",strategy:i.VLTRenableIPv6?"prefer_ipv4":"ipv4_only",rewrite_ttl:60},tcp_fast_open:!0,tcp_multi_path:!0};return l&&(d.tls={alpn:"http/1.1",enabled:!0,insecure:s,server_name:a,record_fragment:o,utls:{enabled:!0,fingerprint:"randomized"}}),d}(n?`proxy-${a}`:A,i,l,w,f,p,t),c.proxies.push(u)),n){const e=structuredClone(n);e.tag=A,e.detour=`proxy-${a}`,c.chains.push(e)}o.push(A),a++,s++})})});const d=[" Best Ping ",...o],u=await rt(d,o,null,!1,r.VLTRenableIPv6);return u.outbounds.push(...c.chains,...c.proxies),new Response(JSON.stringify(u,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}var at={log:{level:"warn",timestamp:!0},dns:{},inbounds:[{type:"tun",tag:"tun-in",address:["172.18.0.1/30"],mtu:9e3,auto_route:!0,strict_route:!0,endpoint_independent_nat:!0,stack:"mixed"},{type:"mixed",tag:"mixed-in",listen:"0.0.0.0",listen_port:2080}],outbounds:[{type:"selector",tag:" Selector",outbounds:[]},{type:"direct",tag:"direct"}],route:{},ntp:{enabled:!0,server:"time.cloudflare.com",server_port:123,domain_resolver:"dns-direct",interval:"30m",write_to_system:!1},experimental:{cache_file:{enabled:!0,store_fakeip:!0},clash_api:{external_controller:"127.0.0.1:9090",external_ui:"ui",external_ui_download_url:"https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip",external_ui_download_detour:"direct",default_mode:"Rule"}}};function st(){const e=globalThis.settings;return[{rule:!0,type:"reject",geosite:"geosite-malware",geoip:"geoip-malware",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-malware.srs",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-malware.srs"},{rule:!0,type:"reject",geosite:"geosite-phishing",geoip:"geoip-phishing",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-phishing.srs",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-phishing.srs"},{rule:!0,type:"reject",geosite:"geosite-cryptominers",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-cryptominers.srs"},{rule:e.blockAds,type:"reject",geosite:"geosite-category-ads-all",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ads-all.srs"},{rule:e.blockPorn,type:"reject",geosite:"geosite-nsfw",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-nsfw.srs"},{rule:e.bypassIran,type:"direct",dns:"dns-direct",geosite:"geosite-ir",geoip:"geoip-ir",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-ir.srs",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ir.srs"},{rule:e.bypassChina,type:"direct",dns:"dns-direct",geosite:"geosite-cn",geoip:"geoip-cn",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-cn.srs",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-cn.srs"},{rule:e.bypassRussia,type:"direct",dns:"dns-direct",geosite:"geosite-category-ru",geoip:"geoip-ru",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ru.srs",geoipURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ru.srs"},{rule:e.bypassOpenAi,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-openai",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-openai.srs"},{rule:e.bypassMicrosoft,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-microsoft",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-microsoft.srs"},{rule:e.bypassOracle,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-oracle",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-oracle.srs"},{rule:e.bypassDocker,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-docker",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-docker.srs"},{rule:e.bypassAdobe,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-adobe",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-adobe.srs"},{rule:e.bypassEpicGames,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-epicgames",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-epicgames.srs"},{rule:e.bypassIntel,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-intel",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-intel.srs"},{rule:e.bypassAmd,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-amd",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-amd.srs"},{rule:e.bypassNvidia,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-nvidia",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-nvidia.srs"},{rule:e.bypassAsus,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-asus",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-asus.srs"},{rule:e.bypassHp,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-hp",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-hp.srs"},{rule:e.bypassLenovo,type:"direct",dns:"dns-anti-sanction",geosite:"geosite-lenovo",geositeURL:"https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-lenovo.srs"}]}function ot(e,t,r,n,a,s,o,i){const c=globalThis.settings,l=s.length?`/${btoa(s.join(","))}`:"",d=`/${Le(16)}${l}?ed=2560`,u={protocol:"vless",settings:{vnext:[{address:t,port:r,users:[{id:globalThis.userID,encryption:"none",level:8}]}]},streamSettings:{network:"ws",security:"none",sockopt:{},wsSettings:{host:n,path:d}},tag:e};globalThis.defaultHttpsPorts.includes(r)&&(u.streamSettings.security="tls",u.streamSettings.tlsSettings={allowInsecure:i,fingerprint:"randomized",alpn:["http/1.1"],serverName:a});const p=u.streamSettings.sockopt;return o?p.dialerProxy="fragment":p.domainStrategy=c.VLTRenableIPv6?"UseIPv4v6":"UseIPv4",u}function it(e,t,r,n,a,s,o,i){const c=globalThis.settings,l=s.length?`/${btoa(s.join(","))}`:"",d=`/tr${Le(16)}${l}?ed=2560`,u={protocol:"trojan",settings:{servers:[{address:t,port:r,password:globalThis.TRPassword,level:8}]},streamSettings:{network:"ws",security:"none",sockopt:{},wsSettings:{host:n,path:d}},tag:e};globalThis.defaultHttpsPorts.includes(r)&&(u.streamSettings.security="tls",u.streamSettings.tlsSettings={allowInsecure:i,fingerprint:"randomized",alpn:["http/1.1"],serverName:a});const p=u.streamSettings.sockopt;return o?p.dialerProxy="fragment":p.domainStrategy=c.VLTRenableIPv6?"UseIPv4v6":"UseIPv4",u}function ct(e,t,r){const n=globalThis.settings,{warpIPv6:a,reserved:s,publicKey:o,privateKey:i}=_e(e,r),c={protocol:"wireguard",settings:{address:["172.16.0.2/32",a],mtu:1280,peers:[{endpoint:r?"162.159.192.1:2408":t,publicKey:o,keepAlive:5}],reserved:Ie(s),secretKey:i},tag:r?"chain":"proxy"};let l="";return r&&(l="proxy"),r||"xray-pro"!==globalThis.client||(l="udp-noise"),l&&(c.streamSettings={sockopt:{dialerProxy:l}}),"xray-knocker"!==globalThis.client||r||(delete c.streamSettings,Object.assign(c.settings,{wnoise:n.knockerNoiseMode,wnoisecount:n.noiseCountMin===n.noiseCountMax?String(n.noiseCountMin):`${n.noiseCountMin}-${n.noiseCountMax}`,wpayloadsize:n.noiseSizeMin===n.noiseSizeMax?String(n.noiseSizeMin):`${n.noiseSizeMin}-${n.noiseSizeMax}`,wnoisedelay:n.noiseDelayMin===n.noiseDelayMax?String(n.noiseDelayMin):`${n.noiseDelayMin}-${n.noiseDelayMax}`})),c}function lt(e,t,r,n,a){const s=globalThis.settings,o={tag:r,protocol:"freedom",settings:{}};if(e&&(o.settings.fragment={packets:s.fragmentPackets,length:n||`${s.fragmentLengthMin}-${s.fragmentLengthMax}`,interval:a||`${s.fragmentIntervalMin}-${s.fragmentIntervalMax}`},o.settings.domainStrategy=s.VLTRenableIPv6?"UseIPv4v6":"UseIPv4"),t){o.settings.noises=[];structuredClone(s.xrayUdpNoises).forEach(e=>{const t=e.count;delete e.count,o.settings.noises.push(...Array.from({length:t},()=>e))}),e||(o.settings.domainStrategy=s.warpEnableIPv6?"UseIPv4v6":"UseIPv4")}return o}async function dt(e,t,r,n,a,s,o,i,c,l,d){const u=globalThis.settings,p=structuredClone(ht);p.remarks=e,p.dns=await async function(e,t,r,n,a,s){const o=globalThis.settings;function i(e,t,r,n,a){return{address:e,...t&&{domains:t},...r&&{expectIPs:r},...n&&{skipFallback:n},...a&&{tag:a}}}const c={};if(o.dohHost.isDomain&&!r&&!n){const{ipv4:e,ipv6:t,host:r}=o.dohHost;c[r]=o.VLTRenableIPv6?[...e,...t]:e}const l=ft(),d=l.filter(({type:e})=>"block"===e);o.customBlockRules.filter(ke).forEach(e=>{d.push({rule:!0,domain:e})}),d.filter(({rule:e})=>e).forEach(({domain:e})=>{c[e]=["127.0.0.1"]});const u=t?await Me(t):void 0;u&&(c[t]=o.VLTRenableIPv6?[...u.ipv4,...u.ipv6]:u.ipv4);const p={...Object.keys(c).length?{hosts:c}:{},servers:[],queryStrategy:o.VLTRenableIPv6&&!n||o.warpEnableIPv6&&n?"UseIP":"UseIPv4",tag:"dns"};let h=!0,f=n?"1.1.1.1":o.remoteDNS;r&&(p.hosts||(p.hosts={}),f=`https://${a}/dns-query`,p.hosts[a]=s,h=!1,p.disableFallback=!0);const w=i(f,null,null,null,"remote-dns");p.servers.push(w);const A=l.filter(({type:e})=>"direct"===e);ke(s?.[0])&&A.push({rule:!0,domain:`full:${s[0]}`,dns:o.localDNS}),e.filter(ke).forEach(e=>{A.push({rule:!0,domain:`full:${e}`,dns:o.localDNS})}),o.customBypassRules.filter(ke).forEach(e=>{A.push({rule:!0,domain:`domain:${e}`,dns:o.localDNS})}),o.customBypassSanctionRules.filter(ke).forEach(e=>{A.push({rule:!0,domain:`domain:${e}`,dns:o.antiSanctionDNS})});const{host:m,isHostDomain:y}=Ue(o.antiSanctionDNS);y&&A.push({rule:!0,domain:`full:${m}`,dns:o.localDNS});const g=[],E=new Map;A.filter(({rule:e})=>e).forEach(({domain:e,ip:t,dns:r})=>{if(t){const n=i(r,[e],t?[t]:null,h);p.servers.push(n)}else E.has(r)||E.set(r,[]),E.get(r).push(e);e&&g.push(e)});for(const[e,t]of E)if(t.length){const r=i(e,t,null,h);p.servers.push(r)}if(o.VLTRFakeDNS&&!n||o.warpFakeDNS&&n){const e=g.length?i("fakedns",g,null,!1):"fakedns";p.servers.unshift(e)}return p}(i,c,o,a,l,d);if((u.VLTRFakeDNS&&!a||u.warpFakeDNS&&a)&&p.inbounds[0].sniffing.destOverride.push("fakedns"),s){const e=lt(!0,o,"fragment");p.outbounds.unshift(e)}if(a&&"xray-pro"===globalThis.client){const e=lt(!1,!0,"udp-noise");p.outbounds.unshift(e)}return p.routing.rules=function(e,t,r,n){const a=globalThis.settings,s=[{inboundTag:["dns-in"],outboundTag:"dns-out",type:"field"},{inboundTag:["socks-in"],port:53,outboundTag:"dns-out",type:"field"}];function o(e,t,r,n,a,o,i){s.push({...e&&{inboundTag:e},...t&&{domain:t},...r&&{ip:r},...n&&{port:n},...a&&{network:a},...i?{balancerTag:o}:{outboundTag:o},type:"field"})}const i=t?"all":e?"chain":r?"fragment":"proxy";o(["remote-dns"],null,null,null,null,i,t),o(["dns"],null,null,null,null,"direct"),a.bypassLAN&&(o(null,["geosite:private"],null,null,null,"direct"),o(null,null,["geoip:private"],null,null,"direct")),n&&a.blockUDP443&&o(null,null,null,443,"udp","block");const c=ft();[...a.customBypassRules,...a.customBypassSanctionRules].forEach(e=>{const t=ke(e);c.push({rule:!0,type:"direct",domain:t?`domain:${e}`:null,ip:t?null:e})}),a.customBlockRules.forEach(e=>{const t=ke(e);c.push({rule:!0,type:"block",domain:t?`domain:${e}`:null,ip:t?null:e})});const l=new Map;c.filter(({rule:e})=>e).forEach(({type:e,domain:t,ip:r})=>{l.has(e)||l.set(e,{domain:[],ip:[]}),t&&l.get(e).domain.push(t),r&&l.get(e).ip.push(r)});for(const[e,t]of l){const{domain:r,ip:n}=t;r.length&&o(null,r,null,null,null,e,null),n.length&&o(null,null,n,null,null,e,null)}let d;return n||r||o(null,null,null,null,"udp","block",null),d=t?n?"tcp,udp":"tcp":n||r?"tcp,udp":"tcp",o(null,null,null,null,d,i,t),s}(r,t,o,a),t&&(p.routing.balancers=[{tag:"all",selector:[r?"chain":"prox"],strategy:{type:"leastPing"},...n&&{fallbackTag:"prox-2"}}],p.observatory={subjectSelector:[r?"chain":"prox"],probeUrl:"https://www.gstatic.com/generate_204",probeInterval:`${a?u.bestWarpInterval:u.bestVLTRInterval}s`,enableConcurrency:!0}),p}async function ut(e,t){const r=globalThis.settings;let n;if(r.outProxy)try{n=function(e,t){if(["socks","http"].includes(e.protocol)){const{protocol:r,server:n,port:a,user:s,pass:o}=e;return{protocol:r,settings:{servers:[{address:n,port:+a,users:[{user:s,pass:o,level:8}]}]},streamSettings:{network:"tcp",sockopt:{dialerProxy:"proxy",domainStrategy:t?"UseIPv4v6":"UseIPv4"}},mux:{enabled:!0,concurrency:8,xudpConcurrency:16,xudpProxyUDP443:"reject"},tag:"chain"}}const{server:r,port:n,uuid:a,flow:s,security:o,type:i,sni:c,fp:l,alpn:d,pbk:u,sid:p,spx:h,headerType:f,host:w,path:A,authority:m,serviceName:y,mode:g}=e,E={mux:{concurrency:8,enabled:!0,xudpConcurrency:16,xudpProxyUDP443:"reject"},protocol:"vless",settings:{vnext:[{address:r,port:+n,users:[{encryption:"none",flow:s,id:a,level:8,security:"auto"}]}]},streamSettings:{network:i,security:o,sockopt:{dialerProxy:"proxy",domainStrategy:t?"UseIPv4v6":"UseIPv4"}},tag:"chain"};if("tls"===o){const e=d?d?.split(","):[];E.streamSettings.tlsSettings={allowInsecure:!1,fingerprint:l,alpn:e,serverName:c}}if("reality"===o&&(delete E.mux,E.streamSettings.realitySettings={fingerprint:l,publicKey:u,serverName:c,shortId:p,spiderX:h}),"http"===f){const e=A?.split(","),t=w?.split(",");E.streamSettings.tcpSettings={header:{request:{headers:{Host:t},method:"GET",path:e,version:"1.1"},response:{headers:{"Content-Type":["application/octet-stream"]},reason:"OK",status:"200",version:"1.1"},type:"http"}}}return"tcp"!==i||"reality"===o||f||(E.streamSettings.tcpSettings={header:{type:"none"}}),"ws"===i&&(E.streamSettings.wsSettings={host:w,path:A}),"grpc"===i&&(delete E.mux,E.streamSettings.grpcSettings={authority:m,multiMode:"multi"===g,serviceName:y}),E}(r.outProxyParams,r.VLTRenableIPv6)}catch(t){console.log("An error occured while parsing chain proxy: ",t),n=void 0;const r=await e.kv.get("proxySettings",{type:"json"});await e.kv.put("proxySettings",JSON.stringify({...r,outProxy:"",outProxyParams:{}}))}const a=await Se(r.cleanIPs,r.VLTRenableIPv6,r.customCdnAddrs),s=r.ports.filter(e=>!t||globalThis.defaultHttpsPorts.includes(e));let o=[];r.VLConfigs&&o.push("VLESS"),r.TRConfigs&&o.push("Trojan");let i=[],c={proxies:[],chains:[]};for(const e of o){let o=1;for(const l of s)for(const s of a){const a=r.customCdnAddrs.includes(s)&&!t,d=a?"C":t?"F":"",u=a?r.customCdnSni:Pe(globalThis.hostName),p=a?r.customCdnHost:globalThis.hostName,h=Ce(o,l,s,r.cleanIPs,e,d),f=await dt(h,!1,n,!1,!1,t,!1,[s],null),w="VLESS"===e?ot("proxy",s,l,p,u,r.proxyIPs,t,a):it("proxy",s,l,p,u,r.proxyIPs,t,a);f.outbounds.unshift({...w}),c.proxies.push(w),n&&(f.outbounds.unshift(structuredClone(n)),c.chains.push(structuredClone(n))),i.push(f),o++}}c.proxies.forEach((e,t)=>e.tag=`prox-${t+1}`),n&&c.chains.forEach((e,t)=>{e.tag=`chain-${t+1}`,e.streamSettings.sockopt.dialerProxy=`prox-${t+1}`});const l=[...c.chains,...c.proxies],d=await async function(e,t,r,n){const a=n?" BPB F - Best Ping ":" BPB - Best Ping ",s=await dt(a,!0,t,!0,!1,n,!1,e,null);return s.outbounds.unshift(...r),s}(a,n,l,t),u=[...i,d];if(t){const e=await async function(e,t,r){const n=globalThis.settings,a=await dt(" BPB F - Best Fragment ",!0,t,!1,!1,!0,!1,[],e),s=[];return["10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90","90-100","10-30","20-40","30-50","40-60","50-70","60-80","70-90","80-100","100-200"].forEach((e,a)=>{if(t){const e=structuredClone(t);e.tag=`chain-${a+1}`,e.streamSettings.sockopt.dialerProxy=`prox-${a+1}`,s.push(e)}const o=structuredClone(r);o.tag=`prox-${a+1}`,o.streamSettings.sockopt.dialerProxy=`frag-${a+1}`;const i=lt(!0,!1,`frag-${a+1}`,e,`${n.fragmentIntervalMin}-${n.fragmentIntervalMax}`);s.push(o,i)}),a.outbounds.unshift(...s),a}(globalThis.hostName,n,c.proxies[0]),t=await async function(){return[await dt(" BPB F - WorkerLess - 1 ",!1,!1,!1,!1,!0,!0,[],!1,"cloudflare-dns.com",["cloudflare.com"]),await dt(" BPB F - WorkerLess - 2 ",!1,!1,!1,!1,!0,!0,[],!1,"dns.google",["8.8.8.8","8.8.4.4"])]}();u.push(e,...t)}return new Response(JSON.stringify(u,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}async function pt(e,t,r){const n=globalThis.settings,{warpConfigs:a}=await $e(e,t),s=r?" Pro ":" ",o=[],i=[],c={proxies:[],chains:[]};for(const[e,t]of n.warpEndpoints.entries()){const r=t.split(":")[0],n=await dt(` ${e+1} - Warp${s}`,!1,!1,!1,!0,!1,!1,[r],null),l=await dt(` ${e+1} - WoW${s}`,!1,!0,!1,!0,!1,!1,[r],null),d=ct(a,t,!1),u=ct(a,t,!0);n.outbounds.unshift(structuredClone(d)),l.outbounds.unshift(structuredClone(u),structuredClone(d)),o.push(n),i.push(l),c.proxies.push(d),c.chains.push(u)}c.proxies.forEach((e,t)=>e.tag=`prox-${t+1}`),c.chains.forEach((e,t)=>{e.tag=`chain-${t+1}`,e.streamSettings.sockopt.dialerProxy=`prox-${t+1}`});const l=[...c.chains,...c.proxies],d=n.warpEndpoints.map(e=>e.split(":")[0]).filter(e=>ke(e)),u=await dt(` Warp${s}- Best Ping `,!0,!1,!1,!0,!1,!1,d,null);u.outbounds.unshift(...c.proxies);const p=await dt(` WoW${s}- Best Ping `,!0,!0,!1,!0,!1,!1,d,null);p.outbounds.unshift(...l);const h=[...o,...i,u,p];return new Response(JSON.stringify(h,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}var ht={remarks:"",log:{loglevel:"warning"},dns:{},inbounds:[{port:10808,protocol:"socks",settings:{auth:"noauth",udp:!0,userLevel:8},sniffing:{destOverride:["http","tls"],enabled:!0,routeOnly:!0},tag:"socks-in"},{port:10853,protocol:"dokodemo-door",settings:{address:"1.1.1.1",network:"tcp,udp",port:53},tag:"dns-in"}],outbounds:[{protocol:"dns",tag:"dns-out"},{protocol:"freedom",settings:{domainStrategy:"UseIP"},tag:"direct"},{protocol:"blackhole",settings:{response:{type:"http"}},tag:"block"}],policy:{levels:{8:{connIdle:300,downlinkOnly:1,handshake:4,uplinkOnly:1}},system:{statsOutboundUplink:!0,statsOutboundDownlink:!0}},routing:{domainStrategy:"IPIfNonMatch",rules:[]},stats:{}};function ft(){const e=globalThis.settings;return[{rule:e.blockAds,type:"block",domain:"geosite:category-ads-all"},{rule:e.blockAds,type:"block",domain:"geosite:category-ads-ir"},{rule:e.blockPorn,type:"block",domain:"geosite:category-porn"},{rule:e.bypassIran,type:"direct",domain:"geosite:category-ir",ip:"geoip:ir",dns:e.localDNS},{rule:e.bypassChina,type:"direct",domain:"geosite:cn",ip:"geoip:cn",dns:e.localDNS},{rule:e.bypassRussia,type:"direct",domain:"geosite:category-ru",ip:"geoip:ru",dns:e.localDNS},{rule:e.bypassOpenAi,type:"direct",domain:"geosite:openai",dns:e.antiSanctionDNS},{rule:e.bypassMicrosoft,type:"direct",domain:"geosite:microsoft",dns:e.antiSanctionDNS},{rule:e.bypassOracle,type:"direct",domain:"geosite:oracle",dns:e.antiSanctionDNS},{rule:e.bypassDocker,type:"direct",domain:"geosite:docker",dns:e.antiSanctionDNS},{rule:e.bypassAdobe,type:"direct",domain:"geosite:adobe",dns:e.antiSanctionDNS},{rule:e.bypassEpicGames,type:"direct",domain:"geosite:epicgames",dns:e.antiSanctionDNS},{rule:e.bypassIntel,type:"direct",domain:"geosite:intel",dns:e.antiSanctionDNS},{rule:e.bypassAmd,type:"direct",domain:"geosite:amd",dns:e.antiSanctionDNS},{rule:e.bypassNvidia,type:"direct",domain:"geosite:nvidia",dns:e.antiSanctionDNS},{rule:e.bypassAsus,type:"direct",domain:"geosite:asus",dns:e.antiSanctionDNS},{rule:e.bypassHp,type:"direct",domain:"geosite:hp",dns:e.antiSanctionDNS},{rule:e.bypassLenovo,type:"direct",domain:"geosite:lenovo",dns:e.antiSanctionDNS}]}var wt=l(m(),1);function At(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}async function mt(e,t){switch(globalThis.pathName){case"/panel":return await async function(e,t){const r=await t.kv.get("pwd");if(r){if(!await Re(e,t))return Response.redirect(`${globalThis.urlOrigin}/login`,302)}const n='<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>BPB Panel</title><link rel=icon href=/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=autorenew,content_copy,download,fingerprint,key_vertical,open_in_new,qr_code,settings,share,terminal,tune,verified,visibility,visibility_off&display=block"><style>:root{--color:black;--primary-color:#09639f;--secondary-color:#3498db;--header-color:#09639f;--background-color:#fff;--form-background-color:#f9f9f9;--table-active-color:#f2f2f2;--hr-text-color:#3b3b3b;--lable-text-color:#333;--border-color:#ddd;--button-color:#09639f;--input-background-color:white;--header-shadow:2px 2px 4px rgba(0, 0, 0, 0.25);--container-border-radius:28px;--inner-container-border-radius:14px;--element-border-radius:10px;--container-padding:28px;--container-gap:20px;--container-box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);--inner-container-padding:14px;--inner-container-gap:14px}body{font-family:Twemoji Country Flags,system-ui;background-color:var(--background-color);color:var(--color);text-align:center}*,::after,::before{box-sizing:border-box}body.dark-mode{--color:white;--primary-color:#09639F;--secondary-color:#3498DB;--header-color:#3498DB;--background-color:#121212;--form-background-color:#121212;--table-active-color:#252525;--hr-text-color:#D5D5D5;--lable-text-color:#DFDFDF;--border-color:#353535;--button-color:#3498DB;--input-background-color:#252525;--header-shadow:2px 2px 4px rgba(255, 255, 255, 0.25);--container-box-shadow:0 2px 4px rgba(255, 255, 255, 0.1)}h1{color:var(--header-color);text-shadow:var(--header-shadow)}.icon{vertical-align:middle;height:3rem}.container{display:flex;flex-direction:column;border:1px solid var(--border-color);border-radius:var(--container-border-radius);padding:var(--container-padding);box-shadow:var(--container-box-shadow)}.section .container{gap:var(--container-gap)}.inner-container{display:flex;flex-direction:column;gap:var(--inner-container-gap);box-shadow:var(--container-box-shadow);border:1px solid var(--border-color);border-radius:var(--inner-container-border-radius);padding:var(--inner-container-padding)}.form-container{max-width:90%;margin:0 auto;background:var(--form-background-color);margin-bottom:30px}.configForm{display:flex;flex-direction:column}.section{display:flex;flex-direction:column;gap:var(--container-gap);margin-bottom:var(--container-gap)}.form-control{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between;gap:16px}.form-control div{display:flex;flex:1;width:100%}.form-control label{flex:1;text-align:center;width:100%;font-weight:700;color:var(--lable-text-color)}input[type=number],input[type=text],input[type=url],select,textarea{width:100%;text-align:center;padding:10px;line-height:1.5;border:1px solid var(--border-color);border-radius:var(--element-border-radius);color:var(--lable-text-color);background-color:var(--input-background-color);transition:border-color .3s ease}textarea{font-family:inherit;resize:none;color:var(--color);max-height:calc(5lh + 10px)}input[type=number]:focus,input[type=text]:focus,input[type=url]:focus,select:focus,textarea:focus{border-color:var(--secondary-color);outline:0}.form-control input[type=password]{text-align:center;width:50%;padding:10px;border:1px solid var(--border-color);border-radius:var(--element-border-radius);color:var(--lable-text-color);background-color:var(--input-background-color);transition:border-color .3s ease}.form-control input[type=password]:focus{border-color:var(--secondary-color);outline:0}.form-control a,a.link{width:100%;text-decoration:none}a.scanner{margin-left:8px;width:unset;color:var(--button-color)}button.reverse{width:100%;background-color:var(--form-background-color);font-weight:600;color:var(--button-color);border-color:var(--primary-color);border:1px solid;padding:10px}.protocols{flex-direction:row;flex-wrap:wrap}.proto{gap:8px;display:flex;align-items:center;flex-direction:row;justify-content:center}.proto label{width:unset;flex:unset}.min-max{flex:1;width:100%;display:flex;align-items:center;gap:4px}.min-max input{width:100%}.min-max span{text-align:center;white-space:pre}.ports-block th{text-wrap:nowrap;background-color:gray}.ports-block td:first-child{text-align:center;font-size:larger}.ports-block td:last-child{display:grid;grid-template-columns:1fr 1fr 1fr 1fr}.rules{gap:16px;display:flex;flex-direction:row;width:100%;flex-wrap:wrap}.form-control div.routing{gap:5px;display:flex;flex:1;margin:0;align-items:center;max-width:fit-content}.routing label{text-align:left;width:unset;font-weight:400;font-size:100%;text-wrap:nowrap}.form-control.apply{flex-wrap:wrap;flex-direction:row;padding:var(--container-padding) 0;gap:8px;justify-content:center;flex:unset}button.apply-settings{margin:0}button.panel-settings{flex:unset;border:none;cursor:pointer;width:fit-content;margin:0;background:0 0;color:var(--primary-color)}.material-symbols-rounded{vertical-align:middle;display:inline-block;margin:0 5px 0 5px;font-variation-settings:\'FILL\' 0,\'wght\' 400,\'GRAD\' 0,\'opsz\' 24}details:not(:last-of-type){border-bottom:1px solid var(--border-color)}summary{font-weight:700;cursor:pointer;text-align:left;text-wrap:nowrap}summary::marker{font-size:1.5rem;color:var(--secondary-color)}summary:focus-visible{outline:0}h2,h3{display:flex;text-align:center;color:var(--hr-text-color);justify-content:center;align-items:center}hr{margin:1px 0;border:1px solid var(--border-color)}.footer-container{overflow-x:auto;display:flex}.footer{display:flex;font-weight:600;margin:10px auto;justify-content:center;align-items:center;gap:10px}.footer i{font-size:36px}.footer a,.footer a.link{color:var(--color);text-decoration:underline;width:unset;flex:unset}.footer button{margin:unset;background:#212121;max-width:fit-content}.footer .logout{background:0 0;color:var(--color);margin:0;border:none;cursor:pointer}.github-container{display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap}label{display:block;font-weight:600;color:var(--lable-text-color)}.button{display:flex;align-items:center;justify-content:center;width:140px;white-space:nowrap;padding:14px 14px;font-size:16px;font-weight:600;letter-spacing:1px;border:none;border-radius:var(--element-border-radius);color:#fff;background-color:var(--primary-color);cursor:pointer;outline:0;box-shadow:0 5px 10px rgba(0,0,0,.2);transition:all .3s ease;margin-right:auto;margin-left:auto}table button{margin-top:auto;margin-bottom:auto;max-height:fit-content;font-size:16px;font-weight:600;border:none;background-color:unset;cursor:pointer;color:var(--lable-text-color);padding:0}table button span.material-symbols-rounded{font-size:28px;margin:0}.button{font-weight:600;font-size:1.1rem;width:max-content}input[type=checkbox]{background-color:var(--input-background-color)}.button.disabled{background-color:#ccc;color:#fff;cursor:not-allowed;box-shadow:none;pointer-events:none}.button:hover{background-color:#2980b9;box-shadow:0 8px 15px rgba(0,0,0,.3);transform:translateY(-2px)}table button:focus,table button:hover{color:var(--primary-color);transform:translateY(-2px)}.header-container button:hover{transform:scale(1.1)}.header-container{gap:10px;display:flex;justify-content:center}.header-container h3{display:flex;justify-content:center}button.button:hover{color:#fff}.button:active{transform:translateY(1px);box-shadow:0 3px 7px rgba(0,0,0,.3)}table button:active{transform:translateY(1px)}.table-container{overflow-x:auto}.add-noise{background:0 0;margin:0;border:none;cursor:pointer}.add-noise i,.delete-noise i{color:var(--button-color)}.delete-noise{background:0 0;margin:0;border:none;cursor:pointer}.table-container table{width:100%;border:1px solid var(--border-color);border-collapse:separate;border-spacing:0;border-radius:var(--inner-container-border-radius);margin-bottom:20px;overflow:hidden}.table-container tbody{display:flex;flex-direction:column}.table-container tr{display:flex;flex-direction:row}.table-container tr td:first-child{color:var(--lable-text-color);text-wrap:nowrap}.table-container tr td:nth-child(2){flex-direction:row;gap:8px}.my-ip{overflow-x:auto}.my-ip table{width:100%;border:1px solid var(--border-color);border-collapse:separate;border-spacing:0;border-radius:var(--inner-container-border-radius);margin-bottom:20px;overflow:hidden}.my-ip td,.my-ip th{text-wrap:nowrap;padding:10px;border-bottom:1px solid var(--border-color)}.my-ip td:first-child,.my-ip th{background-color:var(--table-active-color);font-weight:700}.table-container td,.table-container th{display:flex;flex-direction:column;justify-content:center;padding:10px;width:100%;gap:10px;border-bottom:1px solid var(--border-color)}.table-container td div{display:flex;align-items:center}.table-container th{background-color:var(--secondary-color);color:#fff;font-weight:700;font-size:1.1rem;width:50%}.table-container tr:hover{background-color:var(--table-active-color)}.modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4)}.modal-content{width:fit-content;text-align:center;background-color:var(--form-background-color);margin:auto;padding:10px 20px 20px;border:1px solid var(--border-color);border-radius:10px;box-shadow:0 2px 4px rgba(0,0,0,.1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.modal-header{display:flex;flex-direction:column;align-items:center;margin-bottom:10px}.qr-title{align-self:center;font-weight:700}.close{align-self:flex-end;color:var(--color);float:right;font-size:28px;font-weight:700}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}#passwordError{color:red;margin-bottom:10px}.modalQR{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4)}.floating-button{position:fixed;bottom:20px;left:20px;background-color:var(--color);color:#fff;border:none;border-radius:50%;width:60px;height:60px;font-size:24px;cursor:pointer;box-shadow:0 4px 8px rgba(0,0,0,.2);transition:background-color .3s,transform .3s}.floating-button:hover{transform:scale(1.1)}body.dark-mode .floating-button{background-color:var(--color)}.floating-button i{color:var(--background-color)}body.dark-mode .floating-button:hover{transform:scale(1.1)}.refresh-geo-location{background:0 0;margin:0;border:none;cursor:pointer}.refresh-my-ip{color:var(--button-color)}details h3{display:flex;justify-content:center}.udp-noise{margin-bottom:10px}.password-wrapper{position:relative}.password-wrapper input[type=password],.password-wrapper input[type=text]{width:100%;padding-right:40px;margin:0}.toggle-password{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;user-select:none;color:#a9a9a9}.password-error{color:red;margin-bottom:10px}summary h3{display:inline-flex;align-items:center}@media only screen and (min-width:768px){.form-container{max-width:60%}.form-control{flex-direction:row}.form-control label{text-align:left}}</style></head><body><h1><img class=icon src=/favicon.ico alt="BPB Logo"> BPB Panel <span id=panel-version style=font-size:smaller>v__PANEL_VERSION__</span></h1><div class="form-container container"><h2><span class=material-symbols-rounded>settings</span> Settings</h2><form id=configForm class=configForm onsubmit=updateSettings(event)><details class=details><summary><h3>VLESS - Trojan</h3></summary><div class=section><div class=form-control><label for=remoteDNS> Remote DNS</label><div><input type=url id=remoteDNS name=remoteDNS required></div></div><div class=form-control><label for=localDNS> Local DNS</label><div><input type=text id=localDNS name=localDNS pattern=^(localhost|(?:\\d{1,3}\\.){3}\\d{1,3})$ title="Please enter a valid DNS IP Address!" required></div></div><div class=form-control><label for=VLTRFakeDNS> Fake DNS</label><div><select id=VLTRFakeDNS name=VLTRFakeDNS><option value=true>Enabled</option><option value=false>Disabled</option></select></div></div><div class=form-control><label for=proxyIPs> Proxy IPs / Domains</label><div><textarea type=text id=proxyIPs name=proxyIPs rows=1></textarea></div></div><div class=form-control><label for=outProxy> Chain Proxy</label><div><input type=text id=outProxy name=outProxy></div></div><div class=form-control><label for=cleanIPs> Clean IPs / Domains <a class=scanner href=https://github.com/bia-pain-bache/Cloudflare-Clean-IP-Scanner title=Scanner target=_blank rel="noopener noreferrer"><span class=material-symbols-rounded>open_in_new</span></a></label><div><textarea type=text id=cleanIPs name=cleanIPs rows=1></textarea></div></div><div class=form-control><label for=VLTRenableIPv6> IPv6</label><div><select id=VLTRenableIPv6 name=VLTRenableIPv6><option value=true>Enabled</option><option value=false>Disabled</option></select></div></div><div class=form-control><label for=customCdnAddrs> Custom CDN Addrs</label><div><textarea type=text id=customCdnAddrs name=customCdnAddrs rows=1></textarea></div></div><div class=form-control><label for=customCdnHost> Custom CDN Host</label><div><input type=text id=customCdnHost name=customCdnHost></div></div><div class=form-control><label for=customCdnSni> Custom CDN SNI</label><div><input type=text id=customCdnSni name=customCdnSni></div></div><div class=form-control><label for=bestVLTRInterval> Best Interval</label><div><input type=number id=bestVLTRInterval name=bestVLTRInterval min=10 max=90></div></div><div class=form-control><label for=VLConfigs> Protocols</label><div><div class="protocols inner-container"><div class=proto><input type=checkbox id=VLConfigs name=VLConfigs value=true onchange=handleProtocolChange(event)> <label for=VLConfigs>VLESS</label></div><div class=proto><input type=checkbox id=TRConfigs name=TRConfigs value=true onchange=handleProtocolChange(event)> <label for=TRConfigs>Trojan</label></div></div></div></div><div class=form-control><label for=tls-ports> TLS Ports</label><div><div id=tls-ports class="rules inner-container"></div></div></div><div id=none-tls class=form-control style=display:none><label for=non-tls-ports> None TLS Ports</label><div><div id=non-tls-ports class="rules inner-container"></div></div></div></div></details><details><summary><h3>Fragment</h3></summary><div class=section><div class=form-control><label for=fragmentLengthMin> Length</label><div class=min-max><input type=number id=fragmentLengthMin name=fragmentLengthMin min=10 required> <span>-</span> <input type=number id=fragmentLengthMax name=fragmentLengthMax max=500 required></div></div><div class=form-control><label for=fragmentIntervalMin> Interval</label><div class=min-max><input type=number id=fragmentIntervalMin name=fragmentIntervalMin min=1 max=30 required> <span>-</span> <input type=number id=fragmentIntervalMax name=fragmentIntervalMax min=1 max=30 required></div></div><div class=form-control><label for=fragmentPackets> Packets</label><div><select id=fragmentPackets name=fragmentPackets><option value=tlshello>tlshello</option><option value=1-1>1-1</option><option value=1-2>1-2</option><option value=1-3>1-3</option><option value=1-5>1-5</option></select></div></div></div></details><details><summary><h3>Warp General</h3></summary><div class=section><div class=form-control><label for=warpEndpoints> Endpoints <a class=scanner href=https://github.com/bia-pain-bache/BPB-Warp-Scanner title=Scanner target=_blank rel="noopener noreferrer"><span class=material-symbols-rounded>open_in_new</span></a></label><div><textarea type=text id=warpEndpoints name=warpEndpoints rows=1 required></textarea></div></div>\x3c!-- <div class="form-control">\n                        <label for="endpointScanner">\n                             Scan Endpoint\n                        </label>\n                        <div>\n                            <button type="button" id="endpointScanner" class="button reverse">\n                                </button>\n                        </div>\n                    </div> --\x3e<div class=form-control><label for=warpFakeDNS> Fake DNS</label><div><select id=warpFakeDNS name=warpFakeDNS><option value=true>Enabled</option><option value=false>Disabled</option></select></div></div><div class=form-control><label for=warpEnableIPv6> IPv6</label><div><select id=warpEnableIPv6 name=warpEnableIPv6><option value=true>Enabled</option><option value=false>Disabled</option></select></div></div><div class=form-control><label for=bestWarpInterval> Best Interval</label><div><input type=number id=bestWarpInterval name=bestWarpInterval min=10 max=90></div></div><div class=form-control><label for=refreshBtn> Warp Accounts</label><div><button type=button class="button reverse" onclick=updateWarpConfigs()>Update<span id=warp-update class=material-symbols-rounded>autorenew</span></button></div></div></div></details><details><summary><h3>Warp PRO</h3></summary><div class=section><div class=container><div class=section><h3><span class=material-symbols-rounded>tune</span> MahsaNG - Hiddify</h3><div class=form-control><label for=hiddifyNoiseMode> Hiddify Mode</label><div><input type=text id=hiddifyNoiseMode name=hiddifyNoiseMode pattern=^(m[1-6]|h_[0-9A-Fa-f]{2}|g_([0-9A-Fa-f]{2}_){2}[0-9A-Fa-f]{2})$ title="Enter \'m1-m6\', \'h_HEX\', \'g_HEX_HEX_HEX\' which HEX can be between 00 to ff" required></div></div><div class=form-control><label for=knockerNoiseMode> MahsaNG Mode</label><div><input type=text id=knockerNoiseMode name=knockerNoiseMode pattern=^(none|quic|random|[0-9A-Fa-f]+)$ title="Enter \'none\', \'quic\', \'random\', or any HEX string like \'ee0000000108aaaa\'" required></div></div><div class=form-control><label for=noiseCountMin> Noise Count</label><div class=min-max><input type=number id=noiseCountMin name=noiseCountMin min=1 required> <span>-</span> <input type=number id=noiseCountMax name=noiseCountMax min=1 required></div></div><div class=form-control><label for=noiseSizeMin> Noise Size</label><div class=min-max><input type=number id=noiseSizeMin name=noiseSizeMin min=1 required> <span>-</span> <input type=number id=noiseSizeMax name=noiseSizeMax min=1 required></div></div><div class=form-control><label for=noiseDelayMin> Noise Delay</label><div class=min-max><input type=number id=noiseDelayMin name=noiseDelayMin min=1 required> <span>-</span> <input type=number id=noiseDelayMax name=noiseDelayMax min=1 required></div></div></div></div><div class=container><div class=section><h3><span class=material-symbols-rounded>tune</span> Clash - Amnezia</h3><div class=form-control><label for=amneziaNoiseCount> Noise Count</label><div><input type=number id=amneziaNoiseCount name=amneziaNoiseCount min=1 required></div></div><div class=form-control><label for=amneziaNoiseSizeMin> Noise Size</label><div class=min-max><input type=number id=amneziaNoiseSizeMin name=amneziaNoiseSizeMin min=1 required> <span>-</span> <input type=number id=amneziaNoiseSizeMax name=amneziaNoiseSizeMax min=1 required></div></div></div></div><div id=udp-noise-container class=container><div class=header-container><h3><span class=material-symbols-rounded>tune</span> v2rayNG - v2rayN</h3><button type=button class=add-noise onclick=addUdpNoise(true)><i class="fa fa-plus-circle fa-2x" aria-hidden=true></i></button></div><div id=noises class=section></div></div></div></details><details><summary><h3>Routing Rules</h3></summary><div class=section><div class=container><h3><span class=material-symbols-rounded>tune</span> Preset Rules</h3><div class=form-control><label for=bypass-rules> Bypass rules</label><div><div id=bypass-rules class="rules inner-container"><div class=routing><input type=checkbox id=bypassLAN name=bypassLAN value=true> <label for=bypassLAN>LAN</label></div><div class=routing><input type=checkbox id=bypassIran name=bypassIran value=true> <label for=bypassIran>Iran</label></div><div class=routing><input type=checkbox id=bypassChina name=bypassChina value=true> <label for=bypassChina>China</label></div><div class=routing><input type=checkbox id=bypassRussia name=bypassRussia value=true> <label for=bypassRussia>Russia</label></div></div></div></div><div class=form-control><label for=block-rules> Block rules</label><div><div id=block-rules class="rules inner-container"><div class=routing><input type=checkbox id=blockAds name=blockAds value=true> <label for=blockAds>Ads.</label></div><div class=routing><input type=checkbox id=blockPorn name=blockPorn value=true> <label for=blockPorn>Porn</label></div><div class=routing><input type=checkbox id=blockUDP443 name=blockUDP443 value=true> <label for=blockUDP443>QUIC</label></div></div></div></div></div><div class=container><h3><span class=material-symbols-rounded>tune</span> Custom Rules</h3><div class=form-control><label for=customBypassRules> Bypass IPs / Domains</label><div><textarea type=text id=customBypassRules name=customBypassRules rows=1></textarea></div></div><div class=form-control><label for=customBlockRules> Block IPs / Domains</label><div><textarea type=text id=customBlockRules name=customBlockRules rows=1></textarea></div></div></div><div class=container><h3><span class=material-symbols-rounded>tune</span> Sanction Rules</h3><div class=form-control><label for=antiSanctionDNS> Anti Sanction DNS</label><div><input type=text id=antiSanctionDNS name=antiSanctionDNS required></div></div><div class=form-control><label for=bypass-sanction-rules> Bypass rules</label><div><div id=bypass-sanction-rules class="rules inner-container"><div class=routing><input type=checkbox id=bypassOpenAi name=bypassOpenAi value=true> <label for=bypassOpenAi>ChatGPT</label></div><div class=routing><input type=checkbox id=bypassMicrosoft name=bypassMicrosoft value=true> <label for=bypassMicrosoft>Microsoft</label></div><div class=routing><input type=checkbox id=bypassOracle name=bypassOracle value=true> <label for=bypassOracle>Oracle</label></div><div class=routing><input type=checkbox id=bypassDocker name=bypassDocker value=true> <label for=bypassDocker>Docker</label></div><div class=routing><input type=checkbox id=bypassAdobe name=bypassAdobe value=true> <label for=bypassAdobe>Adobe</label></div><div class=routing><input type=checkbox id=bypassEpicGames name=bypassEpicGames value=true> <label for=bypassEpicGames>Epic Games</label></div><div class=routing><input type=checkbox id=bypassIntel name=bypassIntel value=true> <label for=bypassIntel>Intel</label></div><div class=routing><input type=checkbox id=bypassAmd name=bypassAmd value=true> <label for=bypassAmd>AMD</label></div><div class=routing><input type=checkbox id=bypassNvidia name=bypassNvidia value=true> <label for=bypassNvidia>Nvidia</label></div><div class=routing><input type=checkbox id=bypassAsus name=bypassAsus value=true> <label for=bypassAsus>Asus</label></div><div class=routing><input type=checkbox id=bypassHp name=bypassHp value=true> <label for=bypassHp>HP</label></div><div class=routing><input type=checkbox id=bypassLenovo name=bypassLenovo value=true> <label for=bypassLenovo>Lenovo</label></div></div></div></div><div class=form-control><label for=customBypassSanctionRules> Bypass Domains</label><div><textarea type=text id=customBypassSanctionRules name=customBypassSanctionRules rows=1></textarea></div></div></div></div></details><div id=apply class="form-control apply"><button type=submit id=applyButton class="button disabled apply-settings" form=configForm>Apply Settings </button> <button type=button class=panel-settings title="Reset panel settings to default" onclick=resetSettings()><i id=refresh-btn class="fa fa-refresh fa-2x" aria-hidden=true></i></button> <button type=button class=panel-settings title="Export panel settings" onclick=exportSettings()><i class="fa fa-cloud-download fa-2x" aria-hidden=true></i></button> <button type=button class=panel-settings title="Import panel settings" onclick=importSettings()><i class="fa fa-cloud-upload fa-2x" aria-hidden=true></i> <input type=file id=fileInput accept=.dat style=display:none onchange=uploadSettings(event)></button></div></form></div><div class="form-container container"><h2><span class=material-symbols-rounded>share</span> Subscriptions - Configs</h2><details class=details><summary><h3>Normal</h3></summary><div class=table-container><table id=normal-configs-table><tr><th>Application</th><th>Subscription</th></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>v2rayNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>MahsaNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN-PRO</span></div><div><span class=material-symbols-rounded>verified</span> <span>Shadowrocket</span></div><div><span class=material-symbols-rounded>verified</span> <span>Streisand</span></div><div><span class=material-symbols-rounded>verified</span> <span>Hiddify</span></div></td><td><button title="Display QR code" onclick="openQR(\'normal\', \'\', \'Normal\', \'Normal Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'normal\', \'\', \'Normal\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>husi</span></div><div><span class=material-symbols-rounded>verified</span> <span>Nekobox</span></div><div><span class=material-symbols-rounded>verified</span> <span>Nekoray</span></div><div><span class=material-symbols-rounded>verified</span> <span>Karing</span></div></td><td><button title="Display QR code" onclick="openQR(\'normal\', \'singbox\', \'Normal\', \'Normal Subscription\', true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'normal\', \'singbox\', \'Normal\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr></table></div></details><details><summary><h3>Full Normal</h3></summary><div class=table-container><table id=full-normal-configs-table><tr><th>Application</th><th>Subscription</th></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>v2rayNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>MahsaNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN-PRO</span></div><div><span class=material-symbols-rounded>verified</span> <span>Streisand</span></div></td><td><button title="Display QR code" onclick="openQR(\'full-normal\', \'xray\', \'Full Normal\', \'Full normal Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'full-normal\', \'xray\', \'Full Normal\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>sing-box</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (sing-box)</span></div></td><td><button title="Display QR code" onclick="openQR(\'full-normal\', \'sfa\', \'Full Normal\', \'Full normal Subscription\', true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'full-normal\', \'sfa\', \'Full Normal\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'full-normal\', \'sfa\')"><span class=material-symbols-rounded>download</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Clash Meta</span></div><div><span class=material-symbols-rounded>verified</span> <span>Clash Verge</span></div><div><span class=material-symbols-rounded>verified</span> <span>FlClash</span></div><div><span class=material-symbols-rounded>verified</span> <span>Stash</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (mihomo)</span></div></td><td><button title="Display QR code" onclick="openQR(\'full-normal\', \'clash\', \'Full Normal\', \'Full normal Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'full-normal\', \'clash\', \'Full Normal\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'full-normal\', \'clash\')"><span class=material-symbols-rounded>download</span></button></td></tr></table></div></details><details><summary><h3>Fragment</h3></summary><div class=table-container><table id=frag-sub-table><thead><th>Application</th><th>Subscription</th></thead><tr><td><div><span class=material-symbols-rounded>verified</span> <span>v2rayNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>MahsaNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN-PRO</span></div><div><span class=material-symbols-rounded>verified</span> <span>Streisand</span></div></td><td><button title="Display QR code" onclick="openQR(\'fragment\', \'\', \'Fragment\', \'Fragment Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'fragment\', \'\', \'Fragment\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>sing-box</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (sing-box)</span></div></td><td><button title="Display QR code" onclick="openQR(\'fragment\', \'sfa\', \'Fragment\', \'Fragment Subscription\', true, false)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'fragment\', \'sfa\', \'Fragment\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'fragment\', \'sfa\')"><span class=material-symbols-rounded>download</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Hiddify</span></div></td><td><button title="Display QR code" onclick="openQR(\'fragment\', \'hiddify-frag\', \'Fragment\', \'Fragment Subscription\', false, true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'fragment\', \'hiddify-frag\', \'Fragment\', true)"><span class=material-symbols-rounded>content_copy</span></button></td></tr></table></div></details><details><summary><h3>Warp</h3></summary><div class=table-container><table id=warp-configs-table><tr><th>Application</th><th>Subscription</th></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>v2rayNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN</span></div><div><span class=material-symbols-rounded>verified</span> <span>Streisand</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp\', \'xray\', \'Warp\', \'Warp Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp\', \'xray\', \'Warp\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>sing-box</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (sing-box)</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp\', \'singbox\', \'Warp\', \'Warp Subscription\', true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp\', \'singbox\', \'Warp\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'warp\', \'singbox\')"><span class=material-symbols-rounded>download</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Hiddify</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp\', \'hiddify\', \'Warp\', \'Warp Subscription\', false, true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp\', \'hiddify\', \'Warp\', true)"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Clash Meta</span></div><div><span class=material-symbols-rounded>verified</span> <span>Clash Verge</span></div><div><span class=material-symbols-rounded>verified</span> <span>FlClash</span></div><div><span class=material-symbols-rounded>verified</span> <span>Stash</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (mihomo)</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp\', \'clash\', \'Warp\', \'Warp Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp\', \'clash\', \'Warp\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'warp\', \'clash\')"><span class=material-symbols-rounded>download</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Wireguard</span></div></td><td><button title="Download configs zip" id=dlConfigsBtn type=button onclick=downloadWarpConfigs(false)><span class=material-symbols-rounded>download</span></button></td></tr></table></div></details><details><summary><h3>Warp PRO</h3></summary><div class=table-container><table id=warp-pro-configs-table><tr><th>Application</th><th>Subscription</th></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>v2rayNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN</span></div><div><span class=material-symbols-rounded>verified</span> <span>Streisand</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp-pro\', \'xray-pro\', \'Warp Pro\', \'Warp Pro Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp-pro\', \'xray-pro\', \'Warp Pro\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>MahsaNG</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN-PRO</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp-pro\', \'xray-knocker\', \'Warp Pro\', \'Warp Pro Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp-pro\', \'xray-knocker\', \'Warp Pro\')"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Clash Meta</span></div><div><span class=material-symbols-rounded>verified</span> <span>Clash Verge</span></div><div><span class=material-symbols-rounded>verified</span> <span>FlClash</span></div><div><span class=material-symbols-rounded>verified</span> <span>Stash</span></div><div><span class=material-symbols-rounded>verified</span> <span>v2rayN (mihomo)</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp-pro\', \'clash-pro\', \'Warp Pro\', \'Warp Pro Subscription\')"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp-pro\', \'clash-pro\', \'Warp Pro\')"><span class=material-symbols-rounded>content_copy</span></button> <button title="Download config" onclick="dlURL(\'warp-pro\', \'clash-pro\')"><span class=material-symbols-rounded>download</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Hiddify</span></div></td><td><button title="Display QR code" onclick="openQR(\'warp-pro\', \'hiddify-pro\', \'Warp Pro\', \'Warp Pro Subscription\', false, true)"><span class=material-symbols-rounded>qr_code</span></button> <button title="Copy subscription URL" onclick="subURL(\'warp-pro\', \'hiddify-pro\', \'Warp Pro\', true)"><span class=material-symbols-rounded>content_copy</span></button></td></tr><tr><td><div><span class=material-symbols-rounded>verified</span> <span>Amnezia</span></div><div><span class=material-symbols-rounded>verified</span> <span>WG Tunnel</span></div></td><td><button title="Download configs zip" id=dlAmneziaConfigsBtn type=button onclick=downloadWarpConfigs(true)><span class=material-symbols-rounded>download</span></button></td></tr></table></div></details></div><div class="form-container container"><div id=resetPassModal class=modal><div class=modal-content><span class=close id=closeResetPass onclick=closeResetPass()>&times;</span><form id=passwordChangeForm onsubmit=resetPassword(event)><h2>Change Password</h2><div class=section><div class=form-control><label for=newPassword>New Password</label><div class=password-wrapper><input type=password id=newPassword name=newPassword required> <span class="material-symbols-rounded toggle-password">visibility_off</span></div></div><div class=form-control><label for=confirmPassword>Confirm Password</label><div class=password-wrapper><input type=password id=confirmPassword name=confirmPassword required> <span class="material-symbols-rounded toggle-password">visibility_off</span></div></div></div><div id=passwordError class=password-error></div><button id=changePasswordBtn type=submit class=button>Change Password</button></form></div></div><div id=qrModal class=modalQR><div class=modal-content class=modal-content><div class=modal-header><span id=closeQR class=close onclick=closeQR()>&times;</span> <span id=qrcodeTitle class=qr-title></span></div><div id=qrcode-container></div></div></div><div class=header-container><h2><span class=material-symbols-rounded>fingerprint</span> My IP</h2><button type=button id=refresh-geo-location class=refresh-geo-location onclick=fetchIPInfo()><i class="fa fa-refresh fa-2x refresh-my-ip" aria-hidden=true></i></button></div><div class=my-ip><table id=ips class=my-ip><thead><th>Information</th><th>Cloudflare targets</th><th>Other targets</th></thead><tbody><tr><td>IP</td><td id=cf-ip></td><td id=ip></td></tr><tr><td>Country</td><td id=cf-country></td><td id=country></td></tr><tr><td>City</td><td id=cf-city></td><td id=city></td></tr><tr><td>ISP</td><td id=cf-isp></td><td id=isp></td></tr></tbody></table></div></div><div class=footer-container><div class=footer><div class=github-container><i class="fa fa-github"></i> <a class=link id=github-link href=https://github.com/bia-pain-bache/BPB-Worker-Panel target=_blank>Github</a></div><button id=openResetPass class=button onclick=openResetPass()>Change Password <span class=material-symbols-rounded>key_vertical</span></button> <button type=button id=logout class=logout title="Log out" onclick=logout(event)><i class="fa fa-power-off fa-2x" aria-hidden=true></i></button></div></div><button id=darkModeToggle class=floating-button onclick=darkModeToggle()><i id=modeIcon class="fa fa-2x fa-adjust dark-mode" aria-hidden=true></i></button><script type=module defer=defer>import { polyfillCountryFlagEmojis } from "https://cdn.skypack.dev/country-flag-emoji-polyfill";\n        polyfillCountryFlagEmojis();<\/script><script src=https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js><\/script><script>"enabled"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode");const form=document.getElementById("configForm"),[selectElements,numInputElements,inputElements,textareaElements,checkboxElements]=["select","input[type=number]","input:not([type=file])","textarea","input[type=checkbox]"].map(e=>form.querySelectorAll(e)),defaultHttpsPorts=[443,8443,2053,2083,2087,2096],defaultHttpPorts=[80,8080,8880,2052,2082,2086,2095];function initiatePanel(e){const{VLConfigs:t,TRConfigs:n,ports:o,xrayUdpNoises:a}=e;Object.assign(globalThis,{activeProtocols:t+n,activeTlsPorts:o.filter(e=>defaultHttpsPorts.includes(e)),xrayNoiseCount:a.length}),populatePanel(e),renderPortsBlock(o.map(Number)),renderUdpNoiseBlock(a),initiateForm(),fetchIPInfo()}function populatePanel(e){selectElements.forEach(t=>t.value=e[t.id]),checkboxElements.forEach(t=>t.checked=e[t.id]),inputElements.forEach(t=>t.value=e[t.id]),textareaElements.forEach(t=>{const n=t.id,o=document.getElementById(n),a=e[n]?.join("\\r\\n"),s=e[n].length;o.style.height="auto",s&&(o.rows=s),o.value=a})}function initiateForm(){const e=document.getElementById("configForm");globalThis.initialFormData=new FormData(e),enableApplyButton(),e.addEventListener("input",enableApplyButton),e.addEventListener("change",enableApplyButton);document.querySelectorAll("textarea").forEach(e=>{e.addEventListener("input",function(){this.style.height="auto",this.style.height=`${this.scrollHeight}px`})})}function hasFormDataChanged(){const e=document.getElementById("configForm"),t=e=>Object.fromEntries(e.entries()),n=new FormData(e),o=t(globalThis.initialFormData),a=t(n);return JSON.stringify(o)!==JSON.stringify(a)}function enableApplyButton(){const e=document.getElementById("applyButton"),t=hasFormDataChanged();e.disabled=!t,e.classList.toggle("disabled",!t)}function openResetPass(){document.getElementById("resetPassModal").style.display="block",document.body.style.overflow="hidden"}function closeResetPass(){document.getElementById("resetPassModal").style.display="none",document.body.style.overflow=""}function closeQR(){const e=document.getElementById("qrModal"),t=document.getElementById("qrcode-container");e.style.display="none",t.lastElementChild.remove()}function darkModeToggle(){const e=document.body.classList.toggle("dark-mode");localStorage.setItem("darkMode",e?"enabled":"disabled")}async function getIpDetails(e){try{const t=await fetch("/panel/my-ip",{method:"POST",body:e}),n=await t.json(),{success:o,status:a,message:s,body:r}=n;if(!o)throw new Error(`status ${a} - ${s}`);return r}catch(e){console.error("Fetching IP error:",e.message||e)}}async function fetchIPInfo(){const e=document.getElementById("refresh-geo-location").querySelector("i");e.classList.add("fa-spin");const t=(e="-",t="-",n="-",o="-",a="-",s)=>{const r="-"!==n?String.fromCodePoint(...[...n].map(e=>127462+e.charCodeAt(0)-65)):"";document.getElementById(s?"cf-ip":"ip").textContent=e,document.getElementById(s?"cf-country":"country").textContent=t+" "+r,document.getElementById(s?"cf-city":"city").textContent=o,document.getElementById(s?"cf-isp":"isp").textContent=a};try{const n=await fetch("https://ipwho.is/?nocache="+Date.now(),{cache:"no-store"}),o=await n.json(),{success:a,ip:s,message:r}=o;if(!a)throw new Error(`Fetch Other targets IP failed at ${n.url} - ${r}`);const{country:i,countryCode:l,city:c,isp:d}=await getIpDetails(s);t(s,i,l,c,d),e.classList.remove("fa-spin")}catch(e){console.error("Fetching IP error:",e.message||e)}try{const n=await fetch("https://ipv4.icanhazip.com/?nocache="+Date.now(),{cache:"no-store"});if(!n.ok){const e=await n.text();throw new Error(`Fetch Cloudflare targets IP failed with status ${n.status} at ${n.url} - ${e}`)}const o=await n.text(),{country:a,countryCode:s,city:r,isp:i}=await getIpDetails(o);t(o,a,s,r,i,!0),e.classList.remove("fa-spin")}catch(e){console.error("Fetching IP error:",e.message||e)}}function downloadWarpConfigs(e){const t=e?"?app=amnezia":"";window.location.href="/panel/get-warp-configs"+t}function generateSubUrl(e,t,n,o,a){const s=new URL(window.location.href);return s.pathname=`/sub/${e}/${globalThis.subPath}`,t&&s.searchParams.append("app",t),n&&(s.hash=` BPB ${n}`),a?`sing-box://import-remote-profile?url=${s.href}`:o?`hiddify://import/${s.href}`:s.href}function subURL(e,t,n,o,a){copyToClipboard(generateSubUrl(e,t,n,o,a))}async function dlURL(e,t){const n=generateSubUrl(e,t);try{const e=await fetch(n),t=await e.text();if(!e.ok)throw new Error(`status ${e.status} at ${e.url} - ${t}`);downloadJSON(t,"config.json")}catch(e){console.error("Download error:",e.message||e)}}function downloadJSON(e,t){const n=new Blob([e],{type:"text/plain"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function exportSettings(){const e=validateSettings(),t=JSON.stringify(e,null,4);downloadJSON(btoa(t),"BPB-settings.dat")}function importSettings(e){const t=document.getElementById("fileInput");t.value="",t.click()}async function uploadSettings(e){const t=e.target.files[0];if(t)try{const n=await t.text(),o=atob(n),a=JSON.parse(o);updateSettings(e,a),initiatePanel(a)}catch(e){console.error("Failed to import settings:",e.message)}}function openQR(e,t,n,o,a,s){const r=document.getElementById("qrModal"),i=document.getElementById("qrcode-container"),l=generateSubUrl(e,t,n,s,a);document.getElementById("qrcodeTitle").textContent=o,r.style.display="block";let c=document.createElement("div");c.className="qrcode",c.style.padding="2px",c.style.backgroundColor="#ffffff",new QRCode(c,{text:l,width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),i.appendChild(c)}function copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>alert(" Copied to clipboard:\\n\\n"+e)).catch(e=>console.error("Failed to copy:",e))}async function updateWarpConfigs(){if(!confirm(" Are you sure?"))return;const e=document.getElementById("warp-update");document.body.style.cursor="wait",e.classList.add("fa-spin");try{const t=await fetch("/panel/update-warp",{method:"POST",credentials:"include"}),{success:n,status:o,message:a}=await t.json();if(document.body.style.cursor="default",e.classList.remove("fa-spin"),!n)throw alert(` An error occured, Please try again!\\n ${a}`),new Error(`status ${o} - ${a}`);alert(" Warp configs updated successfully!")}catch(e){console.error("Updating Warp configs error:",e.message||e)}}function handleProtocolChange(e){return e.target.checked?(globalThis.activeProtocols++,!0):(globalThis.activeProtocols--,0===globalThis.activeProtocols?(e.preventDefault(),e.target.checked=!e.target.checked,alert(" At least one Protocol should be selected!"),globalThis.activeProtocols++,!1):void 0)}function handlePortChange(e){const t=Number(e.target.name);return e.target.checked?(globalThis.activeTlsPorts.push(t),!0):(globalThis.activeTlsPorts=globalThis.activeTlsPorts.filter(e=>e!==t),0===globalThis.activeTlsPorts.length?(e.preventDefault(),e.target.checked=!e.target.checked,alert(" At least one TLS port should be selected!"),globalThis.activeTlsPorts.push(t),!1):void 0)}function resetSettings(){if(!confirm(" This will reset all panel settings.\\n\\n Are you sure?"))return;const e=document.getElementById("refresh-btn");e.classList.add("fa-spin");document.body.style.cursor="wait",fetch("/panel/reset-settings",{method:"POST",body:JSON.stringify({resetSettings:!0}),credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{const{success:n,status:o,message:a,body:s}=t;if(document.body.style.cursor="default",e.classList.remove("fa-spin"),!n)throw new Error(`status ${o} - ${a}`);initiatePanel(s),alert(" Panel settings reset to default successfully!")}).catch(e=>console.error("Reseting settings error:",e.message||e))}function validateSettings(){const e=document.getElementById("configForm"),t=new FormData(e),n=[],o=["udpXrayNoiseMode","udpXrayNoisePacket","udpXrayNoiseDelayMin","udpXrayNoiseDelayMax","udpXrayNoiseCount"].map(e=>t.getAll(e)),[a,s,r,i,l]=o;a.forEach((e,t)=>{n.push({type:e,packet:s[t],delay:`${r[t]}-${i[t]}`,count:l[t]})});if(![validateMultipleHostNames(["cleanIPs","customCdnAddrs","customCdnSni","customCdnHost","customBypassRules","customBlockRules","customBypassSanctionRules"]),validateProxyIPs(),validateWarpEndpoints(),validateMinMax(),validateChainProxy(),validateCustomCdn(),validateXrayNoises(o),validateSanctionDns()].every(Boolean))return!1;const c=Object.fromEntries(t.entries());c.xrayUdpNoises=n;const d=[...defaultHttpPorts,...defaultHttpsPorts];return c.ports=d.reduce((e,n)=>(t.has(n.toString())&&e.push(n),e),[]),checkboxElements.forEach(e=>{c[e.id]=t.has(e.id)}),selectElements.forEach(e=>{let t=c[e.id];"true"===t&&(t=!0),"false"===t&&(t=!1),c[e.id]=t}),numInputElements.forEach(e=>{c[e.id]=Number(c[e.id])}),textareaElements.forEach(e=>{const t=e.id,n=c[t];c[t]=""===n?[]:n.split("\\n").map(e=>e.trim()).filter(Boolean)}),c}function updateSettings(e,t){e.preventDefault(),e.stopPropagation();const n=t||validateSettings(),o=document.getElementById("applyButton");document.body.style.cursor="wait";const a=o.value;o.value=" Loading...",fetch("/panel/update-settings",{method:"POST",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const{success:t,status:n,message:o}=e;if(401===n&&(alert(" Session expired! Please login again."),window.location.href="/login"),!t)throw new Error(`status ${n} - ${o}`);initiateForm(),alert(" Settings applied successfully!")}).catch(e=>console.error("Update settings error:",e.message||e)).finally(()=>{document.body.style.cursor="default",o.value=a})}function validateSanctionDns(){const e=document.getElementById("antiSanctionDNS").value.trim();let t;try{t=new URL(e).hostname}catch{t=e}return!!isValidHostName(t,!1)||(alert(" Invalid IPs or Domains.\\n"+t),!1)}function isValidHostName(e,t){const n=t?/:(?:6553[0-5]|655[0-2]\\d|65[0-4]\\d{2}|6[0-4]\\d{3}|[1-5]?\\d{1,4})$/.source:"$",o=new RegExp(/^\\[(?:(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?:[a-fA-F0-9]{1,4}:){1,7}:|(?:[a-fA-F0-9]{1,4}:){1,6}:[a-fA-F0-9]{1,4}|(?:[a-fA-F0-9]{1,4}:){1,5}(?::[a-fA-F0-9]{1,4}){1,2}|(?:[a-fA-F0-9]{1,4}:){1,4}(?::[a-fA-F0-9]{1,4}){1,3}|(?:[a-fA-F0-9]{1,4}:){1,3}(?::[a-fA-F0-9]{1,4}){1,4}|(?:[a-fA-F0-9]{1,4}:){1,2}(?::[a-fA-F0-9]{1,4}){1,5}|[a-fA-F0-9]{1,4}:(?::[a-fA-F0-9]{1,4}){1,6}|:(?::[a-fA-F0-9]{1,4}){1,7})\\](?:\\/(?:12[0-8]|1[01]?\\d|[0-9]?\\d))?/.source+n,"gm"),a=new RegExp(/^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)(?:\\/(?:\\d|[12]\\d|3[0-2]))?/.source+n,"gm"),s=new RegExp(/^(?=.{1,253}$)(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)\\.)+[a-zA-Z]{2,63}/.source+n,"gm");return a.test(e)||o.test(e)||s.test(e)}function validateMultipleHostNames(e){const t=[];e.forEach(e=>t.push(...(e=>document.getElementById(e).value?.split("\\n").filter(Boolean))(e)));const n=t?.filter(e=>e&&!isValidHostName(e.trim()));return!n.length||(alert(" Invalid IPs or Domains.\\n Please enter each IP/domain in a new line.\\n\\n"+n.map(e=>" "+e).join("\\n")),!1)}function validateProxyIPs(){const e=document.getElementById("proxyIPs").value?.split("\\n").filter(Boolean).map(e=>e.trim()),t=e?.filter(e=>!isValidHostName(e)&&!isValidHostName(e,!0));return!t.length||(alert(" Invalid proxy IPs.\\n Please enter each IP/domain in a new line.\\n\\n"+t.map(e=>" "+e).join("\\n")),!1)}function validateWarpEndpoints(){const e=document.getElementById("warpEndpoints").value?.split("\\n"),t=e?.filter(e=>e&&!isValidHostName(e.trim(),!0));return!t.length||(alert(" Invalid endpoint.\\n\\n"+t.map(e=>" "+e).join("\\n")),!1)}function validateMinMax(){const[e,t,n,o,a,s,r,i,l,c]=["fragmentLengthMin","fragmentLengthMax","fragmentIntervalMin","fragmentIntervalMax","noiseCountMin","noiseCountMax","noiseSizeMin","noiseSizeMax","noiseDelayMin","noiseDelayMax"].map(e=>parseInt(document.getElementById(e).value,10));return!(e>=t||n>o||a>s||r>i||l>c)||(alert(" Minimum should be smaller or equal to Maximum!"),!1)}function validateChainProxy(){const e=document.getElementById("outProxy").value?.trim(),t=/vless:\\/\\/[^\\s@]+@[^\\s:]+:[^\\s]+/.test(e),n=/security=/.test(e),o=/^(http|socks):\\/\\/(?:([^:@]+):([^:@]+)@)?([^:@]+):(\\d+)$/.test(e),a=/security=(tls|none|reality)/,s=a.test(e),r=/type=(tcp|grpc|ws)/.test(e);if(!(t&&(n&&s||!n)&&r)&&!o&&e)return alert(" Invalid Config!\\n - The chain proxy should be VLESS, Socks or Http!\\n - VLESS transmission should be GRPC,WS or TCP\\n - VLESS security should be TLS,Reality or None\\n - socks or http should be like:\\n + (socks or http)://user:pass@host:port\\n + (socks or http)://host:port"),!1;let i=e.match(a);const l=i?.[1]||null;i=e.match(/:(\\d+)\\?/);return!t||"tls"!==l||"443"===(i?.[1]||null)||(alert(" VLESS TLS port can be only 443 to be used as a proxy chain!"),!1)}function validateCustomCdn(){const e=document.getElementById("customCdnHost").value,t=document.getElementById("customCdnSni").value,n=document.getElementById("customCdnAddrs").value?.split("\\n").filter(Boolean);return!((n.length||""!==e||""!==t)&&!(n.length&&e&&t))||(alert(\' All "Custom" fields should be filled or deleted together!\'),!1)}function validateXrayNoises(e){const[t,n,o,a]=e,s=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;let r=!1;return t.forEach((e,t)=>{if(o[t]>a[t])return alert(" The minimum noise delay should be smaller or equal to maximum!"),void(r=!0);switch(e){case"base64":s.test(n[t])||(alert(" The Base64 noise packet is not a valid base64 value!"),r=!0);break;case"rand":{/^\\d+-\\d+$/.test(n[t])||(alert(" The Random noise packet should be a range like 0-10 or 10-30!"),r=!0);const[e,o]=n[t].split("-").map(Number);e>o&&(alert(" The minimum Random noise packet should be smaller or equal to maximum!"),r=!0);break}case"hex":/^(?=(?:[0-9A-Fa-f]{2})*$)[0-9A-Fa-f]+$/.test(n[t])||(alert(" The Hex noise packet is not a valid hex value! It should have even length and consisted of 0-9, a-f and A-F."),r=!0)}}),!r}function logout(e){e.preventDefault(),fetch("/logout",{method:"GET",credentials:"same-origin"}).then(e=>e.json()).then(e=>{const{success:t,status:n,message:o}=e;if(!t)throw new Error(`status ${n} - ${o}`);window.location.href="/login"}).catch(e=>console.error("Logout error:",e.message||e))}function resetPassword(e){e.preventDefault();const t=document.getElementById("resetPassModal"),n=document.getElementById("newPassword"),o=document.getElementById("confirmPassword"),a=document.getElementById("passwordError"),s=n.value;if(s!==o.value)return a.textContent="Passwords do not match",!1;const r=/[A-Z]/.test(s),i=/[0-9]/.test(s),l=s.length>=8;if(!(r&&i&&l))return a.textContent=" Password must contain at least one capital letter, one number, and be at least 8 characters long.",!1;fetch("/panel/reset-password",{method:"POST",headers:{"Content-Type":"text/plain"},body:s,credentials:"same-origin"}).then(e=>e.json()).then(e=>{const{success:t,status:n,message:o}=e;if(!t)throw a.textContent=` ${o}`,new Error(`status ${n} - ${o}`);alert(" Password changed successfully! "),window.location.href="/login"}).catch(e=>console.error("Reset password error:",e.message||e)).finally(()=>{t.style.display="none",document.body.style.overflow=""})}function renderPortsBlock(e){let t="",n="";[...window.origin.includes("workers.dev")?defaultHttpPorts:[],...defaultHttpsPorts].forEach(o=>{const a=e.includes(o)?"checked":"";let s="",r="";defaultHttpsPorts.includes(o)&&(s=\'class="https"\',r=\'onclick="handlePortChange(event)"\');const i=`\\n            <div class="routing">\\n                <input type="checkbox" name=${o} ${s} value="true" ${a} ${r}>\\n                <label>${o}</label>\\n            </div>`;defaultHttpsPorts.includes(o)?n+=i:t+=i}),document.getElementById("tls-ports").innerHTML=n,t&&(document.getElementById("non-tls-ports").innerHTML=t,document.getElementById("none-tls").style.display="flex")}function addUdpNoise(e,t,n){const o=t??globalThis.xrayNoiseCount,a=n||{type:"rand",packet:"50-100",delay:"1-5",count:5},s=document.createElement("div");s.className="inner-container",s.id=`udp-noise-${o+1}`,s.innerHTML=`\\n        <div class="header-container">\\n            <h4>Noise ${o+1}</h4>\\n            <button type="button" class="delete-noise">\\n                <i class="fa fa-minus-circle fa-2x" aria-hidden="true"></i>\\n            </button>      \\n        </div>\\n        <div class="section">\\n            <div class="form-control">\\n                <label> v2ray Mode</label>\\n                <div>\\n                    <select name="udpXrayNoiseMode">\\n                        <option value="base64" ${"base64"===a.type?"selected":""}>Base64</option>\\n                        <option value="rand" ${"rand"===a.type?"selected":""}>Random</option>\\n                        <option value="str" ${"str"===a.type?"selected":""}>String</option>\\n                        <option value="hex" ${"hex"===a.type?"selected":""}>Hex</option>\\n                    </select>\\n                </div>\\n            </div>\\n            <div class="form-control">\\n                <label> Noise Packet</label>\\n                <div>\\n                    <input type="text" name="udpXrayNoisePacket" value="${a.packet}">\\n                </div>\\n            </div>\\n            <div class="form-control">\\n                <label> Noise Delay</label>\\n                <div class="min-max">\\n                    <input type="number" name="udpXrayNoiseDelayMin"\\n                        value="${a.delay.split("-")[0]}" min="1" required>\\n                    <span> - </span>\\n                    <input type="number" name="udpXrayNoiseDelayMax"\\n                        value="${a.delay.split("-")[1]}" min="1" required>\\n                </div>\\n            </div>\\n            <div class="form-control">\\n                <label> Noise Count</label>\\n                <div>\\n                    <input type="number" name="udpXrayNoiseCount" value="${a.count}" min="1" required>\\n                </div>\\n            </div>\\n        </div>`,s.querySelector(".delete-noise").addEventListener("click",deleteUdpNoise),s.querySelector("select").addEventListener("change",generateUdpNoise),document.getElementById("noises").append(s),e&&enableApplyButton(),globalThis.xrayNoiseCount++}function generateUdpNoise(e){const t=e.target.closest(".inner-container").querySelector(\'[name="udpXrayNoisePacket"]\');switch(e.target.value){case"base64":t.value=(e=>{const t=new Uint8Array(Math.ceil(3*e/4));return crypto.getRandomValues(t),btoa(String.fromCharCode(...t)).slice(0,e)})(64);break;case"rand":t.value="50-100";break;case"hex":t.value=(e=>{const t=new Uint8Array(Math.ceil(e/2));return crypto.getRandomValues(t),[...t].map(e=>e.toString(16).padStart(2,"0")).join("").slice(0,e)})(64);break;case"str":t.value=(e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=new Uint8Array(e);return Array.from(crypto.getRandomValues(n),e=>t[e%62]).join("")})(64)}}function deleteUdpNoise(e){if(1===globalThis.xrayNoiseCount)return void alert(" You cannot delete all noises!");confirm(" This will delete the noise.\\n\\n Are you sure?")&&(e.target.closest(".inner-container").remove(),enableApplyButton(),globalThis.xrayNoiseCount--)}function renderUdpNoiseBlock(e){document.getElementById("noises").innerHTML="",e.forEach((e,t)=>{addUdpNoise(!1,t,e)}),globalThis.xrayNoiseCount=e.length}fetch("/panel/settings").then(async e=>e.json()).then(e=>{const{success:t,status:n,message:o,body:a}=e;if(401===n&&!a.isPassSet){const e=document.querySelector(".close");openResetPass(),e.style.display="none"}if(!t)throw new Error(`status ${n} - ${o}`);const{subPath:s,proxySettings:r}=a;globalThis.subPath=encodeURIComponent(s),initiatePanel(r)}).catch(e=>console.error("Data query error:",e.message||e)).finally(()=>{window.onclick=e=>{const t=document.getElementById("qrModal"),n=document.getElementById("qrcode-container");e.target==t&&(t.style.display="none",n.lastElementChild.remove())}}),document.querySelectorAll(".toggle-password").forEach(e=>{e.addEventListener("click",function(){const e=this.previousElementSibling,t="password"===e.type;e.type=t?"text":"password",this.textContent=t?"visibility":"visibility_off"})});<\/script></body></html>'.replace(/__PANEL_VERSION__/g,globalThis.panelVersion);return new Response(n,{headers:{"Content-Type":"text/html"}})}(e,t);case"/panel/settings":return await async function(e,t){try{const r=!!await t.kv.get("pwd");if(!await Re(e,t))return await bt(!1,401,"Unauthorized or expired session.",{isPassSet:r});const{proxySettings:n}=await $e(e,t),a={proxySettings:n,isPassSet:r,subPath:globalThis.subPath};return await bt(!0,200,null,a)}catch(e){throw new Error(e)}}(e,t);case"/panel/update-settings":return await async function(e,t){if("POST"===e.method){if(!await Re(e,t))return await bt(!1,401,"Unauthorized or expired session.");const r=await je(e,t);return await bt(!0,200,null,r)}return await bt(!1,405,"Method not allowed.")}(e,t);case"/panel/reset-settings":return await async function(e,t){if("POST"===e.method){if(!await Re(e,t))return await bt(!1,401,"Unauthorized or expired session.");const r=await je(e,t);return await bt(!0,200,null,r)}return await bt(!1,405,"Method not allowed!")}(e,t);case"/panel/reset-password":return await async function(e,t){let r=await Re(e,t);const n=await t.kv.get("pwd");if(n&&!r)return await bt(!1,401,"Unauthorized.");const a=await e.text();return a===n?await bt(!1,400,"Please enter a new Password."):(await t.kv.put("pwd",a),await bt(!0,200,"Successfully logged in!",null,{"Set-Cookie":"jwtToken=; Path=/; Secure; SameSite=None; Expires=Thu, 01 Jan 1970 00:00:00 GMT","Content-Type":"text/plain"}))}(e,t);case"/panel/my-ip":return await async function(e){const t=await e.text();try{const e=await fetch(`http://ip-api.com/json/${t}?nocache=${Date.now()}`),r=await e.json();return await bt(!0,200,null,r)}catch(e){return console.error("Error fetching IP address:",e),await bt(!1,500,`Error fetching IP address: ${e}`)}}(e);case"/panel/update-warp":return await async function(e,t){if("POST"===e.method){if(!await Re(e,t))return await bt(!1,401,"Unauthorized.");try{return await Fe(t),await bt(!0,200,"Warp configs updated successfully!")}catch(e){return console.log(e),await bt(!1,500,`An error occurred while updating Warp configs: ${e}`)}}return await bt(!1,405,"Method not allowd.")}(e,t);case"/panel/get-warp-configs":return await async function(e,t){const r="amnezia"===globalThis.client,n=await Re(e,t);if(!n)return new Response("Unauthorized or expired session.",{status:401});const{warpConfigs:a,proxySettings:s}=await $e(e,t),o=_e(a,!1),{warpIPv6:i,publicKey:c,privateKey:l}=o,{warpEndpoints:d,amneziaNoiseCount:u,amneziaNoiseSizeMin:p,amneziaNoiseSizeMax:h}=s,f=new wt.default,w=e=>e.split("\n").map(e=>e.trim()).join("\n"),A=r?`Jc = ${u}\n        Jmin = ${p}\n        Jmax = ${h}\n        S1 = 0\n        S2 = 0\n        H1 = 0\n        H2 = 0\n        H3 = 0\n        H4 = 0`:"";try{d.forEach((e,t)=>{f.file(`BPB-Warp-${t+1}.conf`,w(`[Interface]\n                PrivateKey = ${l}\n                Address = 172.16.0.2/32, ${i}\n                DNS = 1.1.1.1, 1.0.0.1\n                MTU = 1280\n                ${A}\n                [Peer]\n                PublicKey = ${c}\n                AllowedIPs = 0.0.0.0/0, ::/0\n                Endpoint = ${e}\n                PersistentKeepalive = 25`))});const e=await f.generateAsync({type:"blob"}),t=await e.arrayBuffer();return new Response(t,{headers:{"Content-Type":"application/zip","Content-Disposition":`attachment; filename="BPB-Warp-${r?"Pro-":""}configs.zip"`}})}catch(e){return new Response(`Error generating ZIP file: ${e}`,{status:500})}}(e,t);default:return await Et(e)}}async function yt(e,t){return"/login"===globalThis.pathName?await async function(e,t){const r=await Re(e,t);if(r)return Response.redirect(`${urlOrigin}/panel`,302);const n='<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>BPB Panel</title><link rel=icon href=/favicon.ico><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=login,visibility,visibility_off&display=block" rel=stylesheet><style>:root{--color:black;--primary-color:#09639f;--header-color:#09639f;--background-color:#fff;--form-background-color:#f9f9f9;--lable-text-color:#333;--h2-color:#3b3b3b;--border-color:#ddd;--input-background-color:white;--header-shadow:2px 2px 4px rgba(0, 0, 0, 0.25)}body,html{height:100%;margin:0}body{font-family:system-ui;background-color:var(--background-color);position:relative;overflow:hidden;text-align:center}body.dark-mode{--color:white;--primary-color:#09639F;--header-color:#3498DB;--background-color:#121212;--form-background-color:#121212;--lable-text-color:#DFDFDF;--h2-color:#D5D5D5;--border-color:#353535;--input-background-color:#252525;--header-shadow:2px 2px 4px rgba(255, 255, 255, 0.25)}.container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90%}h1{color:var(--header-color);text-shadow:var(--header-shadow)}.icon{vertical-align:middle;height:3rem}h2{color:var(--h2-color)}.form-container{background:var(--form-background-color);border:1px solid var(--border-color);border-radius:28px;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:20px;gap:20px;display:flex;flex-direction:column}.login-form{display:flex;flex-direction:column;gap:8px}.form-control{display:flex;justify-content:space-between;align-items:center;gap:16px}label{font-weight:700;color:var(--lable-text-color)}.password-wrapper{display:flex;width:100%;position:relative}.password-wrapper input[type=password],.password-wrapper input[type=text]{width:100%;padding-right:40px;text-align:center;margin:0}.toggle-password{position:absolute;top:50%;right:10px;transform:translateY(-50%);cursor:pointer;user-select:none;color:#a9a9a9}input[type=password],input[type=text]{padding:10px;border:1px solid var(--border-color);border-radius:10px;color:var(--lable-text-color);background-color:var(--input-background-color)}.hint{color:red;margin-bottom:10px}button{gap:10px;display:flex;justify-content:center;align-items:center;width:100%;padding:12px;font-size:1.1rem;font-weight:600;border:none;border-radius:10px;color:#fff;background-color:var(--primary-color);cursor:pointer;transition:background-color .3s ease}.button:focus,.button:hover{background-color:#2980b9;box-shadow:0 8px 15px rgba(0,0,0,.3);transform:translateY(-2px)}.button:active{transform:translateY(1px);box-shadow:0 3px 7px rgba(0,0,0,.3)}.material-symbols-rounded{font-variation-settings:\'FILL\' 1,\'wght\' 400,\'GRAD\' 0,\'opsz\' 24}@media only screen and (min-width:576px){.container{width:70%}}@media only screen and (min-width:768px){.container{width:50%}}@media only screen and (min-width:992px){.container{width:30%}}</style></head><body><div class=container><h1><img class=icon src=/favicon.ico alt="BPB Logo"> BPB Panel <span id=panel-version style=font-size:smaller>v__PANEL_VERSION__</span></h1><div class=form-container><h2>User Login</h2><form id=loginForm class=login-form><div class=form-control><label for=password>Password</label><div class=password-wrapper><input type=password id=password name=password required> <span id=togglePassword class="material-symbols-rounded toggle-password">visibility_off</span></div></div><div id=passwordError class=hint></div><button type=submit class=button>Login <span class=material-symbols-rounded>login</span></button></form></div></div><script>"enabled"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode"),document.getElementById("loginForm").addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("password").value;try{const e=await fetch("/login/authenticate",{method:"POST",headers:{"Content-Type":"text/plain"},body:t}),{success:o,status:n,message:s}=await e.json();if(!o){throw document.getElementById("passwordError").textContent=" Wrong Password!",new Error(`Login failed with status ${n}: ${s}`)}window.location.href="/panel"}catch(e){console.error("Login error:",e.message||e)}}),document.getElementById("togglePassword").addEventListener("click",function(){const e=document.getElementById("password"),t="password"===e.type;e.type=t?"text":"password",this.textContent=t?"visibility_off":"visibility"});<\/script></body></html>'.replace(/__PANEL_VERSION__/g,globalThis.panelVersion);return new Response(n,{headers:{"Content-Type":"text/html"}})}(e,t):"/login/authenticate"===globalThis.pathName?await Te(e,t):await Et(e)}async function gt(e,t){const{proxySettings:r}=await $e(e,t);globalThis.settings=r;const{pathName:n,client:a,subPath:s}=globalThis;switch(decodeURIComponent(n)){case`/sub/normal/${s}`:return await Ze(!1);case`/sub/full-normal/${s}`:switch(a){case"sfa":return await nt(t,!1);case"clash":return await Ye(t);case"xray":return await ut(t,!1)}case`/sub/fragment/${s}`:switch(a){case"sfa":return await nt(t,!0);case"hiddify-frag":return await Ze(!0);default:return await ut(t,!0)}case`/sub/warp/${s}`:switch(a){case"clash":return await Ve(e,t,!1);case"singbox":return await async function(e,t){const r=globalThis.settings,{warpConfigs:n}=await $e(e,t),a=[],s=[],o={proxies:[],chains:[]};r.warpEndpoints.forEach((e,t)=>{const r=` ${t+1} - Warp `;a.push(r);const i=` ${t+1} - WoW `;s.push(i);const c=tt(n,r,e,"");o.proxies.push(c);const l=tt(n,i,e,r);o.chains.push(l)});const i=[" Warp - Best Ping "," WoW - Best Ping ",...a,...s],c=await rt(i,a,s,!0,r.warpEnableIPv6);return c.endpoints=[...o.chains,...o.proxies],new Response(JSON.stringify(c,null,4),{status:200,headers:{"Content-Type":"text/plain;charset=utf-8","Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate","CDN-Cache-Control":"no-store"}})}(e,t);case"hiddify":return await Qe(!1);case"xray":return await pt(e,t,!1)}case`/sub/warp-pro/${s}`:switch(a){case"clash-pro":return await Ve(e,t,!0);case"hiddify-pro":return await Qe(!0);case"xray-knocker":return await pt(e,t,!0)}default:return await Et(e)}}async function Et(e){const t=new URL(e.url);t.hostname=globalThis.fallbackDomain,t.protocol="https:";const r=new Request(t.toString(),{method:e.method,headers:e.headers,body:e.body,redirect:"manual"});return await fetch(r)}async function bt(e,t,r,n,a){return new Response(JSON.stringify({success:e,status:t,message:r||"",body:n||""}),{headers:a||{"Content-Type":r?"text/plain":"application/json"}})}var vt="3.3.6";import{connect as Bt}from"cloudflare:sockets";async function xt(e){const t=new WebSocketPair,[r,n]=Object.values(t);n.accept();let a="",s="";const o=(e,t)=>{console.log(`[${a}:${s}] ${e}`,t||"")},i=e.headers.get("sec-websocket-protocol")||"",c=function(e,t,r){let n=!1;const a=new ReadableStream({start(a){e.addEventListener("message",e=>{if(n)return;const t=e.data;a.enqueue(t)}),e.addEventListener("close",()=>{kt(e),n||a.close()}),e.addEventListener("error",e=>{r("webSocketServer has error"),a.error(e)});const{earlyData:s,error:o}=function(e){if(!e)return{earlyData:null,error:null};try{e=e.replace(/-/g,"+").replace(/_/g,"/");const t=atob(e);return{earlyData:Uint8Array.from(t,e=>e.charCodeAt(0)).buffer,error:null}}catch(e){return{earlyData:null,error:e}}}(t);o?a.error(o):s&&a.enqueue(s)},pull(e){},cancel(t){n||(r(`ReadableStream was canceled, due to ${t}`),n=!0,kt(e))}});return a}(n,i,o);let l={value:null},d=null,u=!1;return c.pipeTo(new WritableStream({async write(e,t){if(u&&d)return d(e);if(l.value){const t=l.value.writable.getWriter();return await t.write(e),void t.releaseLock()}const{hasError:r,message:i,portRemote:c=443,addressRemote:p="",rawDataIndex:h,VLVersion:f=new Uint8Array([0,0]),isUDP:w}=function(e,t){if(e.byteLength<24)return{hasError:!0,message:"invalid data"};const r=new Uint8Array(e.slice(0,1));let n=!1,a=!1;const s=function(e,t=0){const r=function(e,t=0){return(Mt[e[t+0]]+Mt[e[t+1]]+Mt[e[t+2]]+Mt[e[t+3]]+"-"+Mt[e[t+4]]+Mt[e[t+5]]+"-"+Mt[e[t+6]]+Mt[e[t+7]]+"-"+Mt[e[t+8]]+Mt[e[t+9]]+"-"+Mt[e[t+10]]+Mt[e[t+11]]+Mt[e[t+12]]+Mt[e[t+13]]+Mt[e[t+14]]+Mt[e[t+15]]).toLowerCase()}(e,t);if(!At(r))throw TypeError("Stringified UUID is invalid");return r}(new Uint8Array(e.slice(1,17)));if(n=s===t,!n)return{hasError:!0,message:"invalid user"};const o=new Uint8Array(e.slice(17,18))[0],i=new Uint8Array(e.slice(18+o,18+o+1))[0];if(1===i);else{if(2!==i)return{hasError:!0,message:`command ${i} is not support, command 01-tcp,02-udp,03-mux`};a=!0}const c=18+o+1,l=e.slice(c,c+2),d=new DataView(l).getUint16(0);let u=c+2;const p=new Uint8Array(e.slice(u,u+1))[0];let h=0,f=u+1,w="";switch(p){case 1:h=4,w=new Uint8Array(e.slice(f,f+h)).join(".");break;case 2:h=new Uint8Array(e.slice(f,f+1))[0],f+=1,w=(new TextDecoder).decode(e.slice(f,f+h));break;case 3:{h=16;const t=new DataView(e.slice(f,f+h)),r=[];for(let e=0;e<8;e++)r.push(t.getUint16(2*e).toString(16));w=r.join(":");break}default:return{hasError:!0,message:`invild  addressType is ${p}`}}if(!w)return{hasError:!0,message:`addressValue is empty, addressType is ${p}`};return{hasError:!1,addressRemote:w,addressType:p,portRemote:d,rawDataIndex:f+h,VLVersion:r,isUDP:a}}(e,globalThis.userID);if(a=p,s=`${c}--${Math.random()} ${w?"udp ":"tcp "} `,r)throw new Error(i);if(w){if(53!==c)throw new Error("UDP proxy only enable for DNS which is port 53");u=!0}const A=new Uint8Array([f[0],0]),m=e.slice(h);if(u){const{write:e}=await async function(e,t,r){let n=!1;const a=new TransformStream({start(e){},transform(e,t){for(let r=0;r<e.byteLength;){const n=e.slice(r,r+2),a=new DataView(n).getUint16(0),s=new Uint8Array(e.slice(r+2,r+2+a));r=r+2+a,t.enqueue(s)}},flush(e){}});a.readable.pipeTo(new WritableStream({async write(a){const s=await fetch(dohURL,{method:"POST",headers:{"content-type":"application/dns-message"},body:a}),o=await s.arrayBuffer(),i=o.byteLength,c=new Uint8Array([i>>8&255,255&i]);e.readyState===Tt&&(r(`doh success and dns message length is ${i}`),n?e.send(await new Blob([c,o]).arrayBuffer()):(e.send(await new Blob([t,c,o]).arrayBuffer()),n=!0))}})).catch(e=>{r("dns udp has error"+e)});const s=a.writable.getWriter();return{write(e){s.write(e)}}}(n,A,o);return d=e,void d(m)}!async function(e,t,r,n,a,s,o){async function i(t,r){/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)&&(t=`${atob("d3d3Lg==")}${t}${atob("LnNzbGlwLmlv")}`);const a=Bt({hostname:t,port:r});e.value=a,o(`connected to ${t}:${r}`);const s=a.writable.getWriter();return await s.write(n),s.releaseLock(),a}async function c(){let e,n;const c=pathName.split("/")[2]||"",l=(atob(c)||globalThis.proxyIPs).split(",").map(e=>e.trim());if(e=l[Math.floor(Math.random()*l.length)],e.includes("]:")){const t=e.match(/^(\[.*?\]):(\d+)$/);e=t[1],n=+t[2]}2===e.split(":").length&&(e=e.split(":")[0],n=+e.split(":")[1]);const d=await i(e||t,n||r);d.closed.catch(e=>{console.log("retry tcpSocket closed error",e)}).finally(()=>{kt(a)}),Ht(d,a,s,null,o)}const l=await i(t,r);Ht(l,a,s,c,o)}(l,p,c,m,n,A,o)},close(){o("readableWebSocketStream is close")},abort(e){o("readableWebSocketStream is abort",JSON.stringify(e))}})).catch(e=>{o("readableWebSocketStream pipeTo error",e)}),new Response(null,{status:101,webSocket:r})}async function Ht(e,t,r,n,a){let s=r,o=!1;await e.readable.pipeTo(new WritableStream({start(){},async write(e,r){o=!0,t.readyState!==Tt&&r.error("webSocket.readyState is not open, maybe close"),s?(t.send(await new Blob([s,e]).arrayBuffer()),s=null):t.send(e)},close(){a(`remoteConnection!.readable is close with hasIncomingData is ${o}`)},abort(e){console.error("remoteConnection!.readable abort",e)}})).catch(e=>{console.error("VLRemoteSocketToWS has exception ",e.stack||e),kt(t)}),!1===o&&n&&(a("retry"),n())}var Tt=1,Rt=2;function kt(e){try{e.readyState!==Tt&&e.readyState!==Rt||e.close()}catch(e){console.error("safeCloseWebSocket error",e)}}var Mt=[];for(let e=0;e<256;++e)Mt.push((e+256).toString(16).slice(1));var St=l(g(),1);import{connect as _t}from"cloudflare:sockets";async function Ct(e){const t=new WebSocketPair,[r,n]=Object.values(t);n.accept();let a="",s="";const o=(e,t)=>{console.log(`[${a}:${s}] ${e}`,t||"")},i=e.headers.get("sec-websocket-protocol")||"",c=function(e,t,r){let n=!1;const a=new ReadableStream({start(a){e.addEventListener("message",e=>{if(n)return;const t=e.data;a.enqueue(t)}),e.addEventListener("close",()=>{Dt(e),n||a.close()}),e.addEventListener("error",e=>{r("webSocketServer has error"),a.error(e)});const{earlyData:s,error:o}=function(e){if(!e)return{earlyData:null,error:null};try{e=e.replace(/-/g,"+").replace(/_/g,"/");const t=atob(e);return{earlyData:Uint8Array.from(t,e=>e.charCodeAt(0)).buffer,error:null}}catch(e){return{earlyData:null,error:e}}}(t);o?a.error(o):s&&a.enqueue(s)},pull(e){},cancel(t){n||(r(`ReadableStream was canceled, due to ${t}`),n=!0,Dt(e))}});return a}(n,i,o);let l={value:null};return c.pipeTo(new WritableStream({async write(e,t){if(l.value){const t=l.value.writable.getWriter();return await t.write(e),void t.releaseLock()}const{hasError:r,message:i,portRemote:c=443,addressRemote:d="",rawClientData:u}=function(e){if(e.byteLength<56)return{hasError:!0,message:"invalid data"};let t=56;if(13!==new Uint8Array(e.slice(56,57))[0]||10!==new Uint8Array(e.slice(57,58))[0])return{hasError:!0,message:"invalid header format (missing CR LF)"};if((new TextDecoder).decode(e.slice(0,t))!==(0,St.sha224)(globalThis.TRPassword))return{hasError:!0,message:"invalid password"};const r=e.slice(t+2);if(r.byteLength<6)return{hasError:!0,message:"invalid SOCKS5 request data"};const n=new DataView(r);if(1!==n.getUint8(0))return{hasError:!0,message:"unsupported command, only TCP (CONNECT) is allowed"};const a=n.getUint8(1);let s=0,o=2,i="";switch(a){case 1:s=4,i=new Uint8Array(r.slice(o,o+s)).join(".");break;case 3:s=new Uint8Array(r.slice(o,o+1))[0],o+=1,i=(new TextDecoder).decode(r.slice(o,o+s));break;case 4:{s=16;const e=new DataView(r.slice(o,o+s)),t=[];for(let r=0;r<8;r++)t.push(e.getUint16(2*r).toString(16));i=t.join(":");break}default:return{hasError:!0,message:`invalid addressType is ${a}`}}if(!i)return{hasError:!0,message:`address is empty, addressType is ${a}`};const c=o+s,l=r.slice(c,c+2),d=new DataView(l).getUint16(0);return{hasError:!1,addressRemote:i,portRemote:d,rawClientData:r.slice(c+4)}}(e);if(a=d,s=`${c}--${Math.random()} tcp`,r)throw new Error(i);!async function(e,t,r,n,a,s){async function o(t,r){/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)&&(t=`${atob("d3d3Lg==")}${t}${atob("LnNzbGlwLmlv")}`);const a=_t({hostname:t,port:r});e.value=a,s(`connected to ${t}:${r}`);const o=a.writable.getWriter();return await o.write(n),o.releaseLock(),a}async function i(){let e,n;const i=globalThis.pathName.split("/")[2]||"",c=(atob(i)||globalThis.proxyIPs).split(",").map(e=>e.trim());if(e=c[Math.floor(Math.random()*c.length)],e.includes("]:")){const t=e.match(/^(\[.*?\]):(\d+)$/);e=t[1],n=+t[2]}2===e.split(":").length&&(e=e.split(":")[0],n=+e.split(":")[1]);const l=await o(e||t,n||r);l.closed.catch(e=>{console.log("retry tcpSocket closed error",e)}).finally(()=>{Dt(a)}),Pt(l,a,null,s)}const c=await o(t,r);Pt(c,a,i,s)}(l,d,c,u,n,o)},close(){o("readableWebSocketStream is closed")},abort(e){o("readableWebSocketStream is aborted",JSON.stringify(e))}})).catch(e=>{o("readableWebSocketStream pipeTo error",e)}),new Response(null,{status:101,webSocket:r})}async function Pt(e,t,r,n){let a=!1;await e.readable.pipeTo(new WritableStream({start(){},async write(e,r){a=!0,t.readyState!==Lt&&r.error("webSocket connection is not open"),t.send(e)},close(){n(`remoteSocket.readable is closed, hasIncomingData: ${a}`)},abort(e){console.error("remoteSocket.readable abort",e)}})).catch(e=>{console.error("trojanRemoteSocketToWS error:",e.stack||e),Dt(t)}),!1===a&&r&&(n("retry"),r())}var Lt=1,It=2;function Dt(e){try{e.readyState!==Lt&&e.readyState!==It||e.close()}catch(e){console.error("safeCloseWebSocket error",e)}}var Ot={async fetch(e,t){try{!function(e,t){const r=new URL(e.url),n=new URLSearchParams(r.search);if(globalThis.panelVersion=vt,globalThis.defaultHttpPorts=[80,8080,2052,2082,2086,2095,8880],globalThis.defaultHttpsPorts=[443,8443,2053,2083,2087,2096],globalThis.userID=t.UUID,globalThis.TRPassword=t.TR_PASS,globalThis.proxyIPs=t.PROXY_IP||"bpb.yousef.isegaro.com",globalThis.hostName=e.headers.get("Host"),globalThis.pathName=r.pathname,globalThis.client=n.get("app"),globalThis.urlOrigin=r.origin,globalThis.dohURL=t.DOH_URL||"https://cloudflare-dns.com/dns-query",globalThis.fallbackDomain=t.FALLBACK||"speed.cloudflare.com",globalThis.subPath=t.SUB_PATH||globalThis.userID,!["/error","/secrets","/favicon.ico"].includes(globalThis.pathName)){if(!globalThis.userID||!globalThis.TRPassword)throw new Error(`Please set UUID and Trojan password first. Please visit <a href="${globalThis.urlOrigin}/secrets" target="_blank">here</a> to generate them.`,{cause:"init"});if(globalThis.userID&&!At(globalThis.userID))throw new Error(`Invalid UUID: ${globalThis.userID}`,{cause:"init"});if("object"!=typeof t.kv)throw new Error("KV Dataset is not properly set! Please refer to tutorials.",{cause:"init"})}}(e,t);const r=e.headers.get("Upgrade"),n=globalThis.pathName;return r&&"websocket"===r?n.startsWith("/tr")?await Ct(e):await xt(e):n.startsWith("/panel")?await mt(e,t):n.startsWith("/sub")?await gt(e,t):n.startsWith("/login")?await yt(e,t):n.startsWith("/logout")?await async function(){return await bt(!0,200,"Successfully logged out!",null,{"Set-Cookie":"jwtToken=; Secure; SameSite=None; Expires=Thu, 01 Jan 1970 00:00:00 GMT","Content-Type":"text/plain"})}():n.startsWith("/error")?await async function(){const e='<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>BPB Panel</title><link rel=icon href=/favicon.ico><style>:root{--color:black;--header-color:#09639f;--background-color:#fff;--border-color:#ddd;--header-shadow:2px 2px 4px rgba(0, 0, 0, 0.25)}body,html{height:100%;width:100%;margin:0;display:flex;justify-content:center;align-items:center;font-family:system-ui;color:var(--color);background-color:var(--background-color);text-align:center}body.dark-mode{--color:white;--header-color:#3498DB;--background-color:#121212;--header-shadow:2px 2px 4px rgba(255, 255, 255, 0.25)}h1{color:var(--header-color);text-shadow:var(--header-shadow)}.icon{vertical-align:middle;height:3rem}</style></head><body><div id=error-container><h1><img class=icon src=/favicon.ico alt="BPB Logo"> BPB Panel <span id=panel-version style=font-size:smaller>v__PANEL_VERSION__</span></h1><div id=error-message><h2> Something went wrong!</h2><p><b id=error></b></p></div></div><script>"enabled"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode");const params=new URLSearchParams(window.location.search),errorMessage=params.get("message");document.getElementById("error").innerHTML=` ${errorMessage}`;;<\/script></body></html>'.replace(/__PANEL_VERSION__/g,globalThis.panelVersion);return new Response(e,{status:200,headers:{"Content-Type":"text/html"}})}():n.startsWith("/secrets")?await async function(){const e='<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>BPB Panel</title><link rel=icon href=/favicon.ico><link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=content_copy,refresh&display=block" rel=stylesheet><style>:root{--color:black;--primary-color:#09639f;--header-color:#09639f;--background-color:#fff;--form-background-color:#f9f9f9;--lable-text-color:#333;--h2-color:#3b3b3b;--border-color:#ddd;--input-background-color:white;--header-shadow:2px 2px 4px rgba(0, 0, 0, 0.25)}body,html{height:100%;margin:0}body{font-family:system-ui;background-color:var(--background-color);color:var(--lable-text-color);position:relative;text-align:center}body.dark-mode{--color:white;--primary-color:#09639F;--header-color:#3498DB;--background-color:#121212;--form-background-color:#121212;--lable-text-color:#DFDFDF;--h2-color:#D5D5D5;--border-color:#353535;--input-background-color:#252525;--header-shadow:2px 2px 4px rgba(255, 255, 255, 0.25)}.container{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90%}h1{color:var(--header-color);text-shadow:var(--header-shadow)}.icon{vertical-align:middle;height:3rem}h2{color:var(--h2-color)}h3{color:var(--lable-text-color)}.form-container{display:flex;flex-direction:column;gap:20px;background:var(--form-background-color);border:1px solid var(--border-color);border-radius:28px;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:20px}.value-container{color:var(--lable-text-color);display:flex;flex-direction:row;justify-content:center;align-items:center;gap:8px}.output-container{width:100%;padding:8px;text-align:center;background-color:var(--input-background-color);color:var(--lable-text-color);border:1px solid var(--border-color);border-radius:10px}.copy-icon{cursor:pointer;transition:color .2s}.copy-icon:hover{color:#2980b9}button{gap:10px;display:flex;justify-content:center;align-items:center;width:100%;padding:12px;font-size:1.1rem;font-weight:600;border:none;border-radius:10px;color:#fff;background-color:var(--primary-color);cursor:pointer;transition:background-color .3s ease}.button:focus,.button:hover{background-color:#2980b9;box-shadow:0 8px 15px rgba(0,0,0,.3);transform:translateY(-2px)}.button:active{transform:translateY(1px);box-shadow:0 3px 7px rgba(0,0,0,.3)}.button:active{transform:translateY(1px);box-shadow:0 3px 7px rgba(0,0,0,.3)}.material-symbols-rounded{font-variation-settings:\'FILL\' 1,\'wght\' 400,\'GRAD\' 0,\'opsz\' 24}.material-symbols-outlined:hover{cursor:pointer}@media only screen and (min-width:576px){.container{width:70%}}@media only screen and (min-width:768px){.container{width:50%}}@media only screen and (min-width:992px){.container{width:40%}}</style></head><body><div class=container><h1><img class=icon src=/favicon.ico alt="BPB Logo"> BPB Panel <span id=panel-version style=font-size:smaller>v__PANEL_VERSION__</span></h1><div class=form-container><h2>Secrets generator</h2><div><h3>Random UUID</h3><div class=value-container><div class=output-container><span id=uuid class=output></span></div><span class=material-symbols-rounded onclick="copyToClipboard(\'uuid\')">content_copy</span></div></div><div><h3>Random Trojan Password</h3><div class=value-container><div class=output-container><span id=tr-password class=output></span></div><span class=material-symbols-rounded onclick="copyToClipboard(\'tr-password\')">content_copy</span></div></div><div><h3>Random Subscription URI path</h3><div class=value-container><div class=output-container><span id=sub-path class=output></span></div><span class=material-symbols-rounded onclick="copyToClipboard(\'sub-path\')">content_copy</span></div></div><button class=button class=button onclick=generateCredentials()>Generate Again <span class=material-symbols-rounded>refresh</span></button></div></div><script>function generateUUID(){return crypto.randomUUID()}function generateStrongPassword(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+[]{}|;:\',.<>?";let e="";const n=new Uint8Array(16);crypto.getRandomValues(n);for(let o=0;o<16;o++)e+=t[n[o]%87];return e}function generateSubURIPath(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@__SCRIPT__*_-+;:,.";let e="";const n=new Uint8Array(16);crypto.getRandomValues(n);for(let o=0;o<16;o++)e+=t[n[o]%74];return e}function generateCredentials(){const t=generateUUID(),e=generateStrongPassword(),n=generateSubURIPath();document.getElementById("uuid").textContent=t,document.getElementById("tr-password").textContent=e,document.getElementById("sub-path").textContent=n}"enabled"===localStorage.getItem("darkMode")&&document.body.classList.add("dark-mode"),generateCredentials(),window.copyToClipboard=function(t){const e=document.getElementById(t).textContent;navigator.clipboard.writeText(e).then(()=>alert(" Copied to clipboard!")).catch(t=>console.error("Failed to copy text:",t))};<\/script></body></html>'.replace(/__PANEL_VERSION__/g,globalThis.panelVersion);return new Response(e,{headers:{"Content-Type":"text/html"}})}():n.startsWith("/favicon.ico")?await async function(){return new Response(Uint8Array.from(atob("AAABAAEAQEAAAAEAIAAoQgAAFgAAACgAAABAAAAAgAAAAAEAIAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAABMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASGtEBSs/KFsRGRCyAwQC5wAAAPoBAgHtDxYOvyU2InFEZD8QTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAOVQ1LgcLB9UAAAD/AQEA/ykjGP9ANyb/MCod/wUEA/8AAAD/AgQC6yo/J1dMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAOVU2KwIDAu4AAAD/Wk01/9W3f//105L/9dOS//XTkv/jxIf/emlI/wYFA/8AAAD/JjgjZkxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEptRQE2UDM3IjMgehQdEqsNFAzHBwsHzw4VDcUWIRWmJTcjcTpVNilMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASGpDBgcKBtcAAAD/lYBY//XTkv/105L/9dOS//XTkv/105L/9dOS//TSkf+xjE7/DQoF/wABAPg6VTYsTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAS25GAC1DKlQHCwfXAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/DBILwzVPMjhMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHACo/J1sAAAD/VUkz//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/xzIj/5LJh/5t5Qv8AAAD/EhoRrUxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAPls5IA4VDbwAAAD/BAMC/0k+K/+VgFn/y695/+rKi//00pH/6MiK/8aqdv+JdlH/Ny8h/wAAAP8AAAD9FyIVmkVlQA1McEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwARGRC0AAAA/8Gmc//105L/9dOS//XTkv/105L/9dOS//XTkv/105L/6r90/+SyYf/jsWD/MiYV/wAAAPlCYj4STHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcANlAyNQIEAuoAAAD/S0As/9O2fv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv+/pHH/Lykc/wAAAP8JDQjSQF88GUxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBIakMFAAEA9R4aEv/00pH/9dOS//XTkv/105L/9dOS//XTkv/105L/8s2K/+SyYf/ksmH/5LJh/3pfM/8AAAD/LkQrUExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAO1g3JQIDAu0CAQH/iXZR//TSkf/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS/+7Njv9bTjb/AAAA/wkNCM9GZ0EKTHBHAExwRwBMcEcATHBHAExwRwBMcEcAOFQ0LwAAAP9bTjb/9dOS//XTkv/105L/9dOS//XTkv/105L/9NKR/+i6bv/ksmH/5LJh/+SyYf+XdkD/AAAA/yo+J21McEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcARWZBDAcLBtgAAAD/lH9Y//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9NKR/15PM/8AAAD/ExwRp0tuRgBMcEcATHBHAExwRwBMcEcATHBHAC1EKlYAAAD/iXZR//XTkv/105L/9dOS//XTkv/105L/9dOS/+3Ffv/ksmH/5LJh/+SyYf/ksmH/kXE9/wAAAP8qPidmTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHABspGYwAAAD/ZVc8//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/lunH/MSYU/wAAAP8sQSlUTHBHAExwRwBMcEcATHBHAExwRwAjNCB3AAAA/66WZ//105L/9dOS//XTkv/105L/9dOS//DKhf/ksmL/5LJh/+SyYf/ksmH/5LJh/2ROKv8AAAD/NE4xPExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEJhPRMAAQD2ExAL/+fHiv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/6bxw/7WNTP8AAAD/CAwH0ktuRgBMcEcATHBHAExwRwBMcEcAHSobjwAAAP/JrXf/9dOS//XTkv/105L/9dOS//HMiP/ks2P/5LJh/+SyYf/ksmH/5LJh/92tXv8WEQn/AgMC60lrRARMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwAlNyNuAAAA/4RyTv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS/+e4av/ksmH/QzQc/wAAAP82UDI2THBHAExwRwBMcEcATHBHABYhFaEAAAD/3b6D//XTkv/105L/9dOS//LNif/ltWX/5LJh/+SyYf/ksmH/5LJh/+OxYP9iTCn/AAAA/x4tHIRMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcADhYOuwQDAv/kxIf/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//TRkP/ksmL/5LJh/6J+RP8AAAD/HiwchkxwRwBMcEcATHBHAExwRwASGxGxAAAA/+7Njv/105L/9dOS//DLhv/ltGX/5LJh/+SyYf/ksmH/5LJh/9WmWv9bRyb/AAAA/wgMB9dFZkELTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAAIDAucqJBn/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/wyoX/5LJh/+SyYf/drF3/BQMC/w4WDr5McEcATHBHAExwRwBMcEcADxYOvgYGA//105L/9dOS/+/Igv/ksmL/5LJh/+SyYf/gr1//rohK/19KKP8LCQT/AAAA/wUIBd88WTgkTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEptRQAAAAD8QTgm//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/6r91/+SyYf/ksmH/5LJh/yMcD/8EBgTiTHBHAExwRwBMcEcATHBHAAsQCsoPDQn/zK95/7CUYf+Pbz3/dFsx/1ZDJP8xJhT/CAcD/wAAAP8AAAD/AgMC7B4sHIRFZUANTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBJbEQAAAAA/EM5J//105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9NKQ/+W0ZP/ksmH/5LJh/+SyYf81KRb/AAAA8kxwRwBMcEcATHBHAExwRwAHCwfYAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAEA8wsRC8ccKhqQMUguSUdpQwZMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAAABAO0yKx7/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS/+/Igv/ksmH/5LJh/+SyYf/ksmH/MicV/wAAAO9McEcATHBHAExwRwBMcEcAHiwcghAXDroZJReeIDAegik8JmQzTDBEPlw6IElsRAFMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwAJDgnRFRIM//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/ou27/5LJh/+SyYf/ksmH/5LJh/xoUCv8HCwfYTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAFB4TpwAAAP/cvYL/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/yzYr/5LJh/+SyYf/ksmH/5LJh/8yfVv8AAAD/FB0Sq0xwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHACQ1IXUAAAD/o4xh//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/6r50/+SyYf/ksmH/5LJh/+SyYf+AZDb/AAAA/yY5I2tMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwA0TjE7AAAA/2FUOv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/8s6L/+SyYv/ksmH/5LJh/+SyYf/ZqVz/GRMK/wABAPhBXzwYTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASGpDBQECAfAXEw3/8tGQ//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS/+m8cP/ksmH/5LJh/+SyYf/ksmH/XEcn/wAAAP8aJxmOTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHADhTNC4fLh2FDhUNwAUIBeAAAADpBwsH2RIbEbMlNiJ0P147G0xwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwASHBGuAAAA/8Clcv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//DLhv/ksmH/5LJh/+SyYf/ksmH/kXE9/wAAAP8FCAXeRWVADUxwRwBMcEcATHBHAExwRwBMcEcARWVADhQdEqUAAAD/AAAA/wAAAP8PDQn/GhYP/wgHBf8AAAD/AAAA/wAAAPkaJhiQRWVADExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAKT0mYAAAAP9yYkT/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//TSkf/nuWz/5LJh/+SyYf/ksmH/mXhB/wYEAv8CAwLtOVU2LExwRwBMcEcATHBHAExwRwBMcEcAO1g3JggMB9cAAAD/KCIX/5aBWf/dvoT/9dOS//XTkv/z0ZD/zbF6/4NxTv8bFxD/AAAA/wcLB9k6VTYsTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEJiPRAAAQD3HhoR//PRkf/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/ux4D/5LJh/+SyYf/jsWD/el8z/wEBAP8CAwLwNlAyOExwRwBMcEcATHBHAExwRwBMcEcANlAyNQIDAu4BAAD/eWhI//HQkP/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/68qM/3JiQ/8CAQH/AgMC8TdRMzZMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAExwRqQAAAP+7oW//9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/00Y//5bVm/+SyYf/gr1//XUgn/wAAAP8CBALuNE4xOExwRwBMcEcATHBHAExwRwBMcEcAP106HQMEA+kAAAD/i3dS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/k35X/wAAAP8EBwThRWVADExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHADFJLkQAAAD/Y1U6//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/6r91/+SyYf/AllH/MCUU/wAAAP8JDQjRPFk4JUxwRwBMcEcATHBHAExwRwBMcEcARmhCCQsQCsoAAAD/gnBN//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv9tXkH/AAAA/x4sHIhMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBKbUUABwsH2Q0LB//oyIr/9dOS//XTkv/105L/9dOS//XTkv/105L/8MmE/+KxYP+DZjf/CQcD/wAAAP8VHxOgRmhBCkxwRwBMcEcATHBHAExwRwBMcEcAS25GABMdEqgAAAD/aFk+//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/786O/yIeFP8BAgH0QmI+EUxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHACIyH3kAAAD/jnpU//XTkv/105L/9dOS//XTkv/105L/9NGQ/8adWv82Khb/AAAA/wIDAvApPSdZTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHACg7JWIAAAD/Licb/+/Ojv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv+GdFD/AAAA/yc6JWZMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwA/XTsbAAAA+iYgFv/z0ZH/9dOS//XTkv/105L/8M6O/4JtSP8JBwT/AAAA/w8WDrs9WjkgTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAD9dOxoCAwLuCAcE/8queP/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/zrF6/wAAAP8THRKqTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHABMcEqwAAAD/sJhp//XTkv/105L/qpJl/yMeFf8AAAD/BQcE4yo/KFhLbkYATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEtuRgARGRCyAAAA/5R/WP/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//PRkf8HBgT/CAwH1UxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwAwRy1JAAAA/1JHMf/WuH//SD0q/wAAAP8AAAD/FiEVnUVlQA5McEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwArQChXAAAA/0I4J//00pH/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/FBEM/wECAeJMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASGtDAwQHBOAGBQP/CgkG/wAAAP8LEArJNU4xOkxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBCYj4UAwQC6QcGBP/Psnv/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9NKR/wgHBf8IDAfWTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwAiMyBzAAAA/wUHBOMqPidcSm1FAkxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAFiEVngAAAP97akn/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS/9K0fP8AAAD/EhwRrkxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAR2lCBitAKV9FZUAOTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcANU8xOAAAAP4hHBP/7cyN//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv+MeVP/AAAA/yY4I2tMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASWxEAgoPCc0AAAD/qJBj//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/y0JD/KSMY/wABAPdAXzwVTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAEZnQQ0AAQD0AAAA/wgHBP9lVjz/1bd+//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9dOS//XTkv/105L/9NKR//HMiP/tw3v/f2c+/wAAAP8YIxaZTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcAPls6HR8tHIUDBAPoAAAA/wMDAv9IPiv/p49h/+zGgf/wyYT/8MqE//DJhP/wyYP/78iC/+7HgP/txX3/7MN6/+vAdf/pvHD/57hq/+SzYv/ksmH/on5E/wQDAf8CBALrQWA8GExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcASGpDBSxBKVUNFAzCAAAA/wAAAP8VEQn/ZE4q/7KLS//jsWD/5LJh/+SyYf/ksmH/5LJh/+SyYf/ksmH/5LJh/+SyYf/hsF//gGQ2/wYEAv8AAQD4MUkuQ0xwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHADlUNSwZJReXAAEA9AAAAP8AAAD/HBYM/2NNKv+hfkT/1qdb/+SyYf/ksmH/5LJh/+GvX/+jf0X/LyQT/wAAAP8CAwLwMUguQ0xwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAERkPw8qPyheEhsRsAABAPUAAAD/AAAA/wAAAP8WEQn/KB8R/yYeEP8KCAT/AAAA/wAAAP8PFw61PFk4JUxwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBFZkEKMkovRCExH38THBGwCQ0I0gMFA+QFBwTiCxELyB0rG484UjQwTHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcATHBHAExwRwBMcEcA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////gD////////8AH////////gAP///+AH/8AAf///wAH/wAB///8AAH/AAD///gAAP4AAP//8AAAfgAA///gAAB+AAD//+AAAD4AAP//wAAAPgAA///AAAAeAAH//8AAAB4AAf//wAAAHgAD///AAAAeAAf//8AAAB4AH///wAAAHgH////AAAAf/////8AAAB//////wAAAH//////AAAAf/////8AAAD+AP///4AAAPgAP///gAAB8AAf//+AAAPgAA///8AAB8AAB///wAAPgAAH///gAB+AAAP//+AAfwAAA///4AD+AAAD///wA/4AAAP///AH/AAAA///8B/4AAAD///4P/gAAAP///j/8AAAA//////gAAAD/////+AAAAf/////8AAAB//////8AAAP//////+AAB///////+AAP////////AD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8="),e=>e.charCodeAt(0)),{headers:{"Content-Type":"image/x-icon","Cache-Control":"public, max-age=86400"}})}():await Et(e)}catch(e){return await async function(e){const t=encodeURIComponent(e.message);return Response.redirect(`${globalThis.urlOrigin}/error?message=${t}`,302)}(e)}}};export{Ot as default};